{"version":3,"sources":["webpack:///./src/components/login/Mail.vue?0e1d","webpack:///./src/pages/home/Settings.vue","webpack:///./src/components/home/EmailLogin.vue","webpack:///./src/components/home/EmailLogin.vue?4f47","webpack:///./src/pages/home/Settings.vue?4233","webpack:///./src/components/login/Mail.vue","webpack:///./src/components/login/Mail.vue?a17a"],"names":["class","back-button","bottom-bar","header-title","body","systemSetting","item","index","key","getSetting","label","emailLogin","closeLoading","loginSYS","show-cancel-button","cancelLogin","name","components","Mail","methods","form","$store","dispatch","this","$emit","__exports__","EmailLogin","HomeLayout","data","computed","state","loading","$loading","lock","spinner","background","setTimeout","close","value","render","id","ref","model","rules","prop","email","clearable","placeholder","prepend","verify_code","readonly","maxlength","append","disabled","type","getMailCode","codeValue","style","plain","showCancelButton","props","Boolean","default","loginType","mailLogin","login","required","message","trigger","created","setInterval","times","$refs","validateField","valid","then","$message","success","formName","validate"],"mappings":"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","file":"js/chunk-161ee2ba.358c392e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Mail.vue?vue&type=style&index=0&id=1ea34f9e&lang=less\"","<template>\n  <HomeLayout :back-button=\"true\" :bottom-bar=\"false\" header-title=\"系统设置\">\n    <template #body>\n      <div class=\"grid\">\n        <div\n          v-for=\"(item, index) in systemSetting\"\n          :key=\"index\"\n          :class=\"item.class\"\n          @click=\"getSetting(item)\">\n          <div class=\"info\">{{ item.label }}</div>\n          <div class=\"icon\">\n            <i class=\"el-icon-arrow-right icon\"></i>\n          </div>\n        </div>\n      </div>\n      <el-collapse-transition v-if=\"emailLogin\">\n        <EmailLogin @cancelLogin=\"closeLoading\"></EmailLogin>\n      </el-collapse-transition>\n    </template>\n  </HomeLayout>\n</template>\n\n<script>\nimport HomeLayout from '@/components/HomeLayout';\nimport EmailLogin from '@/components/home/EmailLogin';\n\nexport default {\n  name: 'Settings',\n  components: { EmailLogin, HomeLayout },\n  data() {\n    return {\n      emailLogin: false\n    };\n  },\n  computed: {\n    systemSetting() {\n      return this.$store.state.index.systemSetting;\n    }\n  },\n  methods: {\n    /**\n     * 获取配置\n     * @param item\n     */\n    getSetting(item) {\n      this.closeLoading(item);\n    },\n    /**\n     * 关闭弹框\n     * @param item\n     */\n    closeLoading(item = '') {\n      const loading = this.$loading({\n        lock: true,\n        spinner: 'el-icon-loading',\n        background: 'rgba(225, 225, 224, 0.8)'\n      });\n      setTimeout(() => {\n        loading.close();\n        this.emailLogin = item ? item.value === 'email-login' : false;\n      }, 500);\n    }\n  }\n};\n</script>\n\n<style scoped>\n\n</style>\n","<template>\n  <div class=\"email-login\">\n    <div class=\"email-login__list\">\n      <div class=\"email-login__title\">邮箱登录</div>\n      <Mail @loginSYS=\"loginSYS\" :show-cancel-button=\"true\" @cancelLogin=\"cancelLogin\"></Mail>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Mail from '@/components/login/Mail';\nexport default {\n  name: 'EmailLogin',\n  components: { Mail },\n  methods: {\n    /**\n     * 用戶登錄\n     * @param form\n     * @return {Promise<void>}\n     */\n    async loginSYS(form) {\n      await this.$store.dispatch('login/loginSYS', form);\n    },\n    /**\n     * 取消登录\n     */\n    cancelLogin() {\n      this.$emit('cancelLogin');\n    }\n  }\n};\n</script>\n\n<style scoped>\n\n</style>\n","import { render } from \"./EmailLogin.vue?vue&type=template&id=31b01380&scoped=true\"\nimport script from \"./EmailLogin.vue?vue&type=script&lang=js\"\nexport * from \"./EmailLogin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/fanglong/Documents/vue-app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-31b01380\"]])\n\nexport default __exports__","import { render } from \"./Settings.vue?vue&type=template&id=77af7b06&scoped=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=js\"\nexport * from \"./Settings.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/fanglong/Documents/vue-app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-77af7b06\"]])\n\nexport default __exports__","<template>\n  <el-main id=\"mail\">\n    <el-form ref=\"mail\" :model=\"form\" :rules=\"rules\">\n      <el-form-item prop=\"email\">\n        <el-input v-model.trim=\"form.email\" clearable placeholder=\"请输入邮箱账号\">\n          <template #prepend>\n            <i class=\"el-icon-s-custom\"></i>\n          </template>\n        </el-input>\n      </el-form-item>\n      <el-form-item prop=\"verify_code\">\n        <el-input\n          v-model.number=\"form.verify_code\"\n          :readonly=\"!form.email\"\n          clearable\n          maxlength=\"8\"\n          placeholder=\"请输入邮箱验证码\">\n          <template #append>\n            <el-button\n              :disabled=\"disabled\"\n              type=\"primary\"\n              @click=\"getMailCode\">\n              {{ codeValue }}\n            </el-button>\n          </template>\n        </el-input>\n      </el-form-item>\n    </el-form>\n    <el-footer style=\"text-align: center;height: 30px !important\">\n      <el-button plain type=\"primary\" @click=\"loginSYS('mail')\">登录系统</el-button>\n      <el-button plain @click=\"$emit('cancelLogin')\" v-if=\"showCancelButton\">取消</el-button>\n    </el-footer>\n  </el-main>\n</template>\n\n<script>\nexport default {\n  name: 'Mail',\n  props: {\n    showCancelButton: {\n      type: Boolean,\n      default: () => false\n    }\n  },\n  data() {\n    return {\n      form: { email: '', verify_code: '', loginType: 'mail' },\n      codeValue: '获取验证码',\n      mailLogin: this.$store.state.login.mailLogin,\n      rules: {\n        email: [{ required: true, message: '请输入邮箱', trigger: 'blur', type: 'email' }],\n        verify_code: [{ required: true, message: '请输入邮箱验证码', trigger: 'blur' }]\n      },\n      disabled: false\n    };\n  },\n  created() {\n    /**\n     * 邮箱验证码定时器\n     * @return {Promise<void>}\n     */\n    setInterval(() => {\n      if (this.times >= 0 && this.mailLogin) {\n        this.getMailCode();\n        return false;\n      }\n      this.codeValue = '获取验证码';\n      this.disabled = false;\n      this.times = 60;\n    }, 1000);\n  },\n  methods: {\n    /**\n     * 获取邮箱验证码\n     */\n    async getMailCode() {\n      await this.$refs['mail'].validateField(['email'], async(valid) => {\n          if (valid) {\n            return false;\n          }\n          if (this.mailLogin) {\n            this.codeValue = this.times-- + 'S重新获取';\n            this.disabled = true;\n            return false;\n          }\n          await this.$store.dispatch('login/sendMail', { email: this.form.email }).then(() => {\n            this.$message.success('验证码发送成功');\n          });\n      });\n    },\n    /**\n     * 登录系统\n     * @param formName\n     */\n    loginSYS(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (!valid) {\n          return false;\n        }\n        this.$emit('loginSYS', this.form);\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n#mail {\n  .el-input-group__append {\n    background-color: #409EFF;\n    color: #FFFFFF;\n  }\n}\n</style>\n","import { render } from \"./Mail.vue?vue&type=template&id=1ea34f9e\"\nimport script from \"./Mail.vue?vue&type=script&lang=js\"\nexport * from \"./Mail.vue?vue&type=script&lang=js\"\n\nimport \"./Mail.vue?vue&type=style&index=0&id=1ea34f9e&lang=less\"\n\nimport exportComponent from \"/Users/fanglong/Documents/vue-app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}