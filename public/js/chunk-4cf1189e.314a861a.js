(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cf1189e"],{"04fb":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=Object(r["withScopeId"])("data-v-624098cb");Object(r["pushScopeId"])("data-v-624098cb");var c={class:"message-input__item"},s={ref:"message",class:"input-content",contentEditable:"true"},a=Object(r["createTextVNode"])("发送");Object(r["popScopeId"])();var o=i((function(e,t,n,o,u,l){var f=Object(r["resolveComponent"])("el-avatar"),d=Object(r["resolveComponent"])("el-button"),m=Object(r["resolveComponent"])("HomeLayout");return Object(r["openBlock"])(),Object(r["createBlock"])(m,{ref:"homeLayout","connect-web-socket":!0,"header-title":l.receiver.client_name},{body:i((function(){return[Object(r["createVNode"])("div",{style:u.cssStyle.box,class:"message-box"},[Object(r["createVNode"])("div",{style:u.cssStyle.content,class:"message-content"},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(l.selfMessage,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:n},[Object(r["createVNode"])("div",{class:["".concat(t.from_client_name===e.Permission.username?"self-state":""),"user-info__message"]},[Object(r["createVNode"])(f,{class:"".concat(t.from_client_name===e.Permission.username?"self-state":""),size:40,src:t.client_img},null,8,["class","src"]),Object(r["createVNode"])("div",{class:["".concat(t.from_client_name===e.Permission.username?"self-state":""),"content"],innerHTML:l.replaceContent(t.content)},null,10,["innerHTML"])],2)])})),128))],4),Object(r["createVNode"])("div",c,[Object(r["createVNode"])("div",s,null,512),Object(r["createVNode"])(d,{size:"medium",type:"primary",onClick:l.sendMessage},{default:i((function(){return[a]})),_:1},8,["onClick"])])],4)]})),_:1},8,["header-title"])})),u=n("1da1"),l=(n("96cf"),n("159b"),n("498a"),n("ac1f"),n("5319"),n("4d63"),n("25f0"),n("eb00")),f=n("6171"),d={name:"Message",components:{HomeLayout:l["a"]},data:function(){return{uploadData:{token:this.$store.state.baseLayout.token,file_type:"text",round_name:!0},cssStyle:{box:"",content:""}}},computed:{selfMessage:function(){var e=this,t=[];return this.messageLists.forEach((function(n){n.to_client_id!==e.receiver.uuid&&n.from_client_id!==e.receiver.uuid||e.Permission.uuid===e.receiver.uuid||t.push(n)})),this.$store.commit("index/UPDATE_MUTATIONS",{selfMessage:t}),t},messageLists:function(){return JSON.parse(JSON.stringify(this.$store.state.index.messageLists))},receiver:function(){return this.$store.state.index.receiver},userLists:function(){return this.$store.state.index.userLists}},mounted:function(){var e=this;this.$nextTick(Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.Permission){t.next=3;break}return t.next=3,e.$router.push({path:"/"});case 3:case"end":return t.stop()}}),t)}))))},created:function(){var e=document.documentElement.scrollHeight||document.body.scrollHeight;this.cssStyle.box="height: ".concat(e-120,"px"),this.cssStyle.content="height: ".concat(e-200,"px")},methods:{sendMessage:function(){if(""===this.$refs.message.innerHTML.trim())return!1;var e={type:"say",to_client_id:this.receiver.uuid,to_client_name:this.receiver.client_name,from_client_name:this.Permission.username,from_client_id:this.Permission.uuid,client_img:this.Permission.avatar_url,content:this.$refs.message.innerHTML.trim().replace("<div><br></div>",""),room_id:this.receiver.room_id,uuid:this.receiver.uuid,time:Object(f["g"])(Date.parse(new Date))};this.$refs.homeLayout.sendMessage(JSON.stringify(e)),this.messageLists.push(e),this.$store.commit("index/UPDATE_MUTATIONS",{messageLists:this.messageLists}),setTimeout((function(){Object(f["e"])(".message-content")}),100),this.$refs.message.innerHTML=""},replaceContent:function(e){return e.replace(new RegExp(/&lt;/g),"<").replace(new RegExp(/&gt;/g),">").replace(new RegExp(/&quot;/g),'"')}}},m=n("6b0d"),h=n.n(m);const g=h()(d,[["render",o],["__scopeId","data-v-624098cb"]]);t["default"]=g},"0cb2":function(e,t,n){var r=n("7b0b"),i=Math.floor,c="".replace,s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,a=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,o,u,l){var f=n+e.length,d=o.length,m=a;return void 0!==u&&(u=r(u),m=s),c.call(l,m,(function(r,c){var s;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(f);case"<":s=u[c.slice(1,-1)];break;default:var a=+c;if(0===a)return r;if(a>d){var l=i(a/10);return 0===l?r:l<=d?void 0===o[l-1]?c.charAt(1):o[l-1]+c.charAt(1):r}s=o[a-1]}return void 0===s?"":s}))}},"498a":function(e,t,n){"use strict";var r=n("23e7"),i=n("58a8").trim,c=n("c8d2");r({target:"String",proto:!0,forced:c("trim")},{trim:function(){return i(this)}})},"4d63":function(e,t,n){var r=n("83ab"),i=n("da84"),c=n("94ca"),s=n("7156"),a=n("9112"),o=n("9bf2").f,u=n("241c").f,l=n("44e7"),f=n("ad6d"),d=n("9f7f"),m=n("6eeb"),h=n("d039"),g=n("5135"),v=n("69f3").enforce,p=n("2626"),b=n("b622"),_=n("fce3"),x=n("107c"),O=b("match"),y=i.RegExp,S=y.prototype,j=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$=/a/g,k=/a/g,w=new y($)!==$,L=d.UNSUPPORTED_Y,M=r&&(!w||L||_||x||h((function(){return k[O]=!1,y($)!=$||y(k)==k||"/a/i"!=y($,"i")}))),N=function(e){for(var t,n=e.length,r=0,i="",c=!1;r<=n;r++)t=e.charAt(r),"\\"!==t?c||"."!==t?("["===t?c=!0:"]"===t&&(c=!1),i+=t):i+="[\\s\\S]":i+=t+e.charAt(++r);return i},T=function(e){for(var t,n=e.length,r=0,i="",c=[],s={},a=!1,o=!1,u=0,l="";r<=n;r++){if(t=e.charAt(r),"\\"===t)t+=e.charAt(++r);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:j.test(e.slice(r+1))&&(r+=2,o=!0),i+=t,u++;continue;case">"===t&&o:if(""===l||g(s,l))throw new SyntaxError("Invalid capture group name");s[l]=!0,c.push([l,u]),o=!1,l="";continue}o?l+=t:i+=t}return[i,c]};if(c("RegExp",M)){for(var E=function(e,t){var n,r,i,c,o,u,d,m=this instanceof E,h=l(e),g=void 0===t,p=[];if(!m&&h&&e.constructor===E&&g)return e;if(w?h&&!g&&(e=e.source):e instanceof E&&(g&&(t=f.call(e)),e=e.source),e=void 0===e?"":String(e),t=void 0===t?"":String(t),n=e,_&&"dotAll"in $&&(i=!!t&&t.indexOf("s")>-1,i&&(t=t.replace(/s/g,""))),r=t,L&&"sticky"in $&&(c=!!t&&t.indexOf("y")>-1,c&&(t=t.replace(/y/g,""))),x&&(o=T(e),e=o[0],p=o[1]),u=s(w?new y(e,t):y(e,t),m?this:S,E),(i||c||p.length)&&(d=v(u),i&&(d.dotAll=!0,d.raw=E(N(e),r)),c&&(d.sticky=!0),p.length&&(d.groups=p)),e!==n)try{a(u,"source",""===n?"(?:)":n)}catch(b){}return u},A=function(e){e in E||o(E,e,{configurable:!0,get:function(){return y[e]},set:function(t){y[e]=t}})},P=u(y),I=0;P.length>I;)A(P[I++]);S.constructor=E,E.prototype=S,m(i,"RegExp",E)}p("RegExp")},5319:function(e,t,n){"use strict";var r=n("d784"),i=n("d039"),c=n("825a"),s=n("50c4"),a=n("a691"),o=n("1d80"),u=n("8aa5"),l=n("0cb2"),f=n("14c3"),d=n("b622"),m=d("replace"),h=Math.max,g=Math.min,v=function(e){return void 0===e?e:String(e)},p=function(){return"$0"==="a".replace(/./,"$0")}(),b=function(){return!!/./[m]&&""===/./[m]("a","$0")}(),_=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));r("replace",(function(e,t,n){var r=b?"$":"$0";return[function(e,n){var r=o(this),i=void 0==e?void 0:e[m];return void 0!==i?i.call(e,r,n):t.call(String(r),e,n)},function(e,i){if("string"===typeof i&&-1===i.indexOf(r)&&-1===i.indexOf("$<")){var o=n(t,this,e,i);if(o.done)return o.value}var d=c(this),m=String(e),p="function"===typeof i;p||(i=String(i));var b=d.global;if(b){var _=d.unicode;d.lastIndex=0}var x=[];while(1){var O=f(d,m);if(null===O)break;if(x.push(O),!b)break;var y=String(O[0]);""===y&&(d.lastIndex=u(m,s(d.lastIndex),_))}for(var S="",j=0,$=0;$<x.length;$++){O=x[$];for(var k=String(O[0]),w=h(g(a(O.index),m.length),0),L=[],M=1;M<O.length;M++)L.push(v(O[M]));var N=O.groups;if(p){var T=[k].concat(L,w,m);void 0!==N&&T.push(N);var E=String(i.apply(void 0,T))}else E=l(k,m,w,L,N,i);w>=j&&(S+=m.slice(j,w)+E,j=w+k.length)}return S+m.slice(j)}]}),!_||!p||b)},c8d2:function(e,t,n){var r=n("d039"),i=n("5899"),c="​᠎";e.exports=function(e){return r((function(){return!!i[e]()||c[e]()!=c||i[e].name!==e}))}}}]);
//# sourceMappingURL=chunk-4cf1189e.314a861a.js.map