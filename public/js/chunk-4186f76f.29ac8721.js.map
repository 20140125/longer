{"version":3,"sources":["webpack:///./src/components/common/StatusRadio.vue","webpack:///./src/components/common/StatusRadio.vue?5e82","webpack:///./src/pages/users/Users.vue","webpack:///./src/components/users/user/Lists.vue","webpack:///./src/components/users/user/Lists.vue?2c5f","webpack:///./src/components/users/user/Dialog.vue","webpack:///./src/components/users/user/Dialog.vue?8002","webpack:///./src/pages/users/Users.vue?6f7b","webpack:///./src/components/mixins/toggle.js","webpack:///./src/components/users/user/Dialog.vue?2813"],"names":["icon","attr","model","status","circle","type","changeStatus","size","name","props","url","String","default","statusModel","Object","data","JSON","parse","stringify","this","1","2","watch","methods","$confirm","showClose","confirmButtonText","cancelButtonText","then","payload","id","act","$store","dispatch","setTimeout","$emit","catch","$message","info","render","__scopeId","loading","pagination","header","placeholder","username","clearable","searchUsers","plain","body","users-lists","usersLists","updatedUsers","ref","dialog","sync-visible","syncVisible","users-attr","usersAttr","re-form","reForm","form","getUsersLists","label","prop","width","show-tooltip-when-overflow","align","src","scope","row","avatar_url","alt","URL","status-model","Permission","auth","indexOf","components","StatusRadio","users","update","visible","title","show-close","close-on-click-modal","close-on-press-escape","center","localForm","label-position","label-width","rules","class","avatar-image","file-size","img-width","img-height","upload-controls","uploadSuccess","password","show-password","email","phone_number","role_id","filterable","role","index","key","role_name","value","active-color","inactive-color","active-value","inactive-value","submitForm","CommonUpload","SubmitButton","mixins","toggle","required","message","trigger","$nextTick","$refs","save","response","item","lists","UsersDialog","UsersLists","BaseLayout","page","limit","total","show_page","refresh","computed","state","mounted","currentPageChange","roleLists"],"mappings":"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","file":"js/chunk-4186f76f.29ac8721.js","sourcesContent":["<template>\r\n  <el-button :icon=\"attr['icon'][model.status]\" circle :type=\"attr['type'][model.status]\" @click=\"changeStatus\" size=\"medium\"></el-button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'StatusRadio',\r\n  props: {\r\n    /* 更新地址 */\r\n    url: {\r\n      type: String,\r\n      default: () => ''\r\n    },\r\n    /* 待更新的记录 */\r\n    statusModel: {\r\n      type: Object,\r\n      default: () => {\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      model: JSON.parse(JSON.stringify(this.statusModel)),\r\n      attr: {\r\n        icon: { 1: 'el-icon-check', 2: 'el-icon-close' },\r\n        type: { 1: 'success', 2: 'danger' }\r\n      }\r\n    };\r\n  },\r\n  watch: {\r\n    statusModel() {\r\n      this.model = JSON.parse(JSON.stringify(this.statusModel));\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * todo:状态修改\r\n     */\r\n    async changeStatus() {\r\n      this.$confirm('确认修改当前状态', { showClose: false, confirmButtonText: '确定', cancelButtonText: '取消', type: 'success' }).then(() => {\r\n        this.model.status = this.model.status === 1 ? 2 : 1;\r\n        let payload = { url: this.url, model: { id: this.model.id, status: this.model.status, act: 'status' } };\r\n        this.$store.dispatch('UPDATE_ACTIONS', payload).then(() => {\r\n          /* 更新成功 */\r\n          setTimeout(() => {\r\n            this.$emit('closeDialog');\r\n          }, 500);\r\n        });\r\n      }).catch(() => {\r\n        this.$message.info('取消修改');\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./StatusRadio.vue?vue&type=template&id=a3cc4b78&scoped=true\"\nimport script from \"./StatusRadio.vue?vue&type=script&lang=js\"\nexport * from \"./StatusRadio.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-a3cc4b78\"\n\nexport default script","<template>\r\n  <BaseLayout :loading=\"loading\" :pagination=\"pagination\">\r\n    <template #header>\r\n      <el-form-item>\r\n        <el-input placeholder=\"请输入用户名\" v-model=\"pagination.username\" clearable></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button icon=\"el-icon-search\" @click=\"searchUsers\" plain type=\"primary\">检索</el-button>\r\n      </el-form-item>\r\n    </template>\r\n    <template #body>\r\n      <UsersLists :users-lists=\"usersLists\" @updatedUsers=\"updatedUsers\" ref=\"usersLists\"></UsersLists>\r\n    </template>\r\n    <template #dialog>\r\n      <UsersDialog :sync-visible=\"syncVisible\" :users-attr=\"usersAttr\" :re-form=\"reForm\" :form=\"form\" @getUsersLists=\"getUsersLists\"></UsersDialog>\r\n    </template>\r\n  </BaseLayout>\r\n</template>\r\n\r\n<script>\r\nimport BaseLayout from '@/components/BaseLayout';\r\nimport UsersLists from '@/components/users/user/Lists';\r\nimport UsersDialog from '@/components/users/user/Dialog';\r\n\r\nexport default {\r\n  name: 'Users',\r\n  components: { UsersDialog, UsersLists, BaseLayout },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      pagination: { page: 1, limit: 15, total: 0, show_page: true, refresh: false, username: '' },\r\n      syncVisible: false,\r\n      reForm: 'created',\r\n      form: {},\r\n      usersAttr: {}\r\n    };\r\n  },\r\n  computed: {\r\n    usersLists() {\r\n      return this.$store.state.users.usersLists;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(async() => {\r\n      await this.getUsersLists(this.pagination);\r\n    });\r\n  },\r\n  methods: {\r\n    /**\r\n     * todo:用户搜索\r\n     * @return {Promise<boolean>}\r\n     */\r\n    async searchUsers() {\r\n      this.pagination.page = 1;\r\n      this.pagination.refresh = true;\r\n      await this.getUsersLists(this.pagination);\r\n    },\r\n    /**\r\n     * todo:获取管理员列表\r\n     * @param pagination\r\n     * @return {Promise<void>}\r\n     */\r\n    async getUsersLists(pagination) {\r\n      this.loading = true;\r\n      this.syncVisible = false;\r\n      await this.$store.dispatch('users/getUsersLists', pagination).then(() => {\r\n        this.loading = false;\r\n        this.pagination.total = this.$store.state.users.total;\r\n      });\r\n    },\r\n    /**\r\n     * todo:页面转换\r\n     * @param page\r\n     */\r\n    async currentPageChange(page) {\r\n      this.pagination.page = page;\r\n      await this.getUsersLists(this.pagination);\r\n    },\r\n    /**\r\n     * todo:修改管理员\r\n     * @param form\r\n     * @return {Promise<void>}\r\n     */\r\n    async updatedUsers(form) {\r\n      this.$store.dispatch('role/getRoleLists', { page: 1, limit: 20, refresh: false }).then(() => {\r\n        this.form = JSON.parse(JSON.stringify(form));\r\n        this.reForm = 'updated';\r\n        this.syncVisible = true;\r\n        this.usersAttr = { roleLists: this.$store.state.role.roleLists };\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<template>\n  <el-table :data=\"usersLists\">\n    <el-table-column label=\"#ID\" prop=\"id\" width=\"100px\"></el-table-column>\n    <el-table-column label=\"用户名\" prop=\"username\" width=\"150px\" :show-tooltip-when-overflow=\"true\"></el-table-column>\n    <el-table-column label=\"头像\" align=\"center\">\n      <template #default=\"scope\">\n        <el-avatar :src=\"scope.row.avatar_url\" :alt=\"scope.row.username\"></el-avatar>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"邮箱\" prop=\"email\" :show-tooltip-when-overflow=\"true\"></el-table-column>\n    <el-table-column label=\"手机号\" prop=\"phone_number\" :show-tooltip-when-overflow=\"true\"></el-table-column>\n    <el-table-column label=\"允许登录\" align=\"center\">\n      <template #default=\"scope\">\n        <StatusRadio :url=\"URL\" :status-model=\"scope.row\"></StatusRadio>\n      </template>\n    </el-table-column>\n    <el-table-column label=\"添加时间\" prop=\"created_at\" align=\"center\"></el-table-column>\n    <el-table-column label=\"修改时间\" prop=\"updated_at\" align=\"center\"></el-table-column>\n    <el-table-column label=\"操作\" align=\"right\">\n      <template #default=\"scope\">\n        <el-button v-if=\"Permission.auth.indexOf(URL) > -1\" plain size=\"mini\" icon=\"el-icon-edit\" type=\"primary\" @click=\"$emit('updatedUsers', scope.row)\">修改</el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n</template>\n\n<script>\nimport URLS from '@/api/urls';\nimport StatusRadio from '@/components/common/StatusRadio';\n\nexport default {\n  name: 'UsersLists',\n  components: { StatusRadio },\n  props: ['usersLists'],\n  data() {\n    return {\n      URL: URLS.users.update\n    };\n  }\n};\n</script>\n\n<style scoped>\n\n</style>\n","import { render } from \"./Lists.vue?vue&type=template&id=7bd8bf42&scoped=true\"\nimport script from \"./Lists.vue?vue&type=script&lang=js\"\nexport * from \"./Lists.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-7bd8bf42\"\n\nexport default script","<template>\n  <div id=\"users\">\n    <el-dialog v-model=\"visible\" :title=\"reForm === 'created' ? '添加管理员' : '修改管理员'\" :show-close=\"false\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" center>\n      <el-form :model=\"localForm\" :ref=\"reForm\" label-position=\"left\" label-width=\"100px\" :rules=\"rules\">\n        <el-form-item label=\"用户名：\" prop=\"username\">\n          <el-input v-model.trim=\"localForm.username\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"用户头像：\" prop=\"avatar_url\" class=\"avatar-url\">\n          <CommonUpload :avatar-image=\"{ username: localForm.username, avatar_url: localForm.avatar_url, size: 100 }\"\n                        :file-size=\"100\"\n                        :img-width=\"0\"\n                        :img-height=\"0\"\n                        :upload-controls=\"{ button_type: 'avatar', show_file_list: false, show_tips: false }\"\n                        :uploadSuccess=\"uploadSuccess\">\n          </CommonUpload>\n        </el-form-item>\n        <el-form-item label=\"登录密码：\" prop=\"password\">\n          <el-input v-model.trim=\"localForm.password\" show-password type=\"password\" placeholder=\"请输入登录密码\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱账号：\" prop=\"email\">\n          <el-input v-model=\"localForm.email\" type=\"email\" placeholder=\"请输入邮箱账号\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"手机号：\" prop=\"phone_number\">\n          <el-input v-model.number=\"localForm.phone_number\" placeholder=\"请输入手机号\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"用户角色：\" prop=\"role_id\">\n          <el-select v-model.number=\"localForm.role_id\" filterable placeholder=\"请选择用户角色\">\n            <el-option v-for=\"(role,index) in usersAttr['roleLists']\" :key=\"index\" :label=\"role.role_name\" :value=\"role.id\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"允许登录：\" class=\"is-required\">\n          <el-switch v-model.number=\"localForm.status\" active-color=\"#13ce66\" inactive-color=\"#ff4949\" :active-value=\"1\" :inactive-value=\"2\"></el-switch>\n        </el-form-item>\n        <SubmitButton :form=\"submitForm\" :reForm=\"reForm\" @closeDialog=\"$emit('getUsersLists', { page: 1, limit: 15, refresh: true, total: 0 })\"></SubmitButton>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport SubmitButton from '@/components/common/SubmitForm';\nimport URLS from '@/api/urls';\nimport CommonUpload from '@/components/common/CommonUpload';\nimport { toggle } from '@/components/mixins/toggle';\n\nexport default {\n  name: 'UsersDialog',\n  components: { CommonUpload, SubmitButton },\n  mixins: [toggle],\n  props: ['form', 'reForm', 'usersAttr'],\n  data() {\n    return {\n      localForm: this.form,\n      submitForm: {},\n      rules: {\n        username: [{ required: true, message: '请输入用户昵称', trigger: 'blur' }],\n        avatar_url: [{ required: true, message: '请上传用户头像', trigger: 'change' }],\n        email: [{ required: true, message: '请输入邮箱账号', trigger: 'blur' }],\n        password: [{ required: true, message: '请输入登录密码', trigger: 'blur' }],\n        phone_number: [{ required: true, message: '请输入手机号', trigger: 'blur' }],\n        role_id: [{ required: true, message: '请选择用户角色', trigger: 'change' }]\n      }\n    };\n  },\n  watch: {\n    form() {\n      this.localForm = this.form;\n      this.$nextTick(() => {\n        setTimeout(() => {\n          this.submitForm = { model: this.localForm, $refs: this.$refs, url: this.reForm === 'created' ? URLS.users.save : URLS.users.update };\n        }, 1000);\n      });\n    }\n  },\n  methods: {\n    /**\n     * todo:图片上传成功\n     * @param response\n     */\n    uploadSuccess(response) {\n      this.localForm.avatar_url = (((response || {}).item || {}).lists || {}).src || '';\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n#users {\n  .avatar-url {\n    display: flex;\n    align-items: center;\n    position: relative;\n\n    .el-form-item__content {\n      margin-left: 0 !important;\n    }\n  }\n}\n</style>\n","import { render } from \"./Dialog.vue?vue&type=template&id=f3d9fd3a\"\nimport script from \"./Dialog.vue?vue&type=script&lang=js\"\nexport * from \"./Dialog.vue?vue&type=script&lang=js\"\n\nimport \"./Dialog.vue?vue&type=style&index=0&id=f3d9fd3a&lang=less\"\nscript.render = render\n\nexport default script","import { render } from \"./Users.vue?vue&type=template&id=ab1f7e4a&scoped=true\"\nimport script from \"./Users.vue?vue&type=script&lang=js\"\nexport * from \"./Users.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-ab1f7e4a\"\n\nexport default script","export const toggle = {\r\n  props: ['syncVisible'],\r\n  data() {\r\n    return {\r\n      visible: this.syncVisible\r\n    };\r\n  },\r\n  watch: {\r\n    syncVisible() {\r\n      this.visible = this.syncVisible;\r\n    }\r\n  }\r\n};\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Dialog.vue?vue&type=style&index=0&id=f3d9fd3a&lang=less\""],"sourceRoot":""}