{"version":3,"sources":["webpack:///./src/components/home/Lists.vue","webpack:///./src/components/home/Lists.vue?b2ac","webpack:///./src/components/base/WebPush.vue","webpack:///./src/components/base/WebPush.vue?a8a1","webpack:///./src/pages/home/Home.vue","webpack:///./src/pages/home/Home.vue?8650","webpack:///./src/components/base/WebPush.vue?0861"],"names":["class","loadMore","item","index","key","preview-src-list","href","src","fit","style","width","name","props","__exports__","render","id","pushMessage","length","interval","arrow","direction","indicator-position","title","message","effect","show-icon","showIcon","closable","type","alertType","Boolean","default","showWeather","Number","String","computed","data","this","$store","state","configuration","notice","lists","JSON","stringify","Permission","weather","casts","timestamp","Date","parse","forEach","push","mounted","$nextTick","getConfiguration","getConnection","methods","SocketService","socket","transports","autoConnect","on","console","info","emit","uuid","response","$unread","disabled","see","commit","unread","xAxisData","day","seriesData","total","hotKeyWord","dispatch","time","username","error","keywords","body","show-weather","alert-type","load-more","components","Lists","HomeLayout","WebPush","pagination","page","limit","source","imageLists","beforeUnmount","window","removeEventListener","handleScroll","created","addEventListener","getImageLists","loading","$loading","lock","text","spinner","background","concat","close"],"mappings":"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","file":"js/chunk-5ec054ee.a0b70754.js","sourcesContent":["<template>\n  <div class=\"grid\">\n    <div v-for=\"(item, index) in loadMore\" :key=\"index\" class=\"grid-list\">\n      <div class=\"panel\">\n        <div class=\"card-img\">\n          <el-image\n            :preview-src-list=\"[item.href]\"\n            :src=\"item.href\"\n            fit=\"unset\"\n            style=\"width:100%;height:100%\">\n          </el-image>\n        </div>\n        <div class=\"card-num-view\">{{ item.width ? `${item.width}p` : '' }}</div>\n        <div class=\"card-bottom\">\n          <div class=\"card-title-view row\">\n            <div class=\"card-title\">\n              <span v-html=\"item.name\"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Lists',\n  props: ['loadMore']\n};\n</script>\n","import { render } from \"./Lists.vue?vue&type=template&id=dc38c620\"\nimport script from \"./Lists.vue?vue&type=script&lang=js\"\nexport * from \"./Lists.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/fanglong/Documents/vue-app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div id=\"webPush\">\n    <el-carousel\n      v-if=\"pushMessage.length > 0\"\n      :interval=\"interval\"\n      arrow=\"never\"\n      direction=\"vertical\"\n      indicator-position=\"none\">\n      <el-carousel-item v-for=\"(item,index) in pushMessage\" :key=\"index\">\n        <el-alert\n          :title=\"item.message\"\n          :effect=\"effect\"\n          :show-icon=\"showIcon\"\n          :closable=\"closable\"\n          :type=\"alertType\">\n        </el-alert>\n      </el-carousel-item>\n    </el-carousel>\n  </div>\n</template>\n\n<script>\n\nimport SocketIO from 'socket.io-client';\nimport { setTime } from '@/utils/func';\n\nexport default {\n  name: 'WebPush',\n  props: {\n    showIcon: {\n      type: Boolean,\n      default: () => true\n    },\n    closable: {\n      type: Boolean,\n      default: () => true\n    },\n    showWeather: {\n      type: Boolean,\n      default: () => true\n    },\n    interval: {\n      type: Number,\n      default: () => 2000\n    },\n    alertType: {\n      type: String,\n      default: () => 'success'\n    },\n    effect: {\n      type: String,\n      default: () => 'light'\n    }\n  },\n  computed: {\n    pushMessage() {\n      const data = this.$store.state.index.configuration.notice;\n      const lists = this.showWeather ? [{ message: JSON.stringify((this.Permission.weather || {}).casts || ''), timestamp: Date.parse(new Date()) / 1000 }] : [];\n      data.forEach((item, index) => {\n        lists.push({ message: item.message || item, timestamp: Date.parse(new Date()) / 1000 + index});\n      });\n      return lists;\n    }\n  },\n  mounted() {\n    this.$nextTick(async () => {\n      await this.getConfiguration();\n      if (this.Permission) {\n        this.getConnection();\n      }\n    });\n  },\n  methods: {\n    /**\n     * todo:获取推送链接\n     */\n    getConnection() {\n      const SocketService = SocketIO(this.Permission.socket, {\n        transports: ['websocket'],\n        autoConnect: true\n      });\n      /* todo:链接系统 */\n      SocketService.on('connect', () => {\n        console.info(`【登录系统】${setTime(Date.parse(new Date()))}`);\n        /* todo:用户登录 */\n        SocketService.emit('login', this.Permission.uuid);\n      });\n      /* todo:获取站内推送信息 */\n      SocketService.on('notice', (response) => {\n        if (response.length > 0) {\n          let $unread = 0;\n          response.forEach(item => {\n            item.disabled = (item.state === 'successfully' && item.see > 0);\n            if (!item.disabled) {\n              $unread += 1;\n            }\n          });\n          this.$store.commit('home/UPDATE_MUTATIONS', { notice: response, unread: $unread });\n        }\n      });\n      /* todo：获取图表信息 */\n      SocketService.on('charts', (response) => {\n        this.$store.commit('home/UPDATE_MUTATIONS', { xAxisData: response.day, seriesData: response.total });\n      });\n      /* todo:站内消息推送 */\n      SocketService.on('new_message', (message) => {\n        this.pushMessage.push({ message: message, timestamp: Date.parse(new Date()) / 1000 });\n        /* 推送消息到站内系统通知 */\n        this.$store.commit('index/UPDATE_MUTATIONS', { configuration: { notice: this.pushMessage, hotKeyWord: this.$store.state.index.configuration.hotKeyWord } });\n        /* 推送消息到活动窗口 */\n        this.$store.dispatch('chat/addClientLog', { time: setTime(Date.parse(new Date()), 'ch'), message: message, username: '系统公告' });\n      });\n      /* todo:链接断开 */\n      SocketService.on('disconnect', (error) => {\n        console.info(`【系统断开】${setTime(Date.parse(new Date()))}${JSON.stringify(error)}`);\n      });\n      /* todo:链接错误 */\n      SocketService.on('connect_error', (error) => {\n        console.error(`【系统链接错误】${setTime(Date.parse(new Date()))}${JSON.stringify(error)}`);\n      });\n    },\n    /**\n     * todo:获取系统通知\n     * @returns {Promise<void>}\n     */\n    async getConfiguration() {\n      await this.$store.dispatch('index/getConfiguration', { keywords: 'NOTICE', type: 'notice' });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n#webPush {\n  .el-carousel__container {\n    height: 40px !important;\n    margin: 0 5px;\n  }\n}\n</style>\n","import { render } from \"./WebPush.vue?vue&type=template&id=2557f1d6\"\nimport script from \"./WebPush.vue?vue&type=script&lang=js\"\nexport * from \"./WebPush.vue?vue&type=script&lang=js\"\n\nimport \"./WebPush.vue?vue&type=style&index=0&id=2557f1d6&lang=less\"\n\nimport exportComponent from \"/Users/fanglong/Documents/vue-app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <HomeLayout>\n    <template #body>\n      <!--站内通知-->\n      <WebPush\n        :closable=\"false\"\n        :interval=\"3000\"\n        :show-weather=\"false\"\n        alert-type=\"success\"\n        effect=\"dark\">\n      </WebPush>\n      <!--列表页-->\n      <Lists :load-more=\"loadMore\" style=\"padding-bottom: 80px;\"></Lists>\n    </template>\n  </HomeLayout>\n</template>\n\n<script>\nimport WebPush from '@/components/base/WebPush';\nimport HomeLayout from '@/components/HomeLayout';\nimport Lists from '@/components/home/Lists';\nimport { debounce, scrollBottom0 } from '@/utils/func';\n\nexport default {\n  name: 'HomeIndex',\n  components: { Lists, HomeLayout, WebPush },\n  data() {\n    return {\n      pagination: { page: 1, limit: 20, source: 'h5', type: 'index' },\n      loadMore: []\n    };\n  },\n  computed: {\n    /* 图片列表 */\n    imageLists() {\n      return this.$store.state.index.imageLists.index.lists;\n    },\n    /* 总记录数 */\n    total() {\n      return this.$store.state.index.imageLists.index.total;\n    }\n  },\n  /* 卸载节点 */\n  beforeUnmount() {\n    window.removeEventListener('scroll', this.handleScroll);\n  },\n  created() {\n    window.addEventListener('scroll', this.handleScroll);\n  },\n  mounted() {\n    this.$nextTick(async () => {\n      await this.getImageLists(this.pagination);\n    });\n  },\n  methods: {\n    /**\n     * todo:获取图片列表\n     * @param pagination\n     * @returns {Promise<*>}\n     */\n    async getImageLists(pagination) {\n      const loading = this.$loading({\n        lock: true,\n        text: '玩命加载中。。。',\n        spinner: 'el-icon-loading',\n        background: 'rgba(225, 225, 224, 0.8)'\n      });\n      await this.$store.dispatch('index/getImageLists', pagination);\n      this.loadMore = this.loadMore.concat(this.imageLists);\n      loading.close();\n    },\n    /**\n     * todo:下滑加载数据\n     * @returns {Promise<void>}\n     */\n    async handleScroll() {\n      if (scrollBottom0() && this.loadMore.length < this.total) {\n        this.pagination.page = this.pagination.page + 1;\n        debounce(await this.getImageLists(this.pagination), 500);\n      }\n    }\n  }\n};\n</script>\n","import { render } from \"./Home.vue?vue&type=template&id=62c600b1\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/fanglong/Documents/vue-app/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WebPush.vue?vue&type=style&index=0&id=2557f1d6&lang=less\""],"sourceRoot":""}