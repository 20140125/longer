(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af6dc8e0"],{4427:function(t,e,n){"use strict";var i=n("7a23");function o(t,e,n,o,r,s){var c=Object(i["resolveComponent"])("el-button");return r.ToUpBtn?(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:0,id:"toUp",icon:"el-icon-caret-top",round:"",size:"mini",type:"primary",onClick:s.toUp},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(n.buttonValue),1)]})),_:1},8,["onClick"])):Object(i["createCommentVNode"])("",!0)}n("a9e3");var r=n("6171"),s={name:"ToUp",props:{buttonValue:{type:String,default:function(){return"UP"}},speed:{type:Number,default:function(){return 8.888}},showTimes:{type:Number,default:function(){return 500}},interval:{type:Number,default:function(){return 50}}},data:function(){return{ToUpBtn:!1}},created:function(){var t=this;this.$nextTick((function(){window.addEventListener("scroll",(function(){var e=document.documentElement.scrollTop||document.body.scrollTop;t.ToUpBtn=e>=t.showTimes}))}))},methods:{toUp:function(){Object(r["f"])(this.speed,this.interval)}}},c=(n("933b"),n("6b0d")),a=n.n(c);const u=a()(s,[["render",o]]);e["a"]=u},"4e82":function(t,e,n){"use strict";var i=n("23e7"),o=n("1c0b"),r=n("7b0b"),s=n("50c4"),c=n("d039"),a=n("addb"),u=n("a640"),f=n("04d1"),l=n("d998"),h=n("2d00"),d=n("512c"),p=[],v=p.sort,g=c((function(){p.sort(void 0)})),b=c((function(){p.sort(null)})),w=u("sort"),m=!c((function(){if(h)return h<70;if(!(f&&f>3)){if(l)return!0;if(d)return d<603;var t,e,n,i,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)p.push({k:e+i,v:n})}for(p.sort((function(t,e){return e.v-t.v})),i=0;i<p.length;i++)e=p[i].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}})),k=g||!b||!w||!m,_=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:String(e)>String(n)?1:-1}};i({target:"Array",proto:!0,forced:k},{sort:function(t){void 0!==t&&o(t);var e=r(this);if(m)return void 0===t?v.call(e):v.call(e,t);var n,i,c=[],u=s(e.length);for(i=0;i<u;i++)i in e&&c.push(e[i]);c=a(c,_(t)),n=c.length,i=0;while(i<n)e[i]=c[i++];while(i<u)delete e[i++];return e}})},5255:function(t,e,n){},5804:function(t,e,n){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var i=n("1d80"),o=n("5899"),r="["+o+"]",s=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),a=function(t){return function(e){var n=String(i(e));return 1&t&&(n=n.replace(s,"")),2&t&&(n=n.replace(c,"")),n}};t.exports={start:a(1),end:a(2),trim:a(3)}},"933b":function(t,e,n){"use strict";n("5804")},a9e3:function(t,e,n){"use strict";var i=n("83ab"),o=n("da84"),r=n("94ca"),s=n("6eeb"),c=n("5135"),a=n("c6b6"),u=n("7156"),f=n("c04e"),l=n("d039"),h=n("7c73"),d=n("241c").f,p=n("06cf").f,v=n("9bf2").f,g=n("58a8").trim,b="Number",w=o[b],m=w.prototype,k=a(h(m))==b,_=function(t){var e,n,i,o,r,s,c,a,u=f(t,!1);if("string"==typeof u&&u.length>2)if(u=g(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+u}for(r=u.slice(2),s=r.length,c=0;c<s;c++)if(a=r.charCodeAt(c),a<48||a>o)return NaN;return parseInt(r,i)}return+u};if(r(b,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var y,N=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof N&&(k?l((function(){m.valueOf.call(n)})):a(n)!=b)?u(new w(_(e)),n,N):_(e)},O=i?d(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),S=0;O.length>S;S++)c(w,y=O[S])&&!c(N,y)&&v(N,y,p(w,y));N.prototype=m,m.constructor=N,s(o,b,N)}},b730:function(t,e,n){(function(e){
/**
 * @license
 *
 * Push v1.0.9
 * =========
 * A compact, cross-browser solution for the JavaScript Notifications API
 *
 * Credits
 * -------
 * Tsvetan Tsvetkov (ttsvetko)
 * Alex Gibson (alexgibson)
 *
 * License
 * -------
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2015-2017 Tyler Nickerson
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(e,n){t.exports=n()}(0,(function(){"use strict";var t={errors:{incompatible:"".concat("PushError:"," Push.js is incompatible with browser."),invalid_plugin:"".concat("PushError:"," plugin class missing from plugin manifest (invalid plugin). Please check the documentation."),invalid_title:"".concat("PushError:"," title of notification must be a string"),permission_denied:"".concat("PushError:"," permission request declined"),sw_notification_error:"".concat("PushError:"," could not show a ServiceWorker notification due to the following reason: "),sw_registration_error:"".concat("PushError:"," could not register the ServiceWorker due to the following reason: "),unknown_interface:"".concat("PushError:"," unable to create notification: unknown interface")}};function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var f=function(){function t(e){i(this,t),this._win=e,this.GRANTED="granted",this.DEFAULT="default",this.DENIED="denied",this._permissions=[this.GRANTED,this.DEFAULT,this.DENIED]}return r(t,[{key:"request",value:function(t,e){return arguments.length>0?this._requestWithCallback.apply(this,arguments):this._requestAsPromise()}},{key:"_requestWithCallback",value:function(t,e){var n,i=this,o=this.get(),r=!1,s=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i._win.Notification.permission;r||(r=!0,void 0===n&&i._win.webkitNotifications&&(n=i._win.webkitNotifications.checkPermission()),n===i.GRANTED||0===n?t&&t():e&&e())};o!==this.DEFAULT?s(o):this._win.webkitNotifications&&this._win.webkitNotifications.checkPermission?this._win.webkitNotifications.requestPermission(s):this._win.Notification&&this._win.Notification.requestPermission?(n=this._win.Notification.requestPermission(s))&&n.then&&n.then(s).catch((function(){e&&e()})):t&&t()}},{key:"_requestAsPromise",value:function(){var t=this,e=this.get(),n=e!==this.DEFAULT,i=this._win.Notification&&this._win.Notification.requestPermission,o=this._win.webkitNotifications&&this._win.webkitNotifications.checkPermission;return new Promise((function(r,s){var c,a=!1,u=function(e){a||(a=!0,function(e){return e===t.GRANTED||0===e}(e)?r():s())};n?u(e):o?t._win.webkitNotifications.requestPermission((function(t){u(t)})):i?(c=t._win.Notification.requestPermission(u))&&c.then&&c.then(u).catch(s):r()}))}},{key:"has",value:function(){return this.get()===this.GRANTED}},{key:"get",value:function(){return this._win.Notification&&this._win.Notification.permission?this._win.Notification.permission:this._win.webkitNotifications&&this._win.webkitNotifications.checkPermission?this._permissions[this._win.webkitNotifications.checkPermission()]:navigator.mozNotification?this.GRANTED:this._win.external&&this._win.external.msIsSiteMode?this._win.external.msIsSiteMode()?this.GRANTED:this.DEFAULT:this.GRANTED}}]),t}(),l=function(){function t(){i(this,t)}return r(t,null,[{key:"isUndefined",value:function(t){return void 0===t}},{key:"isNull",value:function(t){return null===obj}},{key:"isString",value:function(t){return"string"==typeof t}},{key:"isFunction",value:function(t){return t&&"[object Function]"==={}.toString.call(t)}},{key:"isObject",value:function(t){return"object"===n(t)}},{key:"objectMerge",value:function(t,e){for(var n in e)t.hasOwnProperty(n)&&this.isObject(t[n])&&this.isObject(e[n])?this.objectMerge(t[n],e[n]):t[n]=e[n]}}]),t}(),h=function t(e){i(this,t),this._win=e},d=function(t){function e(){return i(this,e),u(this,c(e).apply(this,arguments))}return s(e,h),r(e,[{key:"isSupported",value:function(){return void 0!==this._win.Notification}},{key:"create",value:function(t,e){return new this._win.Notification(t,{icon:l.isString(e.icon)||l.isUndefined(e.icon)||l.isNull(e.icon)?e.icon:e.icon.x32,body:e.body,tag:e.tag,requireInteraction:e.requireInteraction})}},{key:"close",value:function(t){t.close()}}]),e}(),p=function(e){function n(){return i(this,n),u(this,c(n).apply(this,arguments))}return s(n,h),r(n,[{key:"isSupported",value:function(){return void 0!==this._win.navigator&&void 0!==this._win.navigator.serviceWorker}},{key:"getFunctionBody",value:function(t){var e=t.toString().match(/function[^{]+{([\s\S]*)}$/);return null!=e&&e.length>1?e[1]:null}},{key:"create",value:function(e,n,i,o,r){var s=this;this._win.navigator.serviceWorker.register(o),this._win.navigator.serviceWorker.ready.then((function(o){var c={id:e,link:i.link,origin:document.location.href,onClick:l.isFunction(i.onClick)?s.getFunctionBody(i.onClick):"",onClose:l.isFunction(i.onClose)?s.getFunctionBody(i.onClose):""};void 0!==i.data&&null!==i.data&&(c=Object.assign(c,i.data)),o.showNotification(n,{icon:i.icon,body:i.body,vibrate:i.vibrate,tag:i.tag,data:c,requireInteraction:i.requireInteraction,silent:i.silent}).then((function(){o.getNotifications().then((function(t){o.active.postMessage(""),r(t)}))})).catch((function(e){throw new Error(t.errors.sw_notification_error+e.message)}))})).catch((function(e){throw new Error(t.errors.sw_registration_error+e.message)}))}},{key:"close",value:function(){}}]),n}(),v=function(t){function e(){return i(this,e),u(this,c(e).apply(this,arguments))}return s(e,h),r(e,[{key:"isSupported",value:function(){return void 0!==this._win.navigator.mozNotification}},{key:"create",value:function(t,e){var n=this._win.navigator.mozNotification.createNotification(t,e.body,e.icon);return n.show(),n}}]),e}(),g=function(t){function e(){return i(this,e),u(this,c(e).apply(this,arguments))}return s(e,h),r(e,[{key:"isSupported",value:function(){return void 0!==this._win.external&&void 0!==this._win.external.msIsSiteMode}},{key:"create",value:function(t,e){return this._win.external.msSiteModeClearIconOverlay(),this._win.external.msSiteModeSetIconOverlay(l.isString(e.icon)||l.isUndefined(e.icon)?e.icon:e.icon.x16,t),this._win.external.msSiteModeActivate(),null}},{key:"close",value:function(){this._win.external.msSiteModeClearIconOverlay()}}]),e}(),b=function(t){function e(){return i(this,e),u(this,c(e).apply(this,arguments))}return s(e,h),r(e,[{key:"isSupported",value:function(){return void 0!==this._win.webkitNotifications}},{key:"create",value:function(t,e){var n=this._win.webkitNotifications.createNotification(e.icon,t,e.body);return n.show(),n}},{key:"close",value:function(t){t.cancel()}}]),e}();return new(function(){function e(t){i(this,e),this._currentId=0,this._notifications={},this._win=t,this.Permission=new f(t),this._agents={desktop:new d(t),chrome:new p(t),firefox:new v(t),ms:new g(t),webkit:new b(t)},this._configuration={serviceWorker:"/serviceWorker.min.js",fallback:function(t){}}}return r(e,[{key:"_closeNotification",value:function(e){var n=!0,i=this._notifications[e];if(void 0!==i){if(n=this._removeNotification(e),this._agents.desktop.isSupported())this._agents.desktop.close(i);else if(this._agents.webkit.isSupported())this._agents.webkit.close(i);else{if(!this._agents.ms.isSupported())throw n=!1,new Error(t.errors.unknown_interface);this._agents.ms.close()}return n}return!1}},{key:"_addNotification",value:function(t){var e=this._currentId;return this._notifications[e]=t,this._currentId++,e}},{key:"_removeNotification",value:function(t){var e=!1;return this._notifications.hasOwnProperty(t)&&(delete this._notifications[t],e=!0),e}},{key:"_prepareNotification",value:function(t,e){var n,i=this;return n={get:function(){return i._notifications[t]},close:function(){i._closeNotification(t)}},e.timeout&&setTimeout((function(){n.close()}),e.timeout),n}},{key:"_serviceWorkerCallback",value:function(t,e,n){var i=this,o=this._addNotification(t[t.length-1]);navigator&&navigator.serviceWorker&&(navigator.serviceWorker.addEventListener("message",(function(t){var e=JSON.parse(t.data);"close"===e.action&&Number.isInteger(e.id)&&i._removeNotification(e.id)})),n(this._prepareNotification(o,e))),n(null)}},{key:"_createCallback",value:function(t,e,n){var i,o=this,r=null;if(e=e||{},i=function(t){o._removeNotification(t),l.isFunction(e.onClose)&&e.onClose.call(o,r)},this._agents.desktop.isSupported())try{r=this._agents.desktop.create(t,e)}catch(i){var s=this._currentId,c=this.config().serviceWorker;this._agents.chrome.isSupported()&&this._agents.chrome.create(s,t,e,c,(function(t){return o._serviceWorkerCallback(t,e,n)}))}else this._agents.webkit.isSupported()?r=this._agents.webkit.create(t,e):this._agents.firefox.isSupported()?this._agents.firefox.create(t,e):this._agents.ms.isSupported()?r=this._agents.ms.create(t,e):(e.title=t,this.config().fallback(e));if(null!==r){var a=this._addNotification(r),u=this._prepareNotification(a,e);l.isFunction(e.onShow)&&r.addEventListener("show",e.onShow),l.isFunction(e.onError)&&r.addEventListener("error",e.onError),l.isFunction(e.onClick)&&r.addEventListener("click",e.onClick),r.addEventListener("close",(function(){i(a)})),r.addEventListener("cancel",(function(){i(a)})),n(u)}n(null)}},{key:"create",value:function(e,n){var i,o=this;if(!l.isString(e))throw new Error(t.errors.invalid_title);return i=this.Permission.has()?function(t,i){try{o._createCallback(e,n,t)}catch(t){i(t)}}:function(i,r){o.Permission.request().then((function(){o._createCallback(e,n,i)})).catch((function(){r(t.errors.permission_denied)}))},new Promise(i)}},{key:"count",value:function(){var t,e=0;for(t in this._notifications)this._notifications.hasOwnProperty(t)&&e++;return e}},{key:"close",value:function(t){var e;for(e in this._notifications)if(this._notifications.hasOwnProperty(e)&&this._notifications[e].tag===t)return this._closeNotification(e)}},{key:"clear",value:function(){var t,e=!0;for(t in this._notifications)this._notifications.hasOwnProperty(t)&&(e=e&&this._closeNotification(t));return e}},{key:"supported",value:function(){var t=!1;for(var e in this._agents)this._agents.hasOwnProperty(e)&&(t=t||this._agents[e].isSupported());return t}},{key:"config",value:function(t){return(void 0!==t||null!==t&&l.isObject(t))&&l.objectMerge(this._configuration,t),this._configuration}},{key:"extend",value:function(e){var n,i={}.hasOwnProperty;if(!i.call(e,"plugin"))throw new Error(t.errors.invalid_plugin);for(var o in i.call(e,"config")&&l.isObject(e.config)&&null!==e.config&&this.config(e.config),n=new(0,e.plugin)(this.config()))i.call(n,o)&&l.isFunction(n[o])&&(this[o]=n[o])}}]),e}())("undefined"!=typeof window?window:e)}))}).call(this,n("c8ba"))},e40d:function(t,e,n){},eb00:function(t,e,n){"use strict";n("caad"),n("2532");var i=n("7a23"),o={class:"item"},r={class:"icon"};function s(t,e,n,s,c,a){var u=Object(i["resolveComponent"])("ToUp"),f=Object(i["resolveComponent"])("OauthLogin"),l=Object(i["resolveComponent"])("el-collapse-transition"),h=Object(i["resolveComponent"])("el-card"),d=Object(i["resolveDirective"])("water-mark");return Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createBlock"])(h,{shadow:"always"},{header:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(n.headerTitle),1)]})),default:Object(i["withCtx"])((function(){return["20003"!==a.error.code?Object(i["renderSlot"])(t.$slots,"body",{key:0}):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])("div",o,[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(a.menuLists,(function(t,e){return Object(i["openBlock"])(),Object(i["createBlock"])("div",{key:e,class:["".concat(t.highlight.includes(c.highlight)?"active":""),"item-list"],onClick:function(e){return a.goto(t)}},[Object(i["createVNode"])("i",{class:t.icon},null,2),Object(i["createVNode"])("div",r,Object(i["toDisplayString"])(t.label),1)],10,["onClick"])})),128))]),Object(i["createVNode"])(u),Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(f)]})),_:1})]})),_:3},512)),[[d,{text:c.text,textColor:"rgba(0, 0, 0, .2)",font:"20px consolas, sans-serif",row:150,col:150}]])}var c=n("1da1"),a=(n("96cf"),n("b0c0"),n("4e82"),n("159b"),n("a434"),n("b64b"),n("4427")),u={key:0,class:"oauth-login"},f={class:"oauth-login__list"};function l(t,e,n,o,r,s){var c=Object(i["resolveComponent"])("el-button");return"20003"===s.error.code?(Object(i["openBlock"])(),Object(i["createBlock"])("div",u,[Object(i["createVNode"])("div",f,[Object(i["createVNode"])("div",{class:"oauth-login__title",onClick:e[1]||(e[1]=function(){return s.closeShadow&&s.closeShadow.apply(s,arguments)})},"取消授权"),(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])((s.oAuthConfig||{}).children,(function(t,e){return Object(i["openBlock"])(),Object(i["createBlock"])("div",{class:"oauth-login__item",key:e},[Object(i["createVNode"])(c,{size:"mini",type:"primary",plain:"",onClick:function(e){return s.loginSYS(t)},style:{"min-width":"100px"}},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.name.toUpperCase()),1)]})),_:2},1032,["onClick"])])})),128))])])):Object(i["createCommentVNode"])("",!0)}n("99af");var h={name:"OauthLogin",computed:{oAuthConfig:function(){return this.$store.state.login.oauthConfig},error:function(){return this.$store.state.errorInfo}},mounted:function(){var t=this;this.$nextTick(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getOAuthConfig();case 2:case"end":return e.stop()}}),e)}))))},methods:{closeShadow:function(){this.$store.commit("UPDATE_MUTATIONS",{errorInfo:{code:"40001",message:"Token Is Not Provided"}})},getOAuthConfig:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("login/getOauthConfig",{name:"Oauth",refresh:!1});case 2:case"end":return e.stop()}}),e)})))()},loginSYS:function(t){window.location.href="".concat(t.value,"/").concat(Date.parse(new Date))}}},d=(n("feee"),n("6b0d")),p=n.n(d);const v=p()(h,[["render",l]]);var g=v,b=n("6171"),w=n("b730"),m=n.n(w),k={name:"HomeLayout",components:{ToUp:a["a"],OauthLogin:g},props:{headerTitle:{type:String,default:function(){return"魔盒逗图"}},connectWebSocket:{type:Boolean,default:function(){return!1}}},data:function(){return{highlight:this.$route.name,text:this.$store.state.baseLayout.username}},computed:{menuLists:function(){return this.$store.state.index.menuLists},webSocketServer:function(){return new WebSocket(this.Permission.websocket)},error:function(){return this.$store.state.errorInfo},receiver:function(){return this.$store.state.index.receiver},messageLists:function(){return JSON.parse(JSON.stringify(this.$store.state.index.messageLists))}},mounted:function(){var t=this;this.$nextTick(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.Permission||!t.connectWebSocket){e.next=3;break}return e.next=3,t.getConnection();case 3:case"end":return e.stop()}}),e)}))))},methods:{getConnection:function(){var t=this;this.webSocketServer.addEventListener("open",(function(){var e={type:"login",from_client_id:t.Permission.uuid,client_name:t.Permission.username,room_id:t.Permission.room_id,client_img:t.Permission.avatar_url,uuid:t.Permission.uuid};t.webSocketServer.send(JSON.stringify(e))})),this.webSocketServer.addEventListener("message",(function(e){var n=JSON.parse(e.data);switch(n.type){case"ping":t.webSocketServer.send('{type:"ping"}');break;case"login":var i=n.client_lists||[],o=[],r=[],s=[],c={};for(var a in i)i[a].id===t.$route.params.id&&(c=i[a]),o.indexOf(i[a].char)<0&&o.push(i[a].char);for(var u in o.sort(),o){var f=[];for(var l in i)o[u]===i[l].char&&f.push(i[l]);r[u]=f}o.unshift("↑"),r.forEach((function(t){t.forEach((function(e,n){e.online&&(s.push(e),t.splice(n,1))}))})),s.sort((function(t,e){return t.char>e.char?1:-1})),r.unshift(s),0===Object.keys(t.$store.state.index.receiver).length&&t.$store.commit("index/UPDATE_MUTATIONS",{chatBody:{userLists:r,indexLists:o},userLists:i,receiver:c});break;case"say":n.to_client_id===t.Permission.uuid&&(t.messageLists.push(n),t.$store.commit("index/UPDATE_MUTATIONS",{messageLists:t.messageLists}),setTimeout((function(){Object(b["e"])(".message-content")}),100),t.pushMessage(n.content));break}})),this.webSocketServer.addEventListener("close",(function(e){t.getConnection(),console.error("链接被关闭：".concat(JSON.stringify(e)))})),this.webSocketServer.addEventListener("error",(function(t){console.error("链接异常：".concat(JSON.stringify(t)))}))},sendMessage:function(t){try{this.webSocketServer.send(t)}catch(e){console.error(e)}},pushMessage:function(t){m.a.create("你有未读消息",{body:t,requireInteraction:!0,icon:"https://www.fanglonger.com/favicon.ico",timeout:6e4})},goto:function(t){var e=this.$loading({lock:!0,text:"",spinner:"el-icon-loading",background:"rgba(225, 225, 224, 0.8)"});this.$router.push({path:t.path}),setTimeout((function(){e.close()}),"/"===t.path?0:500)}}};n("f691");const _=p()(k,[["render",s]]);e["a"]=_},f691:function(t,e,n){"use strict";n("e40d")},feee:function(t,e,n){"use strict";n("5255")}}]);
//# sourceMappingURL=chunk-af6dc8e0.f3f3f40e.js.map