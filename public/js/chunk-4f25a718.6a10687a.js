(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f25a718"],{"0ebd":function(e,t,n){},2824:function(e,t,n){"use strict";var o=n("7a23"),r={key:0,class:"pagination"};function c(e,t,n,c,a,i){var l=Object(o["resolveComponent"])("el-form"),s=Object(o["resolveComponent"])("el-pagination"),u=Object(o["resolveComponent"])("el-main"),d=Object(o["resolveComponent"])("el-skeleton");return Object(o["openBlock"])(),Object(o["createBlock"])(d,{rows:5,animated:"",loading:n.loading},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{inline:!0,class:"form"},{default:Object(o["withCtx"])((function(){return[Object(o["renderSlot"])(e.$slots,"header")]})),_:3}),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["renderSlot"])(e.$slots,"body"),a.T_pagination.show_page?(Object(o["openBlock"])(),Object(o["createBlock"])("div",r,[Object(o["createVNode"])(s,{onCurrentChange:i.currentChange,"page-size":a.T_pagination.limit,layout:"total, prev, pager, next",total:a.T_pagination.total,"current-page":a.T_pagination.page},null,8,["onCurrentChange","page-size","total","current-page"])])):Object(o["createCommentVNode"])("",!0)]})),_:3}),Object(o["renderSlot"])(e.$slots,"dialog")]})),_:3},8,["loading"])}var a={name:"BaseLayout",props:{loading:{type:Boolean,default:function(){return!1}},pagination:{type:Object,default:function(){}}},watch:{pagination:function(){this.T_pagination=this.pagination}},data:function(){return{T_pagination:this.pagination||{limit:10,page:1,total:0,show_page:!1}}},methods:{currentChange:function(e){this.$parent.currentPageChange(e)}}},i=(n("ec59"),n("d959")),l=n.n(i);const s=l()(a,[["render",c]]);t["a"]=s},"2ed6":function(e,t,n){"use strict";var o=n("7a23"),r=Object(o["withScopeId"])("data-v-098dc5a8"),c=r((function(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createBlock"])(i,{icon:c.attr["icon"][c.model.status],circle:"",plain:"",type:c.attr["type"][c.model.status],onClick:a.changeStatus,size:"medium"},null,8,["icon","type","onClick"])})),a=n("1da1"),i=(n("96cf"),{name:"StatusRadio",props:{url:{type:String,default:function(){return""}},statusModel:{type:Object,default:function(){}}},data:function(){return{model:JSON.parse(JSON.stringify(this.statusModel)),attr:{icon:{1:"el-icon-check",2:"el-icon-close"},type:{1:"success",2:"danger"}}}},watch:{statusModel:function(){this.model=JSON.parse(JSON.stringify(this.statusModel))}},methods:{changeStatus:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$confirm("确认修改当前状态",{showClose:!1,confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){e.model.status=1===e.model.status?2:1;var t={url:e.url,model:{id:e.model.id,status:e.model.status,act:"status"}};e.$store.dispatch("UPDATE_ACTIONS",t).then((function(){setTimeout((function(){e.$emit("closeDialog")}),500)}))})).catch((function(){e.$message.info("取消修改")}));case 1:case"end":return t.stop()}}),t)})))()}}}),l=n("d959"),s=n.n(l);const u=s()(i,[["render",c],["__scopeId","data-v-098dc5a8"]]);t["a"]=u},"324d":function(e,t,n){"use strict";n("72d8")},"58ea":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={props:["syncVisible"],data:function(){return{visible:this.syncVisible}},watch:{syncVisible:function(){this.visible=this.syncVisible}}}},"72d8":function(e,t,n){},c827:function(e,t,n){"use strict";var o=n("7a23"),r=Object(o["withScopeId"])("data-v-60a89228"),c=r((function(e,t,n,c,a,i){var l=Object(o["resolveComponent"])("el-button"),s=Object(o["resolveComponent"])("el-main");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{style:{"text-align":"center"}},{default:r((function(){return[Object(o["createVNode"])(l,{type:"primary",size:"medium",plain:"",onClick:i.saveForm},{default:r((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.confirmButton||"确定"),1)]})),_:1},8,["onClick"]),Object(o["createVNode"])(l,{type:"default",size:"medium",onClick:t[1]||(t[1]=function(t){return e.$emit("closeDialog")}),plain:""},{default:r((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.cancelButton||"取消"),1)]})),_:1})]})),_:1})})),a=n("1da1"),i=(n("96cf"),{name:"SubmitButton",props:["confirmButton","cancelButton","form","reForm"],methods:{saveForm:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.form.$refs[e.reForm].validate((function(t){if(!t)return!1;e.$store.dispatch("UPDATE_ACTIONS",e.form).then((function(){setTimeout((function(){e.$emit("closeDialog")}),500)}))}));case 2:case"end":return t.stop()}}),t)})))()}}}),l=n("d959"),s=n.n(l);const u=s()(i,[["render",c],["__scopeId","data-v-60a89228"]]);t["a"]=u},e624:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=Object(o["withScopeId"])("data-v-18107b16");Object(o["pushScopeId"])("data-v-18107b16");var c=Object(o["createTextVNode"])(" 新增 ");Object(o["popScopeId"])();var a=r((function(e,t,n,a,i,l){var s=Object(o["resolveComponent"])("el-button"),u=Object(o["resolveComponent"])("el-form-item"),d=Object(o["resolveComponent"])("SystemConfigLists"),m=Object(o["resolveComponent"])("SystemConfigDialog"),f=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(f,{loading:i.loading,pagination:i.pagination},{header:r((function(){return[Object(o["createVNode"])(u,null,{default:r((function(){return[e.Permission.auth.indexOf(i.savePermission)>-1?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,type:"primary",plain:"",size:"mini",onClick:l.addConfig,icon:"el-icon-plus"},{default:r((function(){return[c]})),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),body:r((function(){return[Object(o["createVNode"])(d,{"config-lists":l.configLists,onUpdateConfig:l.updateConfig},null,8,["config-lists","onUpdateConfig"])]})),dialog:r((function(){return[Object(o["createVNode"])(m,{"sync-visible":i.syncVisible,"re-form":i.reForm,form:i.form,onCurrentPageChange:l.currentPageChange},null,8,["sync-visible","re-form","form","onCurrentPageChange"])]})),_:1},8,["loading","pagination"])})),i=n("1da1"),l=(n("96cf"),n("2824")),s=Object(o["withScopeId"])("data-v-1662c68a");Object(o["pushScopeId"])("data-v-1662c68a");var u=Object(o["createTextVNode"])(" 编辑 ");Object(o["popScopeId"])();var d=s((function(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("el-table-column"),l=Object(o["resolveComponent"])("StatusRadio"),d=Object(o["resolveComponent"])("el-button"),m=Object(o["resolveComponent"])("el-input"),f=Object(o["resolveComponent"])("el-table");return Object(o["openBlock"])(),Object(o["createBlock"])(f,{data:n.configLists,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:s((function(){return[Object(o["createVNode"])(i,{label:"#ID",prop:"id"}),Object(o["createVNode"])(i,{label:"配置名称",prop:"name"}),Object(o["createVNode"])(i,{label:"配置状态"},{default:s((function(t){return[t.row.id<1e3&&e.Permission.auth.indexOf(c.URL)>-1?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,url:c.URL,"status-model":t.row},null,8,["url","status-model"])):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,icon:["el-icon-check","el-icon-close"][t.row.status-1],circle:"",plain:"",type:["primary","danger"][t.row.status-1],size:"medium"},null,8,["icon","type"]))]})),_:1}),Object(o["createVNode"])(i,{label:"创建时间",prop:"created_at"}),Object(o["createVNode"])(i,{label:"更新时间",prop:"updated_at"}),Object(o["createVNode"])(i,{align:"right"},{header:s((function(){return[Object(o["createVNode"])(m,{placeholder:"请输入关键词搜索","suffix-icon":"el-icon-search"})]})),default:s((function(t){return[t.row.id<100&&e.Permission.auth.indexOf(c.URL)>-1?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,type:"primary",icon:"el-icon-edit",plain:"",size:"mini",onClick:function(n){return e.$emit("updateConfig",t.row)}},{default:s((function(){return[u]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["data"])})),m=n("2ed6"),f=n("4f8d"),p={name:"SystemConfigLists",components:{StatusRadio:m["a"]},props:["configLists"],data:function(){return{URL:f["a"].config.update}}},b=n("d959"),O=n.n(b);const g=O()(p,[["render",d],["__scopeId","data-v-1662c68a"]]);var h=g,j=(n("b0c0"),{id:"system"}),v={class:"el-form-item is-required children"},C=Object(o["createVNode"])("label",{class:"el-form-item__label"},"配置属性：",-1),V={class:"el-form-item__content"},N={class:"el-form-item"},_=Object(o["createVNode"])("label",{class:"el-form-item__label"},"PID：",-1),y={class:"el-form-item__content"},k={class:"el-form-item"},w=Object(o["createVNode"])("label",{class:"el-form-item__label"},"KEY：",-1),B={class:"el-form-item__content"},S={class:"el-form-item"},x=Object(o["createVNode"])("label",{class:"el-form-item__label"},"VALUE：",-1),F={class:"el-form-item__content"},T={class:"el-form-item"},L=Object(o["createVNode"])("label",{class:"el-form-item__label"},"ID：",-1),U={class:"el-form-item__content"},$={class:"el-form-item"},R=Object(o["createVNode"])("label",{class:"el-form-item__label"},"STATUS：",-1),I={class:"el-form-item__content"},D={class:"el-form-item"},P=Object(o["createVNode"])("label",{class:"el-form-item__label"},null,-1),z={class:"el-form-item__content"},M=Object(o["createTextVNode"])(" 移除 "),J=Object(o["createTextVNode"])(" 新增 ");function E(e,t,n,r,c,a){var i=Object(o["resolveComponent"])("el-input"),l=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-switch"),u=Object(o["resolveComponent"])("el-button"),d=Object(o["resolveComponent"])("SubmitButton"),m=Object(o["resolveComponent"])("el-form"),f=Object(o["resolveComponent"])("el-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",j,[Object(o["createVNode"])(f,{modelValue:e.visible,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.visible=t}),title:"created"===n.reForm?"添加系统配置":"修改系统","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,center:""},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{model:c.localForm,ref:n.reForm,"label-position":"left","label-width":"100px",rules:c.rules},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{label:"配置名称：",prop:"name"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{placeholder:"请输入",modelValue:c.localForm.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.localForm.name=e}),modelModifiers:{trim:!0}},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{label:"配置状态：",prop:"status"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:c.localForm.status,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.localForm.status=e}),modelModifiers:{number:!0},"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":2},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(l,{prop:"children"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(c.localForm.children,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:t,class:"config"},[Object(o["createVNode"])("div",v,[C,Object(o["createVNode"])("div",V,[Object(o["createVNode"])("div",N,[_,Object(o["createVNode"])("div",y,[Object(o["createVNode"])("span",{innerHTML:e.pid},null,8,["innerHTML"])])]),Object(o["createVNode"])("div",k,[w,Object(o["createVNode"])("div",B,[Object(o["createVNode"])(i,{placeholder:"请输入",modelValue:e.name,"onUpdate:modelValue":function(t){return e.name=t},modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])])]),Object(o["createVNode"])("div",S,[x,Object(o["createVNode"])("div",F,[Object(o["createVNode"])(i,{placeholder:"请输入对应的VALUE，用逗号间隔",type:"textarea",resize:"none",autosize:{minRows:4},modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])])]),Object(o["createVNode"])("div",T,[L,Object(o["createVNode"])("div",U,[Object(o["createVNode"])(i,{placeholder:"请输入",modelValue:e.id,"onUpdate:modelValue":function(t){return e.id=t},modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])])]),Object(o["createVNode"])("div",$,[R,Object(o["createVNode"])("div",I,[Object(o["createVNode"])(s,{modelValue:e.status,"onUpdate:modelValue":function(t){return e.status=t},modelModifiers:{number:!0},"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":2},null,8,["modelValue","onUpdate:modelValue"])])]),Object(o["createVNode"])("div",D,[P,Object(o["createVNode"])("div",z,[c.localForm.children.length>1?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,type:"danger",size:"mini",plain:"",icon:"el-icon-delete",onClick:function(e){return a.deleteChildren(c.localForm.children,t)}},{default:Object(o["withCtx"])((function(){return[M]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0)])])])])])})),128))]})),_:1}),Object(o["createVNode"])(u,{type:"primary",plain:"",size:"mini",icon:"el-icon-plus",onClick:t[3]||(t[3]=function(e){return a.addChildren(c.localForm.children)})},{default:Object(o["withCtx"])((function(){return[J]})),_:1}),Object(o["createVNode"])(d,{form:c.submitForm,reForm:n.reForm,onCloseDialog:t[4]||(t[4]=function(t){return e.$emit("currentPageChange",1)})},null,8,["form","reForm"])]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","title"])])}n("a434");var A=n("c827"),q=(n("159b"),function(e,t,n){try{var o=0;t.forEach((function(e){e.value&&e.name||(o+=1)})),o>0&&n(new Error("键值对不能为空")),n()}catch(r){n(new Error("配置属性错误"))}}),H={checkConfigChildren:q},K=n("58ea"),Y={name:"SystemConfigDialog",components:{SubmitButton:A["a"]},props:["form","reForm"],mixins:[K["a"]],data:function(){return{localForm:this.form,submitForm:{},rules:{name:[{required:!0,message:"请输入配置名称",trigger:"blur"}],status:[{required:!0,message:"请选择配置状态",trigger:"change"}],children:[{required:!0,message:"请输入配置属性",trigger:"blur",type:"array"},{validator:H.checkConfigChildren,trigger:"blur"}]}}},watch:{form:function(){var e=this;this.localForm=this.form,this.$nextTick((function(){setTimeout((function(){e.submitForm={model:e.localForm,$refs:e.$refs,url:"created"===e.reForm?f["a"].config.save:f["a"].config.update}}),1e3)}))}},methods:{addChildren:function(e){var t=JSON.parse(JSON.stringify(e));t.push({name:"",value:"",status:1,pid:this.localForm.children[this.localForm.children.length-1].pid,id:this.localForm.children[this.localForm.children.length-1].id+1}),this.localForm.children=t},deleteChildren:function(e,t){e.length>1&&e.splice(t,1)}}};n("324d");const G=O()(Y,[["render",E]]);var Q=G,W={name:"SystemConfig",components:{SystemConfigDialog:Q,SystemConfigLists:h,BaseLayout:l["a"]},computed:{configLists:function(){return this.$store.state.config.configLists}},data:function(){return{loading:!0,pagination:{page:1,limit:15,total:0,show_page:!0,refresh:!1},syncVisible:!1,reForm:"created",form:{},savePermission:f["a"].config.save}},mounted:function(){var e=this;this.$nextTick(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getConfigLists(e.pagination);case 2:case"end":return t.stop()}}),t)}))))},methods:{getConfigLists:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.syncVisible=!1,t.loading=!0,n.next=4,t.$store.dispatch("config/getConfigLists",e).then((function(){t.pagination.total=t.$store.state.config.total,t.loading=!1}));case 4:case"end":return n.stop()}}),n)})))()},currentPageChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.pagination.page=e,n.next=3,t.getConfigLists(t.pagination);case 3:case"end":return n.stop()}}),n)})))()},addConfig:function(){this.syncVisible=!0,this.form={name:"",children:[{name:"",value:"",status:1,pid:this.pagination.total+1,id:1e3*(this.pagination.total+1)}],status:1},this.reForm="created"},updateConfig:function(e){this.syncVisible=!0,this.form=JSON.parse(JSON.stringify(e)),this.reForm="updated"}}};const X=O()(W,[["render",a],["__scopeId","data-v-18107b16"]]);t["default"]=X},ec59:function(e,t,n){"use strict";n("0ebd")}}]);
//# sourceMappingURL=chunk-4f25a718.6a10687a.js.map