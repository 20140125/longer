(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28a5e419"],{"02dd":function(e,t,n){"use strict";n("4972")},"0925":function(e,t,n){"use strict";n("73fe")},4427:function(e,t,n){"use strict";var r=n("7a23");function o(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("el-button");return i.ToUpBtn?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0,id:"toUp",icon:"el-icon-caret-top",round:"",size:"mini",type:"primary",onClick:c.toUp},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(n.buttonValue),1)]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0)}n("a9e3");var i=n("6171"),c={name:"ToUp",props:{buttonValue:{type:String,default:function(){return"UP"}},speed:{type:Number,default:function(){return 8.888}},showTimes:{type:Number,default:function(){return 500}},interval:{type:Number,default:function(){return 50}}},data:function(){return{ToUpBtn:!1}},created:function(){var e=this;this.$nextTick((function(){window.addEventListener("scroll",(function(){var t=document.documentElement.scrollTop||document.body.scrollTop;e.ToUpBtn=t>=e.showTimes}))}))},methods:{toUp:function(){Object(i["d"])(this.speed,this.interval)}}},s=(n("933b"),n("d959")),a=n.n(s);const u=a()(c,[["render",o]]);t["a"]=u},4972:function(e,t,n){},"4e82":function(e,t,n){"use strict";var r=n("23e7"),o=n("1c0b"),i=n("7b0b"),c=n("50c4"),s=n("d039"),a=n("addb"),u=n("a640"),f=n("04d1"),l=n("d998"),d=n("2d00"),h=n("512c"),p=[],m=p.sort,b=s((function(){p.sort(void 0)})),g=s((function(){p.sort(null)})),v=u("sort"),O=!s((function(){if(d)return d<70;if(!(f&&f>3)){if(l)return!0;if(h)return h<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)p.push({k:t+r,v:n})}for(p.sort((function(e,t){return t.v-e.v})),r=0;r<p.length;r++)t=p[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),w=b||!g||!v||!O,k=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:String(t)>String(n)?1:-1}};r({target:"Array",proto:!0,forced:w},{sort:function(e){void 0!==e&&o(e);var t=i(this);if(O)return void 0===e?m.call(t):m.call(t,e);var n,r,s=[],u=c(t.length);for(r=0;r<u;r++)r in t&&s.push(t[r]);s=a(s,k(e)),n=s.length,r=0;while(r<n)t[r]=s[r++];while(r<u)delete t[r++];return t}})},"502d":function(e,t,n){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),o=n("5899"),i="["+o+"]",c=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),a=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(c,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:a(1),end:a(2),trim:a(3)}},"73fe":function(e,t,n){},"933b":function(e,t,n){"use strict";n("502d")},a9e3:function(e,t,n){"use strict";var r=n("83ab"),o=n("da84"),i=n("94ca"),c=n("6eeb"),s=n("5135"),a=n("c6b6"),u=n("7156"),f=n("c04e"),l=n("d039"),d=n("7c73"),h=n("241c").f,p=n("06cf").f,m=n("9bf2").f,b=n("58a8").trim,g="Number",v=o[g],O=v.prototype,w=a(d(O))==g,k=function(e){var t,n,r,o,i,c,s,a,u=f(e,!1);if("string"==typeof u&&u.length>2)if(u=b(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(i=u.slice(2),c=i.length,s=0;s<c;s++)if(a=i.charCodeAt(s),a<48||a>o)return NaN;return parseInt(i,r)}return+u};if(i(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var S,j=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof j&&(w?l((function(){O.valueOf.call(n)})):a(n)!=g)?u(new v(k(t)),n,j):k(t)},N=r?h(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),y=0;N.length>y;y++)s(v,S=N[y])&&!s(j,S)&&m(j,S,p(v,S));j.prototype=O,O.constructor=j,c(o,g,j)}},eb00:function(e,t,n){"use strict";n("caad"),n("2532");var r=n("7a23"),o={class:"item"},i={class:"icon"};function c(e,t,n,c,s,a){var u=Object(r["resolveComponent"])("ToUp"),f=Object(r["resolveComponent"])("OauthLogin"),l=Object(r["resolveComponent"])("el-card"),d=Object(r["resolveDirective"])("water-mark");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])(l,{shadow:"always"},{header:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(n.headerTitle),1)]})),default:Object(r["withCtx"])((function(){return[Object(r["renderSlot"])(e.$slots,"body"),Object(r["createVNode"])("div",o,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(a.menuLists,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:t,class:["".concat(e.highlight.includes(s.highlight)?"active":""),"item-list"],onClick:function(t){return a.goto(e)}},[Object(r["createVNode"])("i",{class:e.icon},null,2),Object(r["createVNode"])("div",i,Object(r["toDisplayString"])(e.label),1)],10,["onClick"])})),128))]),Object(r["createVNode"])(u),Object(r["createVNode"])(f,{showOAuth:"20000"!==a.error.code},null,8,["showOAuth"])]})),_:3},512)),[[d,{text:s.text,textColor:"rgba(0, 0, 0, .2)",font:"20px consolas, sans-serif",row:150,col:150}]])}var s=n("1da1"),a=(n("96cf"),n("b0c0"),n("4e82"),n("159b"),n("a434"),n("4427")),u={key:0,class:"oauth-login"},f={class:"oauth-login__list"};function l(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("el-button");return i.showShadow?(Object(r["openBlock"])(),Object(r["createBlock"])("div",u,[Object(r["createVNode"])("div",f,[Object(r["createVNode"])("div",{class:"oauth-login__title",onClick:t[1]||(t[1]=function(){return c.closeShadow&&c.closeShadow.apply(c,arguments)})},"授权登录"),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])((c.oAuthConfig||{}).children,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"oauth-login__item",key:t},[Object(r["createVNode"])(s,{size:"mini",type:"primary",onClick:function(t){return c.loginSYS(e)},style:{"min-width":"100px"}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name.toUpperCase()),1)]})),_:2},1032,["onClick"])])})),128))])])):Object(r["createCommentVNode"])("",!0)}n("99af");var d={name:"OauthLogin",props:{showOAuth:{type:Boolean,default:function(){return!1}}},data:function(){return{showShadow:!1}},watch:{showOAuth:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.showOAuth){t.next=3;break}return t.next=3,e.$confirm(e.$store.state.errorInfo.message,e.$store.state.errorInfo.code,{type:"success",showClose:!1}).then((function(){e.$message({message:"单击授权登录按钮可关闭浮层",type:"success",offset:350,dangerouslyUseHTMLString:!0,duration:1e3}),e.showShadow=!0})).catch((function(){e.showShadow=!1}));case 3:case"end":return t.stop()}}),t)})))()}},computed:{oAuthConfig:function(){return this.$store.state.login.oauthConfig}},mounted:function(){var e=this;this.$nextTick(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getOAuthConfig();case 2:case"end":return t.stop()}}),t)}))))},methods:{closeShadow:function(){this.showShadow=!1,this.$store.commit("UPDATE_MUTATIONS",{errorInfo:{code:"20000",message:"Cancelled Login System"}})},getOAuthConfig:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("login/getOauthConfig",{name:"Oauth",refresh:!1});case 2:case"end":return t.stop()}}),t)})))()},loginSYS:function(e){window.location.href="".concat(e.value,"/").concat(Date.parse(new Date))}}},h=(n("02dd"),n("d959")),p=n.n(h);const m=p()(d,[["render",l]]);var b=m,g=n("6171"),v={name:"HomeLayout",components:{ToUp:a["a"],OauthLogin:b},props:{headerTitle:{type:String,default:function(){return"魔盒逗图"}}},data:function(){return{highlight:this.$route.name,text:this.$store.state.baseLayout.username}},computed:{menuLists:function(){return this.$store.state.index.menuLists},error:function(){return this.$store.state.errorInfo},webSocketServer:function(){return new WebSocket(this.Permission.websocket)}},mounted:function(){var e=this;this.$nextTick(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.Permission){t.next=3;break}return t.next=3,e.getConnection();case 3:case"end":return t.stop()}}),t)}))))},methods:{getConnection:function(){var e=this;this.webSocketServer.addEventListener("open",(function(){var t={type:"login",from_client_id:e.Permission.uuid,client_name:e.Permission.username,room_id:e.Permission.room_id,client_img:e.Permission.avatar_url,uuid:e.Permission.uuid};e.sendMessage(JSON.stringify(t))})),this.webSocketServer.addEventListener("message",(function(t){var n=JSON.parse(t.data);switch(n.type){case"ping":e.sendMessage('{"type":"ping"}');break;case"login":var r=n.client_lists||[];for(var o in e.$store.commit("index/UPDATE_MUTATIONS",{userLists:r}),e.userLists)e.userLists[o].id===e.$route.params.id&&e.$store.commit("index/UPDATE_MUTATIONS",{receiver:e.userLists[o]});var i=[];for(var c in r)i.indexOf(r[c].char)<0&&i.push(r[c].char);i.sort();var s=[],a=[];for(var u in i){var f=[];for(var l in r)i[u]===r[l].char&&f.push(r[l]);s[u]=f}i.unshift("↑"),s.forEach((function(e){e.forEach((function(t,n){t.online&&(a.push(t),e.splice(n,1))}))})),a.sort((function(e,t){return e.char>t.char?1:-1})),s.unshift(a),e.$store.commit("index/UPDATE_MUTATIONS",{chatBody:{userLists:s,indexLists:i}});break;case"say":n.to_client_id===e.Permission.uuid&&(e.messageLists.push(n),e.$store.commit("index/UPDATE_MUTATIONS",{messageLists:e.messageLists}),setTimeout((function(){Object(g["c"])(".message-content")}),100));break}})),this.webSocketServer.addEventListener("close",(function(t){e.getConnection(),console.error("链接被关闭：".concat(JSON.stringify(t)))})),this.webSocketServer.addEventListener("error",(function(e){console.error("链接异常：".concat(JSON.stringify(e)))}))},sendMessage:function(e){try{this.webSocketServer.send(e)}catch(t){console.error(t)}},goto:function(e){var t=this.$loading({lock:!0,text:"",spinner:"el-icon-loading",background:"rgba(225, 225, 224, 0.8)"});this.$router.push({path:e.path}),setTimeout((function(){t.close()}),"/"===e.path?0:500)}}};n("0925");const O=p()(v,[["render",c]]);t["a"]=O}}]);
//# sourceMappingURL=chunk-28a5e419.98543279.js.map