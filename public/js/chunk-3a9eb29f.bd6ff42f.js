(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a9eb29f"],{"02dd":function(e,t,n){"use strict";n("4972")},"0cb2":function(e,t,n){var r=n("7b0b"),o=Math.floor,c="".replace,i=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,a=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,s,u,l){var d=n+e.length,f=s.length,h=a;return void 0!==u&&(u=r(u),h=i),c.call(l,h,(function(r,c){var i;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":i=u[c.slice(1,-1)];break;default:var a=+c;if(0===a)return r;if(a>f){var l=o(a/10);return 0===l?r:l<=f?void 0===s[l-1]?c.charAt(1):s[l-1]+c.charAt(1):r}i=s[a-1]}return void 0===i?"":i}))}},"3e49":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"user-chat__menu grid"},c=Object(r["createVNode"])("br",null,null,-1),i={class:"desc"},a=Object(r["createVNode"])("hr",null,null,-1);function s(e,t,n,s,u,l){var d=Object(r["resolveComponent"])("el-avatar"),f=Object(r["resolveComponent"])("ErrorPage"),h=Object(r["resolveComponent"])("HomeLayout");return Object(r["openBlock"])(),Object(r["createBlock"])(h,{"header-title":"魔盒逗图 -- 联系人"},{body:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",o,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(u.indexLists,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:t,class:"index-menu__number"},[Object(r["createVNode"])("div",{class:"char",innerHTML:e},null,8,["innerHTML"]),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(u.usersLists[t],(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:t},[Object(r["createVNode"])("div",{class:"user-chat__menu-item",onClick:function(t){return l.receiveMessage(e)}},[Object(r["createVNode"])(d,{src:e.client_img},null,8,["src"]),Object(r["createVNode"])("div",{style:"".concat(e.online?"color: #409EFF":"color: #9d9a9a"),class:"user-online"},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.online?"[在线] ".concat(e.client_name):"[离线] ".concat(e.client_name))+" ",1),c,Object(r["createVNode"])("span",i,Object(r["toDisplayString"])((e.centerInfo||{}).desc||""),1)],4)],8,["onClick"]),a])})),128))])})),128)),Object(r["createVNode"])("ul",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(u.indexLists,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("li",{onClick:function(e){return l.scrollToPosition(t)},key:t},Object(r["toDisplayString"])(e),9,["onClick"])})),128))])]),"20000"!==l.error.code?(Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:0})):Object(r["createCommentVNode"])("",!0)]})),_:1})}n("4e82"),n("159b"),n("a434");var u=n("eb00"),l=(n("ac1f"),n("5319"),Object(r["withScopeId"])("data-v-3aa11010"));Object(r["pushScopeId"])("data-v-3aa11010");var d=Object(r["createVNode"])("span",{style:{color:"#409EFF"}},null,-1);Object(r["popScopeId"])();var f=l((function(e,t,n,o,c,i){var a=Object(r["resolveComponent"])("el-result");return Object(r["openBlock"])(),Object(r["createBlock"])(a,null,{icon:l((function(){return[Object(r["createVNode"])("i",{class:"20000"!==i.error.code?"el-icon-lock":"el-icon-unlock",style:{"font-size":"100px"}},null,2)]})),title:l((function(){return[Object(r["createVNode"])("i",{style:{"font-size":"30px","font-family":"consolas, sans-serif"},innerHTML:i.error.code},null,8,["innerHTML"])]})),subTitle:l((function(){return[Object(r["createVNode"])("i",{style:{"font-size":"27px","font-family":"consolas, sans-serif"},innerHTML:i.error.message.replace(/^./,(function(e){return e.toUpperCase()}))},null,8,["innerHTML"])]})),extra:l((function(){return[d]})),_:1})})),h={name:"ErrorPage",computed:{error:function(){return this.$store.state.errorInfo}}},p=n("d959"),b=n.n(p);const v=b()(h,[["render",f],["__scopeId","data-v-3aa11010"]]);var m=v,g={name:"Chat",components:{ErrorPage:m,HomeLayout:u["a"]},data:function(){return{usersLists:[],indexLists:[]}},computed:{error:function(){return this.$store.state.errorInfo}},mounted:function(){var e=this;this.$nextTick((function(){if(e.Permission)return e.getConnection(e.Permission.websocket),!1;e.$store.commit("UPDATE_MUTATIONS",{errorInfo:{code:"20003",message:"Please Login System"}})}))},methods:{getConnection:function(e){var t=this,n=new WebSocket(e);n.addEventListener("open",(function(){var e={type:"login",from_client_id:t.Permission.uuid,client_name:t.Permission.username,room_id:t.Permission.room_id,client_img:t.Permission.avatar_url,uuid:t.Permission.uuid};n.send(JSON.stringify(e))})),n.addEventListener("message",(function(e){var r=JSON.parse(e.data);switch(r.type){case"ping":n.send('{"type":"ping"}');break;case"login":var o=(r||{}).client_lists||[];for(var c in t.indexLists=[],o)t.indexLists.indexOf(o[c].char)<0&&t.indexLists.push(o[c].char);t.indexLists.sort(),t.usersLists=[];var i=[];for(var a in t.indexLists){var s=[];for(var u in o)t.indexLists[a]===o[u].char&&s.push(o[u]);t.usersLists[a]=s}t.indexLists.unshift("↑"),t.usersLists.forEach((function(e){e.forEach((function(t,n){t.online&&(i.push(t),e.splice(n,1))}))})),i.sort((function(e,t){return e.char>t.char?1:-1})),t.usersLists.unshift(i);break}})),n.addEventListener("close",(function(e){console.error("链接被关闭：".concat(JSON.stringify(e)))})),n.addEventListener("error",(function(e){console.error("链接异常：".concat(JSON.stringify(e)))}))},receiveMessage:function(e){this.$store.commit("index/UPDATE_MUTATIONS",{receiver:e}),this.$router.push({path:"/home/message/".concat(e.id)})},scrollToPosition:function(e){document.getElementsByClassName("index-menu__number")[e].scrollIntoView()}}};const O=b()(g,[["render",s]]);t["default"]=O},4427:function(e,t,n){"use strict";var r=n("7a23");function o(e,t,n,o,c,i){var a=Object(r["resolveComponent"])("el-button");return c.ToUpBtn?(Object(r["openBlock"])(),Object(r["createBlock"])(a,{key:0,id:"toUp",icon:"el-icon-caret-top",round:"",size:"mini",type:"primary",onClick:i.toUp},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(n.buttonValue),1)]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0)}n("a9e3");var c=n("6171"),i={name:"ToUp",props:{buttonValue:{type:String,default:function(){return"UP"}},speed:{type:Number,default:function(){return 8.888}},showTimes:{type:Number,default:function(){return 500}},interval:{type:Number,default:function(){return 50}}},data:function(){return{ToUpBtn:!1}},created:function(){var e=this;this.$nextTick((function(){window.addEventListener("scroll",(function(){var t=document.documentElement.scrollTop||document.body.scrollTop;e.ToUpBtn=t>=e.showTimes}))}))},methods:{toUp:function(){Object(c["d"])(this.speed,this.interval)}}},a=(n("933b"),n("d959")),s=n.n(a);const u=s()(i,[["render",o]]);t["a"]=u},4972:function(e,t,n){},"4e82":function(e,t,n){"use strict";var r=n("23e7"),o=n("1c0b"),c=n("7b0b"),i=n("50c4"),a=n("d039"),s=n("addb"),u=n("a640"),l=n("04d1"),d=n("d998"),f=n("2d00"),h=n("512c"),p=[],b=p.sort,v=a((function(){p.sort(void 0)})),m=a((function(){p.sort(null)})),g=u("sort"),O=!a((function(){if(f)return f<70;if(!(l&&l>3)){if(d)return!0;if(h)return h<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)p.push({k:t+r,v:n})}for(p.sort((function(e,t){return t.v-e.v})),r=0;r<p.length;r++)t=p[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),j=v||!m||!g||!O,k=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:String(t)>String(n)?1:-1}};r({target:"Array",proto:!0,forced:j},{sort:function(e){void 0!==e&&o(e);var t=c(this);if(O)return void 0===e?b.call(t):b.call(t,e);var n,r,a=[],u=i(t.length);for(r=0;r<u;r++)r in t&&a.push(t[r]);a=s(a,k(e)),n=a.length,r=0;while(r<n)t[r]=a[r++];while(r<u)delete t[r++];return t}})},"502d":function(e,t,n){},"51ec":function(e,t,n){"use strict";n("a872")},5319:function(e,t,n){"use strict";var r=n("d784"),o=n("d039"),c=n("825a"),i=n("50c4"),a=n("a691"),s=n("1d80"),u=n("8aa5"),l=n("0cb2"),d=n("14c3"),f=n("b622"),h=f("replace"),p=Math.max,b=Math.min,v=function(e){return void 0===e?e:String(e)},m=function(){return"$0"==="a".replace(/./,"$0")}(),g=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),O=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));r("replace",(function(e,t,n){var r=g?"$":"$0";return[function(e,n){var r=s(this),o=void 0==e?void 0:e[h];return void 0!==o?o.call(e,r,n):t.call(String(r),e,n)},function(e,o){if("string"===typeof o&&-1===o.indexOf(r)&&-1===o.indexOf("$<")){var s=n(t,this,e,o);if(s.done)return s.value}var f=c(this),h=String(e),m="function"===typeof o;m||(o=String(o));var g=f.global;if(g){var O=f.unicode;f.lastIndex=0}var j=[];while(1){var k=d(f,h);if(null===k)break;if(j.push(k),!g)break;var w=String(k[0]);""===w&&(f.lastIndex=u(h,i(f.lastIndex),O))}for(var y="",x=0,N=0;N<j.length;N++){k=j[N];for(var S=String(k[0]),C=p(b(a(k.index),h.length),0),L=[],T=1;T<k.length;T++)L.push(v(k[T]));var _=k.groups;if(m){var I=[S].concat(L,C,h);void 0!==_&&I.push(_);var B=String(o.apply(void 0,I))}else B=l(S,h,C,L,_,o);C>=x&&(y+=h.slice(x,C)+B,x=C+S.length)}return y+h.slice(x)}]}),!O||!m||g)},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),o=n("5899"),c="["+o+"]",i=RegExp("^"+c+c+"*"),a=RegExp(c+c+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},"933b":function(e,t,n){"use strict";n("502d")},a872:function(e,t,n){},a9e3:function(e,t,n){"use strict";var r=n("83ab"),o=n("da84"),c=n("94ca"),i=n("6eeb"),a=n("5135"),s=n("c6b6"),u=n("7156"),l=n("c04e"),d=n("d039"),f=n("7c73"),h=n("241c").f,p=n("06cf").f,b=n("9bf2").f,v=n("58a8").trim,m="Number",g=o[m],O=g.prototype,j=s(f(O))==m,k=function(e){var t,n,r,o,c,i,a,s,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=v(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(c=u.slice(2),i=c.length,a=0;a<i;a++)if(s=c.charCodeAt(a),s<48||s>o)return NaN;return parseInt(c,r)}return+u};if(c(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var w,y=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof y&&(j?d((function(){O.valueOf.call(n)})):s(n)!=m)?u(new g(k(t)),n,y):k(t)},x=r?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),N=0;x.length>N;N++)a(g,w=x[N])&&!a(y,w)&&b(y,w,p(g,w));y.prototype=O,O.constructor=y,i(o,m,y)}},eb00:function(e,t,n){"use strict";n("caad"),n("2532");var r=n("7a23"),o={class:"item"},c={class:"icon"};function i(e,t,n,i,a,s){var u=Object(r["resolveComponent"])("ToUp"),l=Object(r["resolveComponent"])("OauthLogin"),d=Object(r["resolveComponent"])("el-card"),f=Object(r["resolveDirective"])("water-mark");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])(d,{shadow:"always"},{header:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(n.headerTitle),1)]})),default:Object(r["withCtx"])((function(){return[Object(r["renderSlot"])(e.$slots,"body"),Object(r["createVNode"])("div",o,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(s.menuLists,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:t,class:["item-list","".concat(e.highlight.includes(a.highlight)?"active":"")],onClick:function(t){return s.goto(e)}},[Object(r["createVNode"])("i",{class:e.icon},null,2),Object(r["createVNode"])("div",c,Object(r["toDisplayString"])(e.label),1)],10,["onClick"])})),128))]),Object(r["createVNode"])(u),Object(r["createVNode"])(l,{showOAuth:"20000"!==s.error.code},null,8,["showOAuth"])]})),_:3},512)),[[f,{text:a.text,textColor:"rgba(0, 0, 0, .2)",font:"20px consolas, sans-serif",row:150,col:150}]])}n("b0c0");var a=n("4427"),s={key:0,class:"oauth-login"},u={class:"oauth-login__list"};function l(e,t,n,o,c,i){var a=Object(r["resolveComponent"])("el-button");return c.showShadow?(Object(r["openBlock"])(),Object(r["createBlock"])("div",s,[Object(r["createVNode"])("div",u,[Object(r["createVNode"])("div",{class:"oauth-login__title",onClick:t[1]||(t[1]=function(){return i.closeShadow&&i.closeShadow.apply(i,arguments)})},"授权登录"),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])((i.oAuthConfig||{}).children,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"oauth-login__item",key:t},[Object(r["createVNode"])(a,{size:"mini",type:"primary",onClick:function(t){return i.loginSYS(e)},style:{"min-width":"100px"}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name.toUpperCase()),1)]})),_:2},1032,["onClick"])])})),128))])])):Object(r["createCommentVNode"])("",!0)}var d=n("1da1"),f=(n("99af"),n("96cf"),{name:"OauthLogin",props:{showOAuth:{type:Boolean,default:function(){return!1}}},data:function(){return{showShadow:!1}},watch:{showOAuth:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.showOAuth){t.next=3;break}return t.next=3,e.$confirm(e.$store.state.errorInfo.message,e.$store.state.errorInfo.code,{type:"success",showClose:!1}).then((function(){e.$message({message:"单击授权登录按钮可关闭浮层",type:"success",offset:350,dangerouslyUseHTMLString:!0,duration:1e3}),e.showShadow=!0})).catch((function(){e.showShadow=!1}));case 3:case"end":return t.stop()}}),t)})))()}},computed:{oAuthConfig:function(){return this.$store.state.login.oauthConfig}},mounted:function(){var e=this;this.$nextTick(Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getOAuthConfig();case 2:case"end":return t.stop()}}),t)}))))},methods:{closeShadow:function(){this.showShadow=!1,this.$store.commit("UPDATE_MUTATIONS",{errorInfo:{code:"20000",message:"Cancelled Login System"}})},getOAuthConfig:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("login/getOauthConfig",{name:"Oauth",refresh:!1});case 2:case"end":return t.stop()}}),t)})))()},loginSYS:function(e){window.location.href="".concat(e.value,"/").concat(Date.parse(new Date))}}}),h=(n("02dd"),n("d959")),p=n.n(h);const b=p()(f,[["render",l]]);var v=b,m={name:"HomeLayout",components:{ToUp:a["a"],OauthLogin:v},props:{headerTitle:{type:String,default:function(){return"魔盒逗图"}}},data:function(){return{highlight:this.$route.name,text:this.$store.state.baseLayout.username}},computed:{menuLists:function(){return this.$store.state.index.menuLists},error:function(){return this.$store.state.errorInfo}},methods:{goto:function(e){var t=this.$loading({lock:!0,text:"",spinner:"el-icon-loading",background:"rgba(225, 225, 224, 0.8)"});this.$router.push({path:e.path}),setTimeout((function(){t.close()}),"/"===e.path?0:500)}}};n("51ec");const g=p()(m,[["render",i]]);t["a"]=g}}]);
//# sourceMappingURL=chunk-3a9eb29f.bd6ff42f.js.map