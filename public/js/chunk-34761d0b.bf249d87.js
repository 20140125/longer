(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34761d0b"],{"2c95":function(e,t,r){"use strict";r("62cb")},"2ed6":function(e,t,r){"use strict";var o=r("7a23"),a=Object(o["withScopeId"])("data-v-6a728d62"),n=a((function(e,t,r,a,n,s){var l=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{icon:n.attr["icon"][n.model.status],circle:"",type:n.attr["type"][n.model.status],onClick:s.changeStatus,size:"medium"},null,8,["icon","type","onClick"])})),s=r("1da1"),l=(r("96cf"),{name:"StatusRadio",props:{url:{type:String,default:function(){return""}},statusModel:{type:Object,default:function(){}}},data:function(){return{model:JSON.parse(JSON.stringify(this.statusModel)),attr:{icon:{1:"el-icon-check",2:"el-icon-close"},type:{1:"success",2:"danger"}}}},watch:{statusModel:function(){this.model=JSON.parse(JSON.stringify(this.statusModel))}},methods:{changeStatus:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$confirm("确认修改当前状态",{showClose:!1,confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){e.model.status=1===e.model.status?2:1;var t={url:e.url,model:{id:e.model.id,status:e.model.status,act:"status"}};e.$store.dispatch("UPDATE_ACTIONS",t).then((function(){setTimeout((function(){e.$emit("closeDialog")}),500)}))})).catch((function(){e.$message.info("取消修改")}));case 1:case"end":return t.stop()}}),t)})))()}}});l.render=n,l.__scopeId="data-v-6a728d62";t["a"]=l},"3ee1":function(e,t,r){"use strict";r.r(t);var o=r("7a23"),a=Object(o["withScopeId"])("data-v-0a683aad"),n=a((function(e,t,r,n,s,l){var c=Object(o["resolveComponent"])("UsersLists"),i=Object(o["resolveComponent"])("UsersDialog"),u=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(u,{loading:s.loading,pagination:s.pagination},{header:a((function(){return[]})),body:a((function(){return[Object(o["createVNode"])(c,{"users-lists":l.usersLists,onUpdatedUsers:l.updatedUsers,ref:"usersLists"},null,8,["users-lists","onUpdatedUsers"])]})),dialog:a((function(){return[Object(o["createVNode"])(i,{"sync-visible":s.syncVisible,"users-attr":s.usersAttr,"re-form":s.reForm,form:s.form,onGetUsersLists:l.getUsersLists},null,8,["sync-visible","users-attr","re-form","form","onGetUsersLists"])]})),_:1},8,["loading","pagination"])})),s=r("1da1"),l=(r("96cf"),r("2824")),c=Object(o["withScopeId"])("data-v-38ff7978");Object(o["pushScopeId"])("data-v-38ff7978");var i=Object(o["createTextVNode"])("修改");Object(o["popScopeId"])();var u=c((function(e,t,r,a,n,s){var l=Object(o["resolveComponent"])("el-table-column"),u=Object(o["resolveComponent"])("el-avatar"),d=Object(o["resolveComponent"])("StatusRadio"),m=Object(o["resolveComponent"])("el-button"),p=Object(o["resolveComponent"])("el-table");return Object(o["openBlock"])(),Object(o["createBlock"])(p,{data:r.usersLists},{default:c((function(){return[Object(o["createVNode"])(l,{label:"#ID",prop:"id",width:"100px"}),Object(o["createVNode"])(l,{label:"用户名",prop:"username",width:"150px","show-tooltip-when-overflow":!0}),Object(o["createVNode"])(l,{label:"头像",align:"center"},{default:c((function(e){return[Object(o["createVNode"])(u,{src:e.row.avatar_url,alt:e.row.username},null,8,["src","alt"])]})),_:1}),Object(o["createVNode"])(l,{label:"邮箱",prop:"email","show-tooltip-when-overflow":!0}),Object(o["createVNode"])(l,{label:"手机号",prop:"phone_number","show-tooltip-when-overflow":!0}),Object(o["createVNode"])(l,{label:"允许登录",align:"center"},{default:c((function(e){return[Object(o["createVNode"])(d,{url:n.URL,"status-model":e.row},null,8,["url","status-model"])]})),_:1}),Object(o["createVNode"])(l,{label:"添加时间",prop:"created_at",align:"center"}),Object(o["createVNode"])(l,{label:"修改时间",prop:"updated_at",align:"center"}),Object(o["createVNode"])(l,{label:"操作",align:"right"},{default:c((function(t){return[e.Permission.auth.indexOf(n.URL)>-1?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,plain:"",size:"mini",icon:"el-icon-edit",type:"primary",onClick:function(r){return e.$emit("updatedUsers",t.row)}},{default:c((function(){return[i]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["data"])})),d=r("4f8d"),m=r("2ed6"),p={name:"UsersLists",components:{StatusRadio:m["a"]},props:["usersLists"],data:function(){return{URL:d["a"].users.update}}};p.render=u,p.__scopeId="data-v-38ff7978";var b=p,f={id:"users"};function h(e,t,r,a,n,s){var l=Object(o["resolveComponent"])("el-input"),c=Object(o["resolveComponent"])("el-form-item"),i=Object(o["resolveComponent"])("CommonUpload"),u=Object(o["resolveComponent"])("el-option"),d=Object(o["resolveComponent"])("el-select"),m=Object(o["resolveComponent"])("el-switch"),p=Object(o["resolveComponent"])("SubmitButton"),b=Object(o["resolveComponent"])("el-form"),h=Object(o["resolveComponent"])("el-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])("div",f,[Object(o["createVNode"])(h,{modelValue:e.visible,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.visible=t}),title:"created"===r.reForm?"添加管理员":"修改管理员","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,center:""},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{model:n.localForm,ref:r.reForm,"label-position":"left","label-width":"100px",rules:n.rules},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{label:"用户名：",prop:"username"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:n.localForm.username,"onUpdate:modelValue":t[1]||(t[1]=function(e){return n.localForm.username=e}),modelModifiers:{trim:!0}},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(c,{label:"用户头像：",prop:"avatar_url",class:"avatar-url"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{"avatar-image":{username:n.localForm.username,avatar_url:n.localForm.avatar_url,size:100},"file-size":100,"img-width":0,"img-height":0,"upload-controls":{button_type:"avatar",show_file_list:!1,show_tips:!1},uploadSuccess:s.uploadSuccess},null,8,["avatar-image","uploadSuccess"])]})),_:1}),Object(o["createVNode"])(c,{label:"登录密码：",prop:"password"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:n.localForm.password,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.localForm.password=e}),modelModifiers:{trim:!0},"show-password":"",type:"password",placeholder:"请输入登录密码"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(c,{label:"邮箱账号：",prop:"email"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:n.localForm.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.localForm.email=e}),type:"email",placeholder:"请输入邮箱账号"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(c,{label:"手机号：",prop:"phone_number"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:n.localForm.phone_number,"onUpdate:modelValue":t[4]||(t[4]=function(e){return n.localForm.phone_number=e}),modelModifiers:{number:!0},placeholder:"请输入手机号"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(c,{label:"用户角色：",prop:"role_id"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{modelValue:n.localForm.role_id,"onUpdate:modelValue":t[5]||(t[5]=function(e){return n.localForm.role_id=e}),modelModifiers:{number:!0},filterable:"",placeholder:"请选择用户角色"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(r.usersAttr["roleLists"],(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t,label:e.role_name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(o["createVNode"])(c,{label:"允许登录：",class:"is-required"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{modelValue:n.localForm.status,"onUpdate:modelValue":t[6]||(t[6]=function(e){return n.localForm.status=e}),modelModifiers:{number:!0},"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":2},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(p,{form:n.submitForm,reForm:r.reForm,onCloseDialog:t[7]||(t[7]=function(t){return e.$emit("getUsersLists",{page:1,limit:15,refresh:!0,total:0})})},null,8,["form","reForm"])]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","title"])])}var O=r("c827"),j=r("8dca"),g=r("58ea"),v={name:"UsersDialog",components:{CommonUpload:j["a"],SubmitButton:O["a"]},mixins:[g["a"]],props:["form","reForm","usersAttr"],data:function(){return{localForm:this.form,submitForm:{},rules:{username:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],avatar_url:[{required:!0,message:"请上传用户头像",trigger:"change"}],email:[{required:!0,message:"请输入邮箱账号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}],phone_number:[{required:!0,message:"请输入手机号",trigger:"blur"}],role_id:[{required:!0,message:"请选择用户角色",trigger:"change"}]}}},watch:{form:function(){var e=this;this.localForm=this.form,this.$nextTick((function(){setTimeout((function(){e.submitForm={model:e.localForm,$refs:e.$refs,url:"created"===e.reForm?d["a"].users.save:d["a"].users.update}}),1e3)}))}},methods:{uploadSuccess:function(e){this.localForm.avatar_url=(((e||{}).item||{}).lists||{}).src||""}}};r("2c95");v.render=h;var w=v,V={name:"Users",components:{UsersDialog:w,UsersLists:b,BaseLayout:l["a"]},data:function(){return{loading:!0,pagination:{page:1,limit:15,total:0,show_page:!0,refresh:!1},syncVisible:!1,reForm:"created",form:{},usersAttr:{}}},computed:{usersLists:function(){return this.$store.state.users.usersLists}},mounted:function(){var e=this;this.$nextTick(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUsersLists(e.pagination);case 2:case"end":return t.stop()}}),t)}))))},methods:{getUsersLists:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,t.syncVisible=!1,r.next=4,t.$store.dispatch("users/getUsersLists",e).then((function(){t.loading=!1,t.pagination.total=t.$store.state.users.total}));case 4:case"end":return r.stop()}}),r)})))()},currentPageChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.pagination.page=e,r.next=3,t.getUsersLists(t.pagination);case 3:case"end":return r.stop()}}),r)})))()},updatedUsers:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$store.dispatch("role/getRoleLists",{page:1,limit:20,refresh:!1}).then((function(){t.form=JSON.parse(JSON.stringify(e)),t.reForm="updated",t.syncVisible=!0,t.usersAttr={roleLists:t.$store.state.role.roleLists}}));case 1:case"end":return r.stop()}}),r)})))()}}};V.render=n,V.__scopeId="data-v-0a683aad";t["default"]=V},"58ea":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var o={props:["syncVisible"],data:function(){return{visible:this.syncVisible}},watch:{syncVisible:function(){this.visible=this.syncVisible}}}},"62cb":function(e,t,r){}}]);
//# sourceMappingURL=chunk-34761d0b.bf249d87.js.map