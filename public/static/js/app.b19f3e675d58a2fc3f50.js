webpackJsonp([1],{"+Z5Z":function(e,t){},"+cgv":function(e,t){},0:function(e,t){},"0Jvu":function(e,t){},"0XON":function(e,t){},"0sLT":function(e,t){},"0tTl":function(e,t){},"0zgu":function(e,t){},"2zr1":function(e,t){},"3f40":function(e,t){},"3uby":function(e,t){},"4/hK":function(e,t){},"4qOc":function(e,t){},"6Q7T":function(e,t){},"6ZH5":function(e,t){e.exports={agate:1,androidstudio:1,"arduino-light":1,arta:1,ascetic:1,"atelier-cave-dark":1,"atelier-cave-light":1,"atelier-dune-dark":1,"atelier-dune-light":1,"atelier-estuary-dark":1,"atelier-estuary-light":1,"atelier-forest-dark":1,"atelier-forest-light":1,"atelier-heath-dark":1,"atelier-heath-light":1,"atelier-lakeside-dark":1,"atelier-lakeside-light":1,"atelier-plateau-dark":1,"atelier-plateau-light":1,"atelier-savanna-dark":1,"atelier-savanna-light":1,"atelier-seaside-dark":1,"atelier-seaside-light":1,"atelier-sulphurpool-dark":1,"atelier-sulphurpool-light":1,"atom-one-dark":1,"atom-one-light":1,"brown-paper":1,"codepen-embed":1,"color-brewer":1,darcula:1,dark:1,darkula:1,default:1,docco:1,dracula:1,far:1,foundation:1,"github-gist":1,github:1,googlecode:1,grayscale:1,"gruvbox-dark":1,"gruvbox-light":1,hopscotch:1,hybrid:1,idea:1,"ir-black":1,"kimbie.dark":1,"kimbie.light":1,magula:1,"mono-blue":1,"monokai-sublime":1,monokai:1,obsidian:1,ocean:1,"paraiso-dark":1,"paraiso-light":1,pojoaque:1,purebasic:1,qtcreator_dark:1,qtcreator_light:1,railscasts:1,rainbow:1,routeros:1,"school-book":1,"solarized-dark":1,"solarized-light":1,sunburst:1,"tomorrow-night-blue":1,"tomorrow-night-bright":1,"tomorrow-night-eighties":1,"tomorrow-night":1,tomorrow:1,vs:1,vs2015:1,xcode:1,xt256:1,zenburn:1}},"8Ygm":function(module,exports,__webpack_require__){var md5=__webpack_require__("NC6I"),str_count=function(e,t){var i=void 0,a=[];for(i=e.indexOf(t);i>-1;)a.push(i),i=e.indexOf(t,i+1);return a.length},t=function t(){var times=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],timestamp=arguments[1],date=new Date(timestamp),Y=date.getFullYear(),M=date.getMonth()+1<10?"0"+eval(date.getMonth()+1):date.getMonth()+1,D=date.getDate()<10?"0"+date.getDate():date.getDate(),h=date.getHours()<10?"0"+date.getHours():date.getHours(),m=date.getMinutes()<10?"0"+date.getMinutes():date.getMinutes(),s=date.getSeconds()<10?"0"+date.getSeconds():date.getSeconds();return times?Y+"-"+M+"-"+D+" "+h+":"+m+":"+s:Y+"-"+M+"-"+D+".log"},get_timestamp=function(){return Math.round((new Date).getTime()/1e3)},set_time=function(e){return t(!0,e)},repeat_str=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"　　",a=str_count(e,t);return Array(a).join(i)},set_tree=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[];for(var s in t)t[s].pid===i&&(t[s].__child=e(t,t[s].id),a.push(t[s]));return a},set_random=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=void 0;switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all"){case"all":t="MNBVCXZASDFGHJKLPOIUYTREWQ0123456789qwertyuioplkjhgfdsazxcvbnm";break;case"number":t="0123456789";break;case"l":t="QWERTYUIOPLKJHGFDSAZXCVBNM";break;case"s":t="zxcvbnmlkjhgfdsaqwertyuiop"}for(var i="",a=0;a<e;a++)i+=str_shuffle(t).substring(0,1);return i},str_shuffle=function(e){for(var t="",i=e.length;i>0;i--){t+=e[Math.random()*(i+1)|0]}return t},set_password=function(e,t){return md5(md5(e)+md5(t))},get_scroll_top=function(){var e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e},set_btn_status=function(e,t,i){var a={add:!1,edit:!1,del:!1},s=e.substring(0,e.lastIndexOf("/")+1);switch((i=JSON.parse(i)).indexOf(s+"save")>=0&&(a.add=!0),i.indexOf(s+"update")>=0&&(a.edit=!0),i.indexOf(s+"delete")>=0&&(a.del=!0),t){case"SystemFile":a.chmod=!1,a.gzip=!1,a.unzip=!1,a.download=!1,a.rename=!1,a.upload=!1,i.indexOf(s+"chmod")>=0&&(a.chmod=!0),i.indexOf(s+"gzip")>=0&&(a.gzip=!0),i.indexOf(s+"unzip")>=0&&(a.unzip=!0),i.indexOf(s+"download")>=0&&(a.download=!0),i.indexOf(s+"rename")>=0&&(a.rename=!0),i.indexOf(s+"upload")>=0&&(a.upload=!0);break;case"DatabaseLists":a.backup=!1,a.repair=!1,a.optimize=!1,a.comment=!1,i.indexOf(s+"backup")>=0&&(a.backup=!0),i.indexOf(s+"repair")>=0&&(a.repair=!0),i.indexOf(s+"optimize")>=0&&(a.optimize=!0),i.indexOf(s+"comment")>=0&&(a.comment=!0)}return a},func={str_count:str_count,set_time:set_time,repeat_str:repeat_str,set_tree:set_tree,get_timestamp:get_timestamp,set_random:set_random,str_shuffle:str_shuffle,set_password:set_password,get_scroll_top:get_scroll_top,set_btn_status:set_btn_status};module.exports=func},ABPY:function(e,t){},AmOA:function(e,t){},CXt4:function(e,t){},CqVR:function(e,t,i){e.exports=i.p+"static/img/u0.85b835a.jpg"},ESq0:function(e,t){},ETvv:function(e,t){},Ewgw:function(e,t){},HZds:function(e,t){},HbUk:function(e,t,i){e.exports=i.p+"static/img/default.3c5d8dd.jpg"},JQJG:function(e,t){},"Jom/":function(e,t){},KvLZ:function(e,t){},L1Z8:function(e,t){},LP53:function(e,t,i){"use strict";function a(e,t,i,a,s,n,r,o,l,c){"boolean"!=typeof r&&(l=o,o=r,r=!1);const u="function"==typeof i?i.options:i;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,s&&(u.functional=!0)),a&&(u._scopeId=a),n?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(n)},u._ssrRegister=d):t&&(d=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),d)if(u.functional){const e=u.render;u.render=function(t,i){return d.call(i),e(t,i)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return i}i.d(t,"a",function(){return a});"undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())},Lgoy:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("pFYg"),s=i.n(a),n=i("8U58");i("4/hK");var r={props:{value:{type:String,default:""},options:{type:Object,default:function(){return{mode:"text/javascript",lineNumbers:!0,lineWrapping:!0}}}},data:function(){return{skipNextChangeEvent:!1}},ready:function(){var e=this;this.editor=n.fromTextArea(this.$el.querySelector("textarea"),this.options),this.editor.setValue(this.value),this.editor.on("change",function(t){e.skipNextChangeEvent?e.skipNextChangeEvent=!1:(e.value=t.getValue(),e.$emit&&e.$emit("change",t.getValue()))})},mounted:function(){var e=this;this.editor=n.fromTextArea(this.$el.querySelector("textarea"),this.options),this.editor.setValue(this.value),this.editor.on("change",function(t){e.skipNextChangeEvent?e.skipNextChangeEvent=!1:e.$emit&&(e.$emit("change",t.getValue()),e.$emit("input",t.getValue()))})},watch:{value:function(e,t){if(e!==this.editor.getValue()){this.skipNextChangeEvent=!0;var i=this.editor.getScrollInfo();this.editor.setValue(e),this.editor.scrollTo(i.left,i.top)}},options:function(e,t){if("object"===(void 0===e?"undefined":s()(e)))for(var i in e)e.hasOwnProperty(i)&&this.editor.setOption(i,e[i])}},beforeDestroy:function(){this.editor&&this.editor.toTextArea()}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vue-codemirror-wrap"},[t("textarea")])}]};var l=i("VU/8")(r,o,!1,function(e){i("NAmH")},null,null);t.default=l.exports},NAmH:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),n=i("7+uW"),r=(i("tvR6"),i("zL8q")),o=i.n(r),l={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view",{class:this.ClassName})},staticRenderFns:[]};var c=i("VU/8")({name:"App",provide:function(){return{reload:this.reload}},data:function(){return{ClassName:"clear_box",isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}}},l,!1,function(e){i("Ewgw")},null,null).exports,u=i("/ocq"),d=i("Dd8w"),m=i.n(d),p=i("NYxO"),h=i("Xxa5"),f=i.n(h),g=i("woOf"),v=i.n(g),b=i("exGp"),_=i.n(b),y={authLists:"/v1/auth/index",authSave:"/v1/auth/save",authUpdate:"/v1/auth/update",authDelete:"/v1/auth/delete",roleLists:"/v1/role/index",roleSave:"/v1/role/save",roleUpdate:"/v1/role/update",roleDelete:"/v1/role/delete",userLists:"/v1/user/index",userSave:"/v1/user/save",userUpdate:"/v1/user/update",userDelete:"/v1/user/delete",userCenter:"/v1/user/center",saveUserCenter:"/v1/center/save",userBind:"/v1/user/bind",logLists:"/v1/log/index",logSave:"/v1/log/save",logDelete:"/v1/log/delete",configLists:"/v1/config/index",configSave:"/v1/config/save",configUpdate:"/v1/config/update",configValUpdate:"/v1/config/updateVal",configDelete:"/v1/config/delete",apiLists:"/v1/api/index",apiSave:"/v1/api/save",apiUpdate:"/v1/api/update",apiDocLists:"/v1/apidoc/index",apiDocSave:"/v1/apidoc/save",apiDocUpdate:"/v1/apidoc/update",categoryLists:"/v1/category/index",categorySave:"/v1/category/save",categoryUpdate:"/v1/category/update",categoryDelete:"/v1/category/delete",databaseLists:"/v1/database/index",databaseBackUp:"/v1/database/backup",databaseRepair:"/v1/database/repair",databaseOptimize:"/v1/database/optimize",databaseUpdateComment:"/v1/database/comment",oauthLists:"/v1/oauth/index",oauthUpdate:"/v1/oauth/update",oauthDelete:"/v1/oauth/delete",oauthBind:"/v1/oauth/bind",sendMail:"/v1/oauth/sendMail",verifyCode:"/v1/oauth/verifyCode",reqRuleLists:"/v1/req-rule/index",reqRuleSave:"/v1/req-rule/save",reqRuleUpdate:"/v1/req-rule/update",reqRuleDelete:"/v1/req-rule/delete",getAuthByToken:"/v1/req-rule/getAuth",fileLists:"/v1/file/index",fileRead:"/v1/file/read",fileRename:"/v1/file/rename",fileChmod:"/v1/file/chmod",fileSave:"/v1/file/save",fileDelete:"/v1/file/delete",fileUpdate:"/v1/file/update",fileUpload:"/v1/file/upload",fileDownload:"/v1/file/download",fileCompression:"/v1/file/zip",fileDecompression:"/v1/file/unzip",imagePreview:"/v1/image/preview",areaIndex:"/v1/area/index",areaLists:"/v1/area/lists",areaWeather:"/v1/area/weather",emotionLists:"/v1/emotion/index",chatLists:"/v1/chat/index",pushList:"/v1/push/index",pushSave:"/v1/push/save",pushUpdate:"/v1/push/update",pushRead:"/v1/push/see",pushDelete:"/v1/push/delete",tableComponent:"/v1/components/table",componentAction:"/v1/components/actions",excelExport:"/v1/excel/export",excelImport:"/v1/excel/import",timeLineLists:"/v1/timeline/index",timeLineSave:"/v1/timeline/save",timeLineUpdate:"/v1/timeline/update",tree:"/v1/menu",login:"/v1/login",reportCode:"/v1/report/verifyCode",logout:"/v1/logout",checkToken:"/v1/checkLogin",getConfig:"/v1/config",getCountData:"/v1/total",sendEmail:"/v1/sendEmail",checkCode:"/v1/checkCode",getCityName:"/v1/getCityName",confirmMail:"/v1/confirmMail",resetPass:"/v1/resetPass"},w=i("//Fk"),x=i.n(w),k=i("mtWM"),C=i.n(k),L={state:{tabs:[{label:"欢迎页",name:"/admin/index"}],currTabs:{label:null,name:null},activeAuthName:"/admin/index"},getters:{tabs:function(e){return e.tabs},currTabs:function(e){return e.currTabs},activeAuthName:function(e){return e.activeAuthName}},mutations:{setTabs:function(e,t){e.tabs.push(t)},defaultTabs:function(e,t){console.log(t),e.tabs=t},setCurrTabs:function(e,t){e.currTabs=t},setActiveAuthName:function(e,t){e.activeAuthName=t},delTabs:function(e,t){e.tabs=t}},actions:{addTabs:function(e,t){var i=e.state,a=e.commit;-1===s()(i.tabs).indexOf(s()(t))&&a("setTabs",t)},addCurrTabs:function(e,t){e.state;var i=e.commit;i("setCurrTabs",t),i("setActiveAuthName",t.label)},deleteTabs:function(e,t){var i=e.state,a=e.commit,s=0;for(var n in i.tabs)t===i.tabs[n].name&&(s=n);i.tabs.splice(s,1),a("delTabs",i.tabs)}}},S={state:{fileTabs:[],currFileObj:{name:null,content:null,path:null,label:null},currSystemLogObj:{}},getters:{fileTabs:function(e){return e.fileTabs},currFileObj:function(e){return e.currFileObj},currSystemLogObj:function(e){return e.currSystemLogObj}},mutations:{setFileTabs:function(e,t){e.fileTabs.push(t)},delFileTabs:function(e,t){e.fileTabs=t},setCurrFileObj:function(e,t){e.currFileObj=t},setCurrSystemLogObj:function(e,t){e.currSystemLogObj=t}},actions:{addFileTabs:function(e,t){var i=e.state,a=e.commit;-1===s()(i.fileTabs).indexOf(s()(t))&&a("setFileTabs",t)},deleteFileTabs:function(e,t){var i=e.state,a=e.commit,s=0;for(var n in i.fileTabs)t===i.fileTabs[n].name&&(s=n);i.fileTabs.splice(s,1),a("delFileTabs",i.fileTabs)},addCurrFileObj:function(e,t){e.state;(0,e.commit)("setCurrFileObj",t)},addCurrSystemLogObj:function(e,t){e.state;(0,e.commit)("setCurrSystemLogObj",t)}}},M={state:{apiVisible:!1,interfaceName:"",apiModel:{},docVisible:!1,docModel:{},docName:"",dialogWidth:""},getters:{apiVisible:function(e){return e.apiVisible},interfaceName:function(e){return e.interfaceName},apiModel:function(e){return e.apiModel},docVisible:function(e){return e.docVisible},docModel:function(e){return e.docModel},docName:function(e){return e.docName},dialogWidth:function(e){return e.dialogWidth}},mutations:{setApiVisible:function(e,t){e.apiVisible=t},setDocVisible:function(e,t){e.docVisible=t},setInterfaceName:function(e,t){e.interfaceName=t},setDocName:function(e,t){e.docName=t},setApiModel:function(e,t){e.apiModel=t},setDocModel:function(e,t){e.docModel=t},setDialogWidth:function(e,t){e.dialogWidth=t}},actions:{addApiVisible:function(e,t){e.state;var i=e.commit;i("setApiVisible",t.apiVisible),i("setInterfaceName",t.interfaceName)},addDocVisible:function(e,t){e.state;var i=e.commit;i("setDocVisible",t.docVisible),i("setDocName",t.docName)},addApiModel:function(e,t){e.state,(0,e.commit)("setApiModel",t)},addDocModel:function(e,t){e.state,(0,e.commit)("setDocModel",t)},addDialogWidth:function(e,t){e.state,(0,e.commit)("setDialogWidth",t)}}},$=i("k3x/"),T=i.n($),O=i("8Ygm"),V=i.n(O),I=i("DmT9"),R=i.n(I),D={state:{token:localStorage.getItem("token"),userInfo:{socketServer:"",websocketServer:"",username:"",auth_url:"",role_id:0,uuid:"",token:"",adcode:"",city:""},weather:{},menuLists:[],oauthConfig:[],robotConfig:[],groupAnnouncementConfig:[]},getters:{menuLists:function(e){return e.menuLists},oauthConfig:function(e){return e.oauthConfig},robotConfig:function(e){return e.robotConfig},groupAnnouncementConfig:function(e){return e.groupAnnouncementConfig},userInfo:function(e){return e.userInfo},token:function(e){return e.token},weather:function(e){return e.weather}},mutations:{setMenuLists:function(e,t){e.menuLists=t},setOauthConfig:function(e,t){e.oauthConfig=t},setRobotConfig:function(e,t){e.robotConfig=t},setGroupAnnouncementConfig:function(e,t){e.groupAnnouncementConfig=t},setUserInfo:function(e,t){e.userInfo=t,e.userInfo.socketServer=R()(t.socket),e.userInfo.websocketServer=new WebSocket(t.websocket),localStorage.setItem("token",t.token)},setToken:function(e,t){e.token=t,e.userInfo.token=t,localStorage.setItem("token",t)},setWeather:function(e,t){e.weather=JSON.parse(t)}},actions:{loginSystem:function(e,t){e.state;var i=e.commit;Dt.LoginSys(t).then(function(e){e&&e.data.code===T.a.SUCCESS&&(i("setUserInfo",e.data.item),us.push({path:"/admin/index"}))})},getOauthConfig:function(e,t){e.state;var i=e.commit;Dt.GetConfig({name:t}).then(function(e){if(e&&e.data.code===T.a.SUCCESS)switch(t){case"RobotConfig":i("setRobotConfig",e.data.item);break;case"Oauth":case"RoomLists":i("setOauthConfig",e.data.item);break;case"GroupAnnouncementConfig":i("setGroupAnnouncementConfig",e.data.item)}})},getAuthMenu:function(e){var t=e.state,i=e.commit;t.menuLists.length>0&&i("setMenuLists",t.menuLists),t.userInfo.username?Dt.AuthTree([]).then(function(e){e&&e.data.code===T.a.SUCCESS&&i("setMenuLists",V.a.set_tree(e.data.item))}):us.push({path:"/login"})},logoutSystem:function(e,t){e.state;var i=e.commit;Dt.LogoutSys({token:t}).then(function(e){e&&e.data.code===T.a.SUCCESS&&(i("setToken",""),us.push({path:"/login"}))})},saveWeather:function(e,t){e.state;(0,e.commit)("setWeather",t)},saveUserInfo:function(e,t){e.state;(0,e.commit)("setUserInfo",t)},saveSystemLog:function(e,t){var i=e.state;e.commit;t.username=i.username,Dt.LogSave(t).then(function(e){e&&e.data.code===T.a.SUCCESS&&r.Message.success(e.data.msg)})},checkAuth:function(e,t){var i=e.state;e.commit;if(t.url=t.url.replace("v1","admin"),-1===i.userInfo.auth.indexOf(t.url)&&"/admin/index"!==t.url){var a="你没有访问权限，请联系管理员【"+T.a.QQ+"】检验数据的正确性！";r.MessageBox.alert(a).then(function(){var e={username:i.username,href:[t.url]};Dt.ReqRuleSave(e).then(function(e){if(e&&e.data.code===T.a.SUCCESS){var n={href:t.url.replace("admin","v1"),msg:s()({info:a,result:e.data.result}),token:i.token};Dt.LogSave(n).then(function(e){e&&e.data.code===T.a.SUCCESS&&(r.Message.success(e.data.msg),location.href="tencent://message/?uin="+T.a.QQ+"&Site=后台权限认证&Menu=yes")})}})})}}}};n.default.use(p.a);var F=new p.a.Store({modules:{tabs:L,fileTabs:S,api:M,login:D}}),N=C.a.create({timeout:0});N.defaults.baseURL="https://www.fanglonger.com/api/",N.interceptors.request.use(function(e){var t=F.state.login.token?F.state.login.token:localStorage.getItem("token");return t&&(e.headers.Authorization=""+V.a.set_password(V.a.set_random(32),V.a.set_random(12))+t+V.a.set_password(V.a.set_random(32),V.a.set_random(12))),e},function(e){return x.a.reject(e)}),N.interceptors.response.use(function(e){return 200!==e.data.code&&r.Message.warning(e.data.msg),e},function(e){!function(e,t){switch(e){case 401:F.commit("setToken",""),us.push({path:"/login"}),r.Message.warning(t);break;case 403:us.push({path:"/admin/index"}),r.Message.warning(t);break;case 404:us.push({path:"/404"}),r.Message.warning(t);break;default:r.Message.error("network error, please try again later")}}(e.response.data.code,e.response.data.msg)});var z,U,E,q,A,j,W,P,B,H,J,G,Y,Z,Q,K,X,ee,te,ie,ae,se,ne,re,oe,le,ce,ue,de,me,pe,he,fe,ge,ve,be,_e,ye,we,xe,ke,Ce,Le,Se,Me,$e,Te,Oe,Ve,Ie,Re,De,Fe,Ne,ze,Ue=N,Ee=i("mw3O"),qe=i.n(Ee),Ae={token:localStorage.getItem("token")},je=(z=_()(f.a.mark(function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(t,qe.a.stringify(v()(i,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return z.apply(this,arguments)}),We=(U=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.login,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return U.apply(this,arguments)}),Pe=(E=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.getConfig,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return E.apply(this,arguments)}),Be=(q=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.logout,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return q.apply(this,arguments)}),He=(A=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.logSave,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return A.apply(this,arguments)}),Je=(j=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.checkToken,qe.a.stringify(v()(Ae,t)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return j.apply(this,arguments)}),Ge=(W=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.authLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return W.apply(this,arguments)}),Ye=(P=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.roleLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return P.apply(this,arguments)}),Ze=(B=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.tree,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return B.apply(this,arguments)}),Qe=(H=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.userLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return H.apply(this,arguments)}),Ke=(J=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.userCenter,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return J.apply(this,arguments)}),Xe=(G=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.userBind,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return G.apply(this,arguments)}),et=(Y=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.logLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Y.apply(this,arguments)}),tt=(Z=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.apiLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Z.apply(this,arguments)}),it=(Q=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.apiDocLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Q.apply(this,arguments)}),at=(K=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.apiDocSave,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return K.apply(this,arguments)}),st=(X=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.apiDocUpdate,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return X.apply(this,arguments)}),nt=(ee=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.categoryLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ee.apply(this,arguments)}),rt=(te=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.categoryDelete,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return te.apply(this,arguments)}),ot=(ie=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.fileLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ie.apply(this,arguments)}),lt=(ae=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.fileRead,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ae.apply(this,arguments)}),ct=(se=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.fileRename,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return se.apply(this,arguments)}),ut=(ne=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.fileSave,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ne.apply(this,arguments)}),dt=(re=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.fileDelete,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return re.apply(this,arguments)}),mt=(oe=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.databaseLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return oe.apply(this,arguments)}),pt=(le=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.databaseBackUp,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return le.apply(this,arguments)}),ht=(ce=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.databaseRepair,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ce.apply(this,arguments)}),ft=(ue=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.databaseOptimize,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ue.apply(this,arguments)}),gt=(de=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.databaseUpdateComment,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return de.apply(this,arguments)}),vt=(me=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.fileCompression,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return me.apply(this,arguments)}),bt=(pe=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.fileDecompression,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return pe.apply(this,arguments)}),_t=(he=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.imagePreview,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return he.apply(this,arguments)}),yt=(fe=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.configLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return fe.apply(this,arguments)}),wt=(ge=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.configValUpdate,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ge.apply(this,arguments)}),xt=(ve=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.oauthLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ve.apply(this,arguments)}),kt=(be=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.oauthBind,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return be.apply(this,arguments)}),Ct=(_e=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.reqRuleLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return _e.apply(this,arguments)}),Lt=(ye=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.reqRuleSave,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ye.apply(this,arguments)}),St=(we=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.getAuthByToken,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return we.apply(this,arguments)}),Mt=(xe=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.sendMail;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(i,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return xe.apply(this,arguments)}),$t=(ke=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.verifyCode;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(i,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ke.apply(this,arguments)}),Tt=(Ce=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(i,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Ce.apply(this,arguments)}),Ot=(Le=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.areaWeather,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Le.apply(this,arguments)}),Vt=(Se=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.pushList,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Se.apply(this,arguments)}),It=(Me=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.pushRead,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Me.apply(this,arguments)}),Rt=($e=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.emotionLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return $e.apply(this,arguments)}),Dt={ReportSys:je,LoginSys:We,LogoutSys:Be,LogSave:He,CheckToken:Je,AuthLists:Ge,RoleLists:Ye,AuthTree:Ze,UserLists:Qe,UserCenter:Ke,UserBind:Xe,LogLists:et,ApiLists:tt,ApiDocLists:it,ApiDocSave:at,ApiDocUpdate:st,CategoryLists:nt,FileLists:ot,FileRead:lt,FileRename:ct,FileSave:ut,FileDelete:dt,DatabaseLists:mt,DatabaseBackup:pt,DatabaseRepair:ht,DatabaseOptimize:ft,DatabaseUpdateComment:gt,CategoryDelete:rt,Compression:vt,Decompression:bt,ImagePreview:_t,ConfigLists:yt,ConfigValUpdate:wt,GetConfig:Pe,OauthLists:xt,OauthBind:kt,ReqRuleLists:Ct,ReqRuleSave:Lt,GetAuthByToken:St,SendEmail:Mt,VerifyCode:$t,AreaLists:Tt,AreaWeather:Ot,PushList:Vt,PushRead:It,ChatLists:(Te=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.chatLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Te.apply(this,arguments)}),EmotionLists:Rt,GetCountData:(Oe=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.getCountData,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Oe.apply(this,arguments)}),TableComponents:(Ve=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.tableComponent,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Ve.apply(this,arguments)}),SaveData:(Ie=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(i,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Ie.apply(this,arguments)}),RemoveData:(Re=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(i,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Re.apply(this,arguments)}),ExcelExport:(De=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.excelExport,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return De.apply(this,arguments)}),ExcelImport:(Fe=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.excelImport,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Fe.apply(this,arguments)}),TimeLineLists:(Ne=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.timeLineLists,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return Ne.apply(this,arguments)}),GetCityName:(ze=_()(f.a.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.post(y.getCityName,qe.a.stringify(v()(t,Ae)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return ze.apply(this,arguments)})},Ft=i("R0ti"),Nt={name:"json",props:{jsonData:{type:Object|Array,default:function(){}},expand:{type:Number,default:function(){return 5}}},components:{JsonViewer:i.n(Ft).a}},zt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("json-viewer",{attrs:{value:this.jsonData,"expand-depth":this.expand,copyable:"",boxed:"",sort:""}})],1)},staticRenderFns:[]};var Ut=i("VU/8")(Nt,zt,!1,function(e){i("3uby")},"data-v-799ec150",null).exports,Et=i("fZjL"),qt=i.n(Et),At={props:{height:{type:Number,default:function(){return 300}}},data:function(){return{emotionTypeLists:[{type:"1",title:"表情",id:"emotion"},{type:"2",title:"人物",id:"person"},{type:"3",title:"动作",id:"action"},{type:"4",title:"家庭",id:"family"},{type:"5",title:"自然",id:"natural"},{type:"6",title:"食物",id:"food"},{type:"7",title:"体育",id:"sport"},{type:"8",title:"建筑",id:"building"},{type:"9",title:"用品",id:"supplies"},{type:"10",title:"符号",id:"symbol"},{type:"11",title:"国旗",id:"flag"}],type:"1",emotionList:[],limit:55,page:1,pages:0,offsetPage:0}},methods:{changeEmotionLists:function(e){this.type=e.name,this.page=1,this.emotionList=[],this.showEmotionLists(this.page,this.limit)},clickHandler:function(e){this.$emit("clickEmotion",e)},showEmotionLists:function(e,t){var i=this;Dt.EmotionLists({type:this.type,limit:t,page:e}).then(function(e){i.pages=e.data.item.pages;var t=e.data.item.data;for(var a in t)i.emotionList.push(t[a])})},scrollEmotion:function(){this.offsetPage=this.offsetPage+1,this.offsetPage<=this.pages&&(this.page++,this.showEmotionLists(this.page,this.limit))}},mounted:function(){this.$nextTick(function(){this.showEmotionLists(this.page,this.limit)})}},jt={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"emotion"},[i("div",{staticClass:"emotion-box",style:{height:e.height+"px"}},[i("el-tabs",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.scrollEmotion,expression:"scrollEmotion"}],attrs:{type:"border-card","tab-position":"top"},on:{"tab-click":e.changeEmotionLists},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.emotionTypeLists,function(t,a){return i("el-tab-pane",{key:a,attrs:{name:t.type,label:t.title}},e._l(e.emotionList,function(t,a){return i("div",{key:a,staticClass:"emotion-box-line"},[i("div",{staticClass:"emotion-item"},[i("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:t.icon,alt:t.title,lazy:""},nativeOn:{click:function(i){return e.clickHandler(t)}}})],1)])}),0)}),1)],1)])},staticRenderFns:[]};var Wt=i("VU/8")(At,jt,!1,function(e){i("ESq0")},"data-v-25a284eb",null).exports,Pt=i("Q+y4"),Bt=i.n(Pt),Ht={name:"ChatRoomItem",props:{source:{type:Object,default:function(){}}},mixins:[{methods:{dispatch:function(e,t){for(var i=this.$parent||this.$root,a=i.$options.name;i&&(!a||a!==e);)(i=i.$parent)&&(a=i.$options.name);if(i){for(var s=arguments.length,n=Array(s>2?s-2:0),r=2;r<s;r++)n[r-2]=arguments[r];i.$emit.apply(i,[t].concat(n))}}}}],data:function(){return{targetMessage:{},showContextMenu:!0}},computed:m()({},Object(p.c)(["userInfo"])),methods:{unescape:function(e){return e.replace(e?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;nbsp;/g," ").replace(/&#39;/g,"'")},menuRightChange:function(e){e.data.attrs&&e.data.attrs.source&&(this.targetMessage=e.data.attrs.source),this.showContextMenu="recall"!==this.targetMessage.type,"recall"!==this.targetMessage.type&&(this.showContextMenu=Date.parse(this.targetMessage.time)/1e3+180>Date.parse(new Date)/1e3)},setMessages:function(e){switch(e){case"recall":var t=JSON.parse(s()(this.targetMessage));t.content="%ACCOUNT%撤回了一条消息",t.username="systemRobot",t.client_img="https://cdn.pixabay.com/photo/2016/12/13/21/20/alien-1905155_960_720.png",t.time=V.a.set_time(new Date),this.dispatch("chatRoom","recallMessage",t,this.targetMessage);break;case"delete":var i=JSON.parse(s()(this.targetMessage));this.dispatch("chatRoom","deleteMessage",i,this.targetMessage)}}}},Jt={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"messageLists"},["all"===e.source.to_client_name?i("div",{directives:[{name:"contextmenu",rawName:"v-contextmenu:contextmenu",arg:"contextmenu"}],ref:"message",staticClass:"item",class:e.source.from_client_name===e.userInfo.username?"creator":"",attrs:{source:e.source}},[i("div",{staticClass:"avatar"},[i("el-avatar",{attrs:{src:e.source.client_img}})],1),e._v(" "),i("div",{staticClass:"body"},[e.source.from_client_name!==e.userInfo.username?i("div",{staticClass:"name"},[e._v(e._s(e.source.username||e.source.from_client_name)+" "+e._s(e.source.time))]):e._e(),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"text"},[i("span",{domProps:{innerHTML:e._s(e.source.from_client_name===e.userInfo.username?e.unescape(e.source.content.replace("%ACCOUNT%","你")):e.unescape(e.source.content.replace("%ACCOUNT%",e.source.from_client_name)))}})])])])]):i("div",{directives:[{name:"contextmenu",rawName:"v-contextmenu:contextmenu",arg:"contextmenu"}],ref:"message",staticClass:"item",class:e.source.to_client_name===e.userInfo.username?"":"creator",attrs:{source:e.source}},[i("div",{staticClass:"avatar"},[i("el-avatar",{attrs:{src:e.source.client_img}})],1),e._v(" "),i("div",{staticClass:"body"},[e.source.to_client_name===e.userInfo.username?i("div",{staticClass:"name"},[e._v(e._s(e.source.username||e.source.from_client_name)+" "+e._s(e.source.time))]):e._e(),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"text"},[i("span",{domProps:{innerHTML:e._s(e.source.from_client_name===e.userInfo.username?e.unescape(e.source.content.replace("%ACCOUNT%","你")):e.unescape(e.source.content.replace("%ACCOUNT%",e.source.from_client_name)))}})])])])]),e._v(" "),e.source.from_client_name===e.userInfo.username&&e.showContextMenu?i("v-contextmenu",{ref:"contextmenu",attrs:{theme:"bright"},on:{contextmenu:e.menuRightChange}},[i("v-contextmenu-item",{on:{click:function(t){return e.setMessages("recall")}}},[e._v("消息撤回")]),e._v(" "),i("v-contextmenu-item",{attrs:{divider:""}}),e._v(" "),i("v-contextmenu-item",{on:{click:function(t){return e.setMessages("delete")}}},[e._v("消息删除")])],1):i("v-contextmenu",{ref:"contextmenu"})],1)},staticRenderFns:[]};var Gt=i("VU/8")(Ht,Jt,!1,function(e){i("WhkN")},"data-v-81d5d1d0",null).exports,Yt=i("A7yg"),Zt=i.n(Yt),Qt={name:"UserInfo",props:{userInfoVisible:{type:Boolean,default:function(){return!1}},userInfo:{type:[Object,Array],default:function(){}},closeDialog:{type:Function|Boolean},dialogWidth:{type:String,default:function(){return"40%"}},id:{type:String,default:function(){return"userInfo"}}},data:function(){return{visible:this.userInfoVisible,backgroundImgUrl:i("HbUk"),userInfoDialogWidth:this.dialogWidth,randomNum:0}},watch:{userInfoVisible:function(){this.visible=this.userInfoVisible,this.userInfoDialogWidth=parseInt(this.dialogWidth.replace("%",""))-15+"%",this.getUserInfo()}},created:function(){this.userInfoDialogWidth=parseInt(this.dialogWidth.replace("%",""))-15+"%",this.randomNum=Math.ceil(45*Math.random()|0),this.transformStyle={transform:"rotate("+this.randomNum+"deg)"}},methods:{getUserInfo:function(){this.userInfo.desc=this.userInfo.centerInfo.desc||"",this.userInfo.tags=JSON.parse(this.userInfo.centerInfo.tags)||"",this.userInfo.ip_address=this.setLocal(JSON.parse(this.userInfo.centerInfo.ip_address))||"",this.userInfo.local=this.setLocal(JSON.parse(this.userInfo.centerInfo.local))||"",this.backgroundImgUrl=this.userInfo.client_img},setLocal:function(e){return e.length>0?e.join(",").replace(new RegExp(/,/g)," / "):e}}},Kt={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:e.id}},[i("el-dialog",{style:e.transformStyle,attrs:{visible:e.visible,title:e.userInfo.client_name,width:e.userInfoDialogWidth,center:"",id:"userInfo","show-close":!1},on:{"update:visible":function(t){e.visible=t},close:e.closeDialog}},[i("div",{staticStyle:{display:"flex","align-items":"center",position:"relative"},attrs:{slot:"title"},slot:"title"},[i("el-avatar",{attrs:{src:e.userInfo.client_img,size:50,fit:"fill",alt:e.userInfo.client_name}}),e._v(" "),i("div",[i("div",{staticStyle:{"margin-left":"10px","text-align":"left",color:"#fff"},domProps:{innerHTML:e._s(e.userInfo.client_name)}}),e._v(" "),i("div",{staticStyle:{"margin-left":"10px",color:"#fff"},attrs:{slot:"title"},domProps:{innerHTML:e._s(e.userInfo.desc)},slot:"title"})])],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{staticClass:"userInfo",attrs:{xl:{span:22,offset:1},lg:{span:22,offset:1},md:{span:22,offset:1},sm:{span:22,offset:1},xs:{span:22,offset:1}}},[i("div",[e._v("账号："+e._s(e.userInfo.uid))]),e._v(" "),i("div",[e._v("描述："+e._s(e.userInfo.desc))]),e._v(" "),i("div",[e._v("户籍地："+e._s(e.userInfo.local))]),e._v(" "),i("div",[e._v("所在地："+e._s(e.userInfo.ip_address))]),e._v(" "),i("div",[e._v("个人标签：\n                    "),e._l(e.userInfo.tags,function(t,a){return i("el-button",{key:a,attrs:{type:"primary",plain:"",size:"mini"}},[e._v(e._s(t))])})],2)])],1)],1)],1)},staticRenderFns:[]};var Xt=i("VU/8")(Qt,Kt,!1,function(e){i("Yxo+")},null,null).exports,ei={props:{chatVisible:{type:Boolean,default:function(){return!0}},dialogWidth:{type:String,default:function(){return"50%"}},currentPage:{type:Number,default:function(){return 1}},sizeLimit:{type:Number,default:function(){return 19}}},name:"chatRoom",data:function(){return{cgi:{uploadUrl:"https://www.fanglonger.com/api/"+y.fileUpload.replace("/","")},fileData:{},headers:{},inputMsg:"",emotionLists:[],showEmotion:!1,chat:{},messageComponent:Gt,overflow:!1,finished:!1,visible:this.chatVisible,targetUsers:{},userInfoVisible:!1,userInfoDialogWidth:this.dialogWidth}},components:{UserInfo:Xt,emotion:Wt,VirtualList:Zt.a},computed:m()({},Object(p.c)(["oauthConfig","groupAnnouncementConfig","userInfo"])),watch:{inputMsg:function(){this.inputMsg=this.$refs.message.innerHTML},chatVisible:function(){this.visible=this.chatVisible,this.visible||(this.userInfoVisible=!1)}},methods:m()({},Object(p.b)(["getOauthConfig","saveWeather"]),{menuRightChange:function(e){e.data.attrs&&e.data.attrs.users&&(this.targetUsers=e.data.attrs.users)},closeDialog:function(){this.userInfoVisible=!1},sendToMessage:function(){this.sendUser(this.targetUsers,this.targetUsers.uid)},addItemClass:function(e){if(this.chat.messageLists.length>0)return"all"===this.chat.messageLists[e].to_client_name?this.userInfo.username===this.chat.messageLists[e].from_client_name?"creator":"":this.userInfo.username===this.chat.messageLists[e].to_client_name?"":"creator"},onItemRendered:function(){if(this.$refs.vsl&&this.$refs.vsl){var e=this.$refs.vsl;e&&(this.overflow=e.getScrollSize()>e.getClientSize())}},onTotop:function(){var e=this;setTimeout(function(){if(e.chat.currentPage<=Math.ceil(e.chat.messageTotal/e.chat.sizeLimit)){e.chat.currentPage++;var t={type:"history",from_client_name:e.userInfo.username,from_client_id:e.userInfo.uuid,to_client_name:e.chat.to_client_name,to_client_id:e.chat.to_client_id,room_id:"all"===e.chat.to_client_name?e.chat.room_id:"",uid:e.userInfo.uuid,page:e.chat.currentPage,limit:e.chat.sizeLimit,source:"user"};e.userInfo.websocketServer.send(s()(t))}e.finished=!0},500)},connect:function(e){var t=this;e.onopen=function(){var i={type:"login",from_client_id:t.userInfo.uuid,client_name:t.userInfo.username,room_id:t.chat.room_id,client_img:t.userInfo.avatar_url,uid:t.userInfo.uuid,adcode:t.userInfo.adcode};e.send(s()(i))},e.onmessage=function(i){var a=JSON.parse(i.data);switch(a.type){case"ping":e.send('{"type":"pong"}');break;case"login":t.chat.client_list=a.client_list,t.chat.client_list_part=a.client_list,t.setUsersLists(),t.saveWeather(a.weather),console.log(a);break;case"say":t.say(a),t.chat.client_list=a.client_list,t.chat.client_list_part=a.client_list,t.setUsersLists(),t.$refs.vsl.scrollToBottom(),console.log(a);break;case"history":t.chat.messageTotal=a.total,t.chat.client_list=a.client_list,t.chat.client_list_part=a.client_list,t.chat.currentPage>1?t.chat.messageLists=t.chat.messageLists.concat(a.message):(t.chat.messageLists=a.message,t.$refs.vsl.scrollToBottom()),t.chat.messageLists.sort(function(e,t){return e.time>t.time?1:-1}),t.setUsersLists(),console.log(a);break;case"srem":case"recall":t.chat.messageLists=a.message,t.chat.client_list=a.client_list,t.chat.client_list_part=a.client_list,t.setUsersLists(),t.removeMessageList(a),console.log(a);break;case"logout":console.log(a)}},e.onclose=function(){console.log("连接关闭，定时重连"),t.connect(e)},e.onerror=function(){console.log("出现错误")}},querySearch:function(e,t){var i=[];for(var a in this.chat.client_list)this.chat.client_list[a].client_name.indexOf(e)>=0&&i.push(this.chat.client_list[a]);this.chat.client_list_part=i},clearSearch:function(){this.chat.client_list_part=this.chat.client_list},setUsersLists:function(){var e=[];for(var t in this.chat.userOnline=0,this.chat.userTotal=0,this.chat.client_list)this.userInfo.username===this.chat.client_list[t].client_name&&(e=this.chat.client_list[t].unread,this.chat.msgCount=this.chat.client_list[t].unreadCount,this.$emit("setMsgCount",this.chat.msgCount)),this.chat.client_list[t].online&&this.chat.userOnline++,this.chat.userTotal++;if(e.length>0)for(var i in e)for(var a in this.chat.client_list)e[i].form===a&&(this.chat.client_list[a].total=parseInt(e[i].total))},setRoomID:function(e){if(this.chat.room_id!==e.id.toString()){this.showEmotion=!1,this.finished=!1,this.chat.room_id=e.id.toString(),this.chat.title=e.name,this.chat.desc=e.value,this.chat.currentPage=1,this.chat.img="https://cdn.pixabay.com/photo/2016/12/13/21/20/alien-1905155_960_720.png";var t={type:"login",from_client_id:this.userInfo.uuid,client_name:this.userInfo.username,room_id:this.chat.room_id,client_img:this.userInfo.avatar_url,uid:this.userInfo.uuid,adcode:this.userInfo.adcode};this.userInfo.websocketServer.send(s()(t))}this.chat.to_client_id="all",this.chat.to_client_name="all";var i={type:"history",from_client_name:this.userInfo.username,from_client_id:this.chat.from_client_id,to_client_name:this.chat.to_client_name,to_client_id:this.chat.to_client_id,room_id:"all"===this.chat.to_client_name?this.chat.room_id:"",uid:this.userInfo.uuid,page:this.chat.currentPage,limit:this.chat.sizeLimit,source:"room"};this.userInfo.websocketServer.send(s()(i))},sendUser:function(e,t){this.finished=!1,this.chat.to_client_name=e.client_name,this.chat.to_client_id="0"===t?"all":t,this.chat.from_client_id=e.uid,this.chat.uid=this.chat.to_client_id,this.chat.title=e.client_name,this.chat.users&&(this.chat.users=e.client_name),this.chat.img=e.client_img,this.chat.desc=e.centerInfo.desc,this.chat.room_id="",e.total=0,this.chat.currentPage=1;var i={type:"history",from_client_name:this.userInfo.username,from_client_id:this.userInfo.uuid,to_client_name:this.chat.to_client_name,to_client_id:this.chat.to_client_id,room_id:"all"===this.chat.to_client_name?this.chat.room_id:"",uid:this.userInfo.uuid,page:this.chat.currentPage,limit:this.chat.sizeLimit,source:"user"};this.userInfo.websocketServer.send(s()(i))},setMsg:function(){this.inputMsg=this.$refs.message.innerHTML},getEmotion:function(e){this.chat.msg_type="text",this.inputMsg+="<img src='"+e.icon+"' width='50px' height='50px' alt='"+e.emoji+"' title='"+e.title+"'>",this.$refs.message.innerHTML=this.inputMsg},uploadSuccess:function(e){if(e&&200===e.code){switch(this.chat.msg_type){case"img":this.inputMsg+="<img src='"+e.item.src+"' width='100px' height='100px' alt='"+this.chat.from_client_name+"'>";break;case"video":this.inputMsg+="<video src='"+e.item.src+"' width='200px' height='200px' controls='controls'>"}this.$refs.message.innerHTML=this.inputMsg}else this.$message({type:"warning",message:e.msg})},beforeUpload:function(e){switch(e.name.split(".")[1].toLocaleLowerCase()){case"jpg":case"gif":case"png":case"jpeg":this.chat.msg_type="img",e.size>2097152&&this.$message({type:"warning",message:"upload image size error"});break;case"mp4":this.chat.msg_type="video",e.size>5242880&&this.$message({type:"warning",message:"upload video size error"});break;default:this.$message({type:"warning",message:"Unsupported file format"})}},say:function(e){this.userInfo.username!==e.from_client_name&&("all"!==e.to_client_id&&(this.chat.title=e.from_client_name,this.chat.to_client_name=e.from_client_name,this.chat.to_client_id=e.from_client_id),this.chat.messageLists.push(e),this.pushMessage(e.content)),this.chatVisible&&this.userInfo.username===e.from_client_name&&"all"!==e.to_client_id&&(this.chat.title=e.to_client_name,this.chat.to_client_name=e.to_client_name,this.chat.to_client_id=e.to_client_id)},sendMsg:function(){if(this.showEmotion=!1,this.inputMsg=void 0!==this.$refs.message?this.$refs.message.innerHTML:"",""!==this.inputMsg.trim()){var e={type:"say",to_client_id:this.chat.to_client_id,to_client_name:this.chat.to_client_name,from_client_name:this.userInfo.username,from_client_id:this.userInfo.uuid,msg_type:this.chat.msg_type,content:this.inputMsg,client_img:this.userInfo.avatar_url,room_id:"all"===this.chat.to_client_name?this.chat.room_id:"",uid:this.chat.uid,time:V.a.set_time(1e3*V.a.get_timestamp())};return this.userInfo.websocketServer.send(s()(e)),this.chat.messageLists.push(e),this.$refs.vsl.scrollToBottom(),this.$refs.message.innerHTML="",void(this.inputMsg="")}this.chatVisible&&(this.$refs.message.focus(),this.$message({type:"info",message:"Please enter message"}))},pushMessage:function(e){Bt.a.create("你有未读消息",{body:e,requireInteraction:!0,icon:"https://www.fanglonger.com/favicon.ico",timeout:6e5})},removeMessageList:function(e){var t=this;if(this.chat.messageLists.length>0){var i=0;this.chat.messageLists.map(function(a,s){t.compareJson(a,e)&&(i=s)});var a=this,s=[];qt()(a.chat.messageLists).forEach(function(e){s.push(a.chat.messageLists[e])}),s.splice(i,1),this.chat.messageLists=s}},compareJson:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["type"],a=qt()(e),s=qt()(t);if(a.length!==s.length)return!1;var n=a.length,r=i.length;for(var o in e)i.includes(o)||e[o]!==t[o]||r++;return r===n}}),created:function(){var e=this;this.chat={to_client_name:"all",to_client_id:"all",from_client_id:this.userInfo.uuid,from_client_name:this.userInfo.username,uid:this.userInfo.uuid,room_id:this.userInfo.room_id,title:this.userInfo.room_name,msgCount:0,client_list:[],client_list_part:[],img:"https://cdn.pixabay.com/photo/2016/12/13/21/20/alien-1905155_960_720.png",desc:"",messageLists:[],msg_type:"text",users:"",userTotal:0,userOnline:0,currentPage:this.currentPage,sizeLimit:this.sizeLimit,messageTotal:0};try{Bt.a.Permission.request()}catch(e){e&&this.$message.error(s()(e))}this.fileData.token=this.userInfo.token,this.fileData.rand=!1,this.headers.Authorization=""+V.a.set_password(V.a.set_random(32),V.a.set_random(12))+this.userInfo.token+V.a.set_password(V.a.set_random(32),V.a.set_random(12)),this.connect(this.userInfo.websocketServer),this.getOauthConfig("RoomLists"),this.getOauthConfig("GroupAnnouncementConfig");var t=this;document.onkeydown=function(e){if("Enter"===e.code&&e.shiftKey)return e.preventDefault(),t.sendMsg(),!1},this.$on("recallMessage",function(t,i){t.type="recall",t.recall_message=JSON.parse(s()(i)),e.removeMessageList(i),e.userInfo.websocketServer.send(s()(t)),e.chat.messageLists.push(t)}),this.$on("deleteMessage",function(t,i){t.type="srem",e.removeMessageList(i),e.userInfo.websocketServer.send(s()(t))})}},ti={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{id:"chat",top:"8vh",width:e.dialogWidth,center:"","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[i("div",{staticStyle:{display:"flex","align-items":"center",position:"relative"},attrs:{slot:"title"},slot:"title"},[i("el-avatar",{attrs:{src:e.chat.img,size:50,fit:"fill",alt:e.chat.title}}),e._v(" "),i("div",[i("div",{staticStyle:{"margin-left":"10px","text-align":"left",color:"#fff"},domProps:{innerHTML:e._s(e.chat.title)}}),e._v(" "),i("div",{staticStyle:{"margin-left":"10px",color:"#fff"},attrs:{slot:"title"},domProps:{innerHTML:e._s(e.chat.desc)},slot:"title"})])],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{xl:{span:18},lg:{span:16},md:{span:16},sm:{span:16},xs:{span:14},id:"leftBox"}},[i("el-card",[i("div",{staticClass:"main"},[i("div",{staticClass:"list-container"},[i("virtual-list",{directives:[{name:"show",rawName:"v-show",value:!!e.chat.messageLists.length,expression:"!!chat.messageLists.length"}],ref:"vsl",staticClass:"stream scroll-touch",class:{overflow:e.overflow},attrs:{"data-key":"uid","data-sources":e.chat.messageLists,"data-component":e.messageComponent,"estimate-size":70,"item-class":"stream-item","item-class-add":e.addItemClass},on:{resized:e.onItemRendered,totop:e.onTotop}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.overflow,expression:"overflow"}],staticClass:"header",attrs:{slot:"header"},slot:"header"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.finished,expression:"!finished"}],staticClass:"spinner"}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.finished,expression:"finished"}],staticClass:"finished"},[e._v("No more data")])])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.chat.messageLists.length,expression:"!chat.messageLists.length"}],staticClass:"empty"},[i("div",{staticClass:"wrapper"},[i("div",{staticClass:"icon"}),e._v(" "),i("div",{staticClass:"tips"},[e._v("No chats")])])])],1)]),e._v(" "),i("div",{staticClass:"input-msg"},[i("emotion",{directives:[{name:"show",rawName:"v-show",value:e.showEmotion,expression:"showEmotion"}],attrs:{height:300},on:{clickEmotion:e.getEmotion}}),e._v(" "),i("div",[i("el-tooltip",{attrs:{effect:"dark",content:"房间名称",placement:"top-start"}},[i("el-menu",{staticStyle:{"margin-bottom":"10px"},attrs:{"default-active":e.chat.room_id,"background-color":"#409EFF","text-color":"#fff","active-text-color":"#ffd04b",mode:"horizontal"}},e._l(e.oauthConfig,function(t,a){return i("el-menu-item",{key:a,attrs:{index:t.id.toString()},on:{click:function(i){return e.setRoomID(t)}}},[e._v("\n                                        "+e._s(t.name)+"\n                                    ")])}),1)],1),e._v(" "),i("el-tooltip",{attrs:{effect:"dark",content:"发送表情",placement:"top-start"}},[i("i",{staticClass:"el-icon-picture-outline-round icon",on:{click:function(t){e.showEmotion=!e.showEmotion}}})]),e._v(" "),i("el-upload",{staticStyle:{float:"left"},attrs:{action:e.cgi.uploadUrl,data:e.fileData,headers:e.headers,"show-file-list":!1,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload}},[i("el-tooltip",{attrs:{effect:"dark",content:"发送文件和图片",placement:"top-start"}},[i("i",{staticClass:"el-icon-picture-outline icon",on:{click:function(t){e.showEmotion=!1}}})])],1)],1),e._v(" "),i("div",{ref:"message",attrs:{contentEditable:"true",id:"content"},on:{focus:function(t){e.showEmotion=!1},keydown:e.setMsg}})],1),e._v(" "),i("div",{staticClass:"input-button",staticStyle:{"text-align":"right"}},[i("el-tooltip",{attrs:{effect:"dark",content:"Shift + Enter 快捷发送",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",round:"",plain:"",size:"medium"},on:{click:e.sendMsg}},[e._v("发 送")])],1)],1)])],1),e._v(" "),i("el-col",{attrs:{xl:{span:6},lg:{span:8},md:{span:8},sm:{span:8},xs:{span:10},id:"rightBox"}},[i("el-card",[i("div",{staticStyle:{background:"#fff","min-height":"60px"}},[e._v("\n                        群公告:\n                        "),i("el-carousel",{attrs:{tyle:"cursor: pointer",interval:4e3,arrow:"never",direction:"vertical","indicator-position":"none",height:"100px"}},e._l(e.groupAnnouncementConfig,function(t,a){return i("el-carousel-item",{key:a},[i("div",{staticStyle:{cursor:"pointer","margin-top":"20px"},domProps:{innerHTML:e._s(t.name)}})])}),1)],1),e._v(" "),i("el-divider"),e._v(" "),i("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n                        在线人数("+e._s(e.chat.userTotal)+"/"+e._s(e.chat.userOnline)+")\n                    ")]),e._v(" "),i("el-autocomplete",{staticStyle:{width:"100%"},attrs:{placeholder:"搜索",clearable:"","fetch-suggestions":e.querySearch},on:{clear:e.clearSearch},model:{value:e.chat.users,callback:function(t){e.$set(e.chat,"users",t)},expression:"chat.users"}}),e._v(" "),i("div",{staticClass:"user-list"},[i("el-menu",{staticStyle:{width:"100%"}},e._l(e.chat.client_list_part,function(t,a){return i("el-menu-item",{directives:[{name:"contextmenu",rawName:"v-contextmenu:contextmenu",arg:"contextmenu"}],key:a,attrs:{users:t,index:a.toString()},on:{click:function(i){return e.sendUser(t,a)}}},[i("el-avatar",{staticStyle:{cursor:"pointer"},attrs:{size:30,src:t.client_img}}),e._v(" "),i("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"title"},domProps:{innerHTML:e._s(t.client_name.replace(e.chat.users,"<b style=color:#0e82fc;font-weight:300>"+e.chat.users+"</b>"))},slot:"title"}),e._v(" "),t.total?i("el-badge",{staticStyle:{top:"10px",right:"15px"},attrs:{type:"danger",value:t.total}}):t.online?i("el-badge",{staticStyle:{top:"12px",right:"10px"},attrs:{type:"success","is-dot":""}}):t.online?e._e():i("el-badge",{staticStyle:{top:"12px",right:"10px"},attrs:{type:"info","is-dot":""}})],1)}),1)],1),e._v(" "),i("v-contextmenu",{ref:"contextmenu",on:{contextmenu:e.menuRightChange}},[i("v-contextmenu-item",{on:{click:function(t){e.userInfoVisible=!0}}},[i("i",{staticClass:"el-icon-postcard"}),e._v(" 查看资料")]),e._v(" "),i("v-contextmenu-item",{attrs:{divider:""}}),e._v(" "),i("v-contextmenu-item",{on:{click:e.sendToMessage}},[i("i",{staticClass:"el-icon-chat-line-square"}),e._v(" 发送消息")])],1)],1)],1)],1)],1),e._v(" "),i("UserInfo",{attrs:{"user-info":e.targetUsers,"dialog-width":e.dialogWidth,"user-info-visible":e.userInfoVisible,closeDialog:e.closeDialog}})],1)},staticRenderFns:[]};var ii=i("VU/8")(ei,ti,!1,function(e){i("sg93"),i("ETvv")},null,null).exports,ai={name:"baseModule",data:function(){return{isCollapse:!1,activeName:null,showCity:!1,chatVisible:!1,activeIndex:"1",menuClass:"el-icon-s-unfold",asideWidth:"200px",asideHeight:{},headerStyle:{"margin-left":"200px"},noticeLength:0,notice:[],online:0,chat:{},chatMsgClass:"el-icon-chat-dot-round",noticeArr:[],mainStyle:{margin:"60px 0 60px 200px"},innerWidth:window.innerWidth,chatDialogWidth:"65%"}},components:{VueJson:Ut,chatRoom:ii},computed:m()({},Object(p.c)(["tabs","activeAuthName","menuLists","userInfo","weather","dialogWidth"])),methods:m()({},Object(p.b)(["addTabs","deleteTabs","addCurrTabs","logoutSystem","getAuthMenu","addDialogWidth"]),{setMsgCount:function(e){this.chat.msgCount=e},setAttr:function(e){var t={label:e.name,name:e.href};this.activeName=t.name,this.addCurrTabs(t),this.addTabs(t),this.asideHeight={"min-height":window.innerHeight-60+"px"},this.$router.push({path:t.name})},goto:function(e){this.$router.push({path:e.name})},remove:function(e){var t=this;this.tabs.forEach(function(i,a){if(i.name===e){var s=t.tabs[a+1]||t.tabs[a-1];s&&(t.deleteTabs(e),t.activeName=s.name,t.$router.push({path:t.activeName}),t.addCurrTabs(s))}})},handleSelect:function(e,t){switch(e){case"2-1":var i={label:"个人中心",name:"/admin/user/center"};this.activeName=i.name,this.addCurrTabs(i),this.addTabs(i),this.$router.push({path:i.name});break;case"2-2":this.logoutSystem(this.token)}},readNotice:function(e){if("more"===e){var t={label:"站内通知",name:"/admin/push/index"};return this.activeName=t.name,this.addCurrTabs(t),this.addTabs(t),this.$router.push({path:t.name}),!1}var i={};i.see=parseInt(e.see)+1,i.id=e.id,i.type=e.type,Dt.PushRead(i)},hideMenu:function(){this.isCollapse=!this.isCollapse,this.isCollapse?(this.menuClass="el-icon-s-fold",this.asideWidth="65px",this.headerStyle={"margin-left":"65px"},this.mainStyle={margin:"60px 0 60px 60px"}):(this.menuClass="el-icon-s-unfold",this.asideWidth="200px",this.headerStyle={"margin-left":"200px"},this.mainStyle={margin:"60px 0 60px 200px"})},getMsgDialog:function(){this.chatVisible=!this.chatVisible,this.chatVisible?this.chatMsgClass="el-icon-close":this.chatMsgClass="el-icon-chat-dot-round"},webPush:function(){var e=this;this.userInfo.socketServer.on("connect",function(){e.userInfo.socketServer.emit("login",e.userInfo.uuid)}),this.userInfo.socketServer.on("new_msg",function(t){e.noticeArr.push({time:V.a.get_timestamp(),message:t})}),this.userInfo.socketServer.on("notice",function(t){var i=1;for(var a in e.noticeLength=0,t)t[a].disabled=!0,"successfully"!==t[a].status&&0===t[a].see&&(t[a].disabled=!1,e.noticeLength=i++);e.notice=t}),this.userInfo.socketServer.on("online",function(t){e.online=t})},closeNotice:function(e){for(var t in this.noticeArr)this.noticeArr[t].time===e.time&&this.noticeArr.splice(t,1)},setDialogWidth:function(){this.innerWidth<768?this.addDialogWidth("100%"):this.innerWidth>=768&&this.innerWidth<992?this.addDialogWidth("85%"):this.innerWidth>=992&&this.innerWidth<1200?this.addDialogWidth("70%"):this.innerWidth>=1200&&this.innerWidth<1920?this.addDialogWidth("65%"):this.innerWidth>=1920&&(this.addDialogWidth("50%"),this.isCollapse=!1,this.menuClass="el-icon-s-unfold",this.asideWidth="200px",this.headerStyle={"margin-left":"200px"},this.mainStyle={margin:"60px 0 60px 200px"},this.chatDialogWidth="65%")}}),created:function(){this.chat={msgCount:0,total:0,online:0},this.activeName=this.activeAuthName,this.asideHeight={"min-height":window.innerHeight-60+"px"}},watch:{chatVisible:function(){this.chatVisible||(this.chatMsgClass="el-icon-chat-dot-round")},weather:function(){this.weather&&this.noticeArr.push({time:V.a.get_timestamp(),message:this.weather.info?s()(this.weather.info):s()(["welcome"])})}},mounted:function(){this.$nextTick(function(){var e={label:this.$route.meta.title,name:this.$route.path};"欢迎页"===e.label&&3===V.a.str_count(e.name,"/")||(this.activeName=e.name,this.addCurrTabs(e),this.addTabs(e)),this.getAuthMenu(),this.webPush(),this.isCollapse=!0,this.menuClass="el-icon-s-fold",this.asideWidth="65px",this.headerStyle={"margin-left":"65px"},this.mainStyle={margin:"60px 0 60px 60px"},this.setDialogWidth()})}},si={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("el-header",{attrs:{id:"header"}},[i("el-menu",{style:e.headerStyle,attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#393d49","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[i("el-menu-item",{attrs:{index:"1"},on:{click:e.hideMenu}},[i("i",{class:e.menuClass,staticStyle:{color:"#fff","font-size":"25px"}})]),e._v(" "),i("el-menu-item",{attrs:{index:"5"},on:{click:function(t){e.showCity=!e.showCity}}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-location"}),e._v(e._s(e.userInfo.city))])],2),e._v(" "),i("el-submenu",{staticStyle:{float:"right"},attrs:{index:"2"}},[i("template",{slot:"title"},[i("el-avatar",{attrs:{src:e.userInfo.avatar_url,alt:e.userInfo.username,size:35}}),e._v(" "),i("span",{staticStyle:{"margin-left":"10px"},domProps:{innerHTML:e._s(e.userInfo.username)}})],1),e._v(" "),i("el-menu-item",{attrs:{index:"2-1"}},[i("i",{staticClass:"el-icon-user-solid"}),e._v(" 个人中心")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-2"}},[i("i",{staticClass:"el-icon-upload2"}),e._v(" 退出系统")])],2),e._v(" "),i("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"3"}},[i("el-dropdown",{attrs:{trigger:"hover","hide-on-click":!1,"show-timeout":100},on:{command:e.readNotice}},[i("i",{staticClass:"el-icon-message-solid",staticStyle:{color:"#fff","font-size":"22px"}}),e._v(" "),e.noticeLength?i("el-badge",{staticStyle:{"margin-top":"-30px","margin-left":"-18px"},attrs:{value:e.noticeLength}}):e._e(),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{staticStyle:{"text-align":"center",color:"#66b1ff"}},[e._v("站内通知")]),e._v(" "),e._l(e.notice,function(t,a){return i("el-dropdown-item",{key:a,attrs:{command:t,divided:"",disabled:t.disabled}},[t.disabled?e._e():i("el-badge",{attrs:{"is-dot":""}}),e._v("【"+e._s(t.title)+"】 "+e._s(t.info)+"\n                        ")],1)}),e._v(" "),i("el-dropdown-item",{staticStyle:{"text-align":"center",color:"#66b1ff"},attrs:{command:"more"}},[e._v("查看更多")])],2)],1)],1),e._v(" "),i("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"4"}},[i("a",{attrs:{href:"https://gitee.com/f_longer/vue-app",target:"_blank"}},[i("img",{attrs:{src:"https://gitee.com/f_longer/longer/widgets/widget_5.svg?color=C71D24",alt:"gitee"}})])])],1)],1),e._v(" "),i("el-container",[i("el-aside",{style:e.asideHeight,attrs:{width:e.asideWidth}},[i("el-menu",{attrs:{"unique-opened":"","background-color":"#393d49","text-color":"#fff","active-text-color":"#ffd04b",collapse:e.isCollapse}},e._l(e.menuLists,function(t,a){return i("el-submenu",{key:a,attrs:{index:t.id.toString()}},[i("template",{slot:"title"},[2!==t.id?i("i",{staticClass:"el-icon-menu"}):e._e(),e._v(" "),i("span",{domProps:{innerHTML:e._s(t.name)}})]),e._v(" "),e._l(t.__child,function(t,a){return i("el-menu-item",{key:a,attrs:{index:t.id.toString()},on:{click:function(i){return e.setAttr(t)}}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-s-home"}),e._v(" "),i("span",{domProps:{innerHTML:e._s(t.name)}})])],2)})],2)}),1)],1),e._v(" "),i("el-container",{attrs:{direction:"vertical"}},[i("el-main",{style:e.mainStyle},[e.noticeArr.length>0?i("el-carousel",{attrs:{interval:2e3,arrow:"never",height:"65px",direction:"vertical","indicator-position":"none"}},e._l(e.noticeArr,function(t,a){return i("el-carousel-item",{key:a},[i("el-alert",{attrs:{type:"success","show-icon":"",title:t.message,effect:"light"},on:{close:function(i){return e.closeNotice(t)}}})],1)}),1):e._e(),e._v(" "),i("el-tabs",{attrs:{type:"border-card",closable:"",lazy:""},on:{"tab-click":e.goto,"tab-remove":e.remove},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.tabs,function(e){return i("el-tab-pane",{key:e.name,attrs:{tab:e,label:e.label,name:e.name}})}),e._v(" "),i("el-card",{attrs:{shadow:"always"}},[i("router-view")],1)],2)],1),e._v(" "),i("el-footer",[i("el-link",{attrs:{href:"mailto:fl140125@gmail.com"}},[e._v("fl140125@gmail.com")])],1),e._v(" "),i("i",{staticClass:"msg-icon",on:{click:e.getMsgDialog}},[i("i",{class:e.chatMsgClass,staticStyle:{margin:"13px 15px"}},[e.chat.msgCount?i("el-badge",{staticClass:"msg-count",attrs:{value:e.chat.msgCount,type:"danger"}}):e._e()],1)])],1)],1),e._v(" "),i("chat-room",{attrs:{"chat-visible":e.chatVisible,"dialog-width":e.dialogWidth},on:{setMsgCount:e.setMsgCount}}),e._v(" "),i("el-dialog",{attrs:{visible:e.showCity,width:e.dialogWidth,title:"【"+e.userInfo.city+"】天气预告",center:""},on:{"update:visible":function(t){e.showCity=t}}},[i("VueJson",{attrs:{"json-data":e.weather.forecast}})],1)],1)},staticRenderFns:[]};var ni={name:"index",data:function(){return{}},components:{baseModule:i("VU/8")(ai,si,!1,function(e){i("JQJG")},"data-v-10cf2016",null).exports}},ri={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{attrs:{gutter:24}},[t("baseModule")],1)},staticRenderFns:[]},oi=i("VU/8")(ni,ri,!1,null,null,null).exports,li=i("XLwt"),ci=i.n(li),ui={name:"index",data:function(){return{access_token:"",showTimestamp:"",charts:{},xAxisData:[],seriesData:{log:[],notice:[],oauth:[]},innerWidth:window.innerWidth,reverse:!1,activities:"",value:new Date,chartsNum:14,timestampNum:10,chartsStyle:""}},computed:m()({},Object(p.c)(["userInfo","tabs"])),mounted:function(){this.$nextTick(function(){var e=this;this.totalCharts(),this.access_token&&(this.setToken(this.access_token),this.defaultTabs([{label:"欢迎页",name:"/admin/index"}]),this.$router.push({path:"/admin/index"})),this.echarts=ci.a.init(document.getElementById("charts")),this.userInfo.socketServer.on("charts",function(t){e.xAxisData=t.day,e.seriesData.log=t.total.log,e.seriesData.notice=t.total.push,e.seriesData.oauth=t.total.oauth,e.echarts.setOption({title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#688583"}}},legend:{data:["授权用户","站内通知","系统日志"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:e.xAxisData},yAxis:{type:"value"},series:[{name:"授权用户",type:"line",stack:"总量",areaStyle:{normal:{}},data:e.seriesData.oauth},{name:"站内通知",type:"line",stack:"总量",areaStyle:{normal:{}},data:e.seriesData.notice},{name:"系统日志",type:"line",stack:"总量",areaStyle:{normal:{}},data:e.seriesData.log}]})}),this.innerWidth>=1920?(this.chartsNum=14,this.timestampNum=10,this.chartsStyle={display:"block"}):(this.chartsNum=24,this.timestampNum=24,this.chartsStyle={display:"none"})})},methods:m()({},Object(p.d)(["setToken","defaultTabs","setActiveAuthName"]),{totalCharts:function(){var e=this;Dt.GetCountData({}).then(function(t){e.activities=t.data.item.timeline.data})}}),created:function(){this.$route.params.access_token&&(this.access_token=this.$route.params.access_token)}},di={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:e.chartsNum}},[i("el-card",{style:e.chartsStyle,attrs:{shadow:"hover"}},[i("div",{attrs:{id:"charts"}})]),e._v(" "),i("el-card",{style:e.innerWidth>=1920?"margin-top:30px":"margin-bottom:20px",attrs:{shadow:"hover"}},[i("el-calendar",{attrs:{"first-day-of-week":7},scopedSlots:e._u([{key:"dateCell",fn:function(t){t.date;var a=t.data;return[i("p",{class:a.isSelected?"is-selected":""},[e._v("\n                        "+e._s(a.day.split("-").slice(2).join("-"))+" "+e._s(a.isSelected?" ✔️":"")+"\n                    ")])]}}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:e.timestampNum}},[i("el-card",{attrs:{shadow:"hover"}},[i("div",{staticClass:"radio"},[i("el-radio-group",{model:{value:e.reverse,callback:function(t){e.reverse=t},expression:"reverse"}},[i("el-radio",{attrs:{label:!0}},[e._v("倒序")]),e._v(" "),i("el-radio",{attrs:{label:!1}},[e._v("正序")])],1)],1),e._v(" "),i("el-timeline",{attrs:{reverse:e.reverse}},e._l(e.activities,function(t,a){return i("el-timeline-item",{key:a,attrs:{type:t.type,placement:"top",timestamp:t.timestamp}},[i("el-card",[e._v(e._s(t.content))])],1)}),1)],1)],1)],1)},staticRenderFns:[]};var mi=i("VU/8")(ui,di,!1,function(e){i("0Jvu")},"data-v-14490345",null).exports,pi={name:"sendEmail",props:{userEmail:String},data:function(){return{users:{email:""},rules:{email:[{required:!0,type:"email",message:"请输入正确的邮箱账号",trigger:"blur"}]}}},created:function(){this.users.email=this.userEmail?this.userEmail:this.users.email},methods:{cancelDialog:function(e){this.$refs[e].resetFields(),this.$emit("close")},sendEmail:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;Dt.SendEmail(t.users,y.confirmMail).then(function(e){e&&200===e.data.code&&(t.$message.success(e.data.msg),t.$emit("resetPassword",e.data.item))})})}}},hi={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"userForm",attrs:{model:e.users,rules:e.rules}},[i("el-form-item",{attrs:{prop:"email"}},[i("el-input",{attrs:{placeholder:"请输入你的邮箱账号"},model:{value:e.users.email,callback:function(t){e.$set(e.users,"email",t)},expression:"users.email"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-s-custom"})])],2)],1)],1),e._v(" "),i("el-footer",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{plain:""},on:{click:function(t){return e.cancelDialog("userForm")}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.sendEmail("userForm")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var fi=i("VU/8")(pi,hi,!1,function(e){i("Rr2I")},"data-v-47931920",null).exports,gi={name:"resetPassword",props:{userEmail:String,userUuid:String},data:function(){var e=this;return{resetPass:{password:"",confirmPassword:"",email:"",uuid:""},rules:{password:[{validator:function(t,i,a){""===i?a(new Error("请输入密码")):(""!==e.resetPass.confirmPassword&&e.$refs.resetPass.validateField("confirmPassword"),a())},trigger:"blur",required:!0}],confirmPassword:[{validator:function(t,i,a){""===i?a(new Error("请再次输入密码")):i!==e.resetPass.password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur",required:!0}],email:{required:!0,message:"用户邮箱获取失败",type:"email"},verify_code:{required:!0,message:"请输入邮箱验证码",trigger:"blur"}}}},created:function(){this.resetPass.email=this.userEmail?this.userEmail:this.resetPass.email,this.resetPass.uuid=this.userUuid?this.userUuid:this.resetPass.uuid},methods:{cancelDialog:function(e){this.$refs[e].resetFields(),this.$emit("close")},submitPassword:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;Dt.SaveData(t.resetPass,y.resetPass).then(function(e){e&&200===e.data.code&&(t.$message.success(e.data.msg),t.$emit("autoLoginSys",t.resetPass))})})}}},vi={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"resetPass",attrs:{model:e.resetPass,rules:e.rules,"label-position":"left"}},[i("el-form-item",{attrs:{prop:"email"}},[i("el-input",{attrs:{readonly:""},model:{value:e.userEmail,callback:function(t){e.userEmail=t},expression:"userEmail"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-user-solid"})])],2)],1),e._v(" "),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{placeholder:"请输入用户密码",maxlength:"16","show-password":""},model:{value:e.resetPass.password,callback:function(t){e.$set(e.resetPass,"password",t)},expression:"resetPass.password"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-lock"})])],2)],1),e._v(" "),i("el-form-item",{attrs:{prop:"confirmPassword"}},[i("el-input",{attrs:{placeholder:"请输入用户密码",maxlength:"16","show-password":""},model:{value:e.resetPass.confirmPassword,callback:function(t){e.$set(e.resetPass,"confirmPassword",t)},expression:"resetPass.confirmPassword"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-lock"})])],2)],1),e._v(" "),i("el-form-item",{attrs:{prop:"verify_code"}},[i("el-input",{attrs:{placeholder:"请输入邮箱验证码",maxlength:"8"},model:{value:e.resetPass.verify_code,callback:function(t){e.$set(e.resetPass,"verify_code",e._n(t))},expression:"resetPass.verify_code"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-picture"})])],2)],1)],1),e._v(" "),i("el-footer",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{plain:""},on:{click:function(t){return e.cancelDialog("resetPass")}}},[e._v("返 回")]),e._v(" "),i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.submitPassword("resetPass")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var bi=i("VU/8")(gi,vi,!1,function(e){i("NOWg")},"data-v-154418a4",null).exports,_i={name:"SIdentify",props:{identifyCode:{type:String,default:function(){return"1234"}},fontSizeMin:{type:Number,default:function(){return 25}},fontSizeMax:{type:Number,default:function(){return 35}},backgroundColorMin:{type:Number,default:function(){return 200}},backgroundColorMax:{type:Number,default:function(){return 220}},dotColorMin:{type:Number,default:function(){return 60}},dotColorMax:{type:Number,default:function(){return 120}},contentWidth:{type:Number,default:function(){return 120}},contentHeight:{type:Number,default:function(){return 38}}},methods:{randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor:function(e,t){return"rgb("+this.randomNum(e,t)+","+this.randomNum(e,t)+","+this.randomNum(e,t)+")"},drawPic:function(){var e=document.getElementById("s-canvas").getContext("2d");e.textBaseline="bottom",e.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),e.fillRect(0,0,this.contentWidth,this.contentHeight);for(var t=0;t<this.identifyCode.length;t++)this.drawText(e,this.identifyCode[t],t);this.drawLine(e),this.drawDot(e)},drawText:function(e,t,i){e.fillStyle=this.randomColor(50,160),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var a=(i+1)*(this.contentWidth/(this.identifyCode.length+1)),s=this.randomNum(this.fontSizeMax,this.contentHeight-5),n=this.randomNum(-30,30);e.translate(a,s),e.rotate(n*Math.PI/180),e.fillText(t,0,0),e.rotate(-n*Math.PI/180),e.translate(-a,-s)},drawLine:function(e){for(var t=0;t<4;t++)e.strokeStyle=this.randomColor(100,200),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot:function(e){for(var t=0;t<30;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}},yi={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"s-canvas"},[t("canvas",{attrs:{id:"s-canvas",width:this.contentWidth,height:this.contentHeight}})])},staticRenderFns:[]},wi={name:"login",components:{SIdentify:i("VU/8")(_i,yi,!1,null,null,null).exports,ResetPassword:bi,SendEmail:fi},data:function(){return{passwordLogin:{email:"",password:"",verify_code:"",uuid:"",loginType:"password"},passwordRules:{email:[{required:!0,message:"请输入用户名",trigger:"blur"},{type:"email",message:"用户名格式不正确"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verify_code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},mailLogin:{email:"",verify_code:"",loginType:"mail"},mailRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确"}],verify_code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},bgStyle:{background:"url("+i("CqVR")+")","background-repeat":"no-repeat",height:window.innerHeight+"px"},dialogWidth:"32%",styleWidth:{width:"76%"},innerWidth:window.innerWidth,activeModel:"password",codeValue:"获取验证码",times:60,disabled:!1,verifyCode:"",headerTitle:"账号密码登录",emailSendVisible:!1,resetPasswordVisible:!1}},computed:m()({},Object(p.c)(["oauthConfig"])),mounted:function(){this.$nextTick(function(){this.refreshCode(),this.innerWidth<768?(this.styleWidth={width:"55%"},this.dialogWidth="100%"):this.innerWidth>=768&&this.innerWidth<992?(this.dialogWidth="83.3333%",this.styleWidth={width:"79%"}):this.innerWidth>=992&&this.innerWidth<1200?(this.dialogWidth="65.3333%",this.styleWidth={width:"78%"}):this.innerWidth>=1200&&this.innerWidth<1920?(this.dialogWidth="49.3333%",this.styleWidth={width:"79%"}):this.innerWidth>=1920&&(this.dialogWidth="32.3333%",this.styleWidth={width:"76%"})})},methods:m()({},Object(p.b)(["loginSystem","getOauthConfig"]),{onSubmit:function(e){var t=this;this.$refs[e].validate(function(i){if(i)switch(e){case"password":t.loginSystem(t.passwordLogin);break;case"mail":var a={verify_code:t.mailLogin.verify_code,email:t.mailLogin.email};Dt.VerifyCode(a,y.checkCode).then(function(e){e&&200===e.data.code?t.loginSystem(t.mailLogin):t.mailLogin.verify_code=""})}})},getTabs:function(e){this.headerTitle=e.label,"oauth"===e.name&&this.getOauthConfig("Oauth")},refreshCode:function(){this.verifyCode=Object(O.set_random)(6,"number"),Dt.ReportSys(y.reportCode,{verify_code:this.verifyCode})},getEmailCode:function(){var e=this;if(this.disabled)this.codeValue=this.times--+" s";else{var t={email:this.mailLogin.email};Dt.SendEmail(t,y.sendEmail).then(function(t){t&&200===t.data.code&&(e.$message({type:"success",message:t.data.msg}),e.disabled=!0)})}},oauthLogin:function(e){window.open(e,"_self")},resetForm:function(e){this.$refs[e].resetFields()},resetPassword:function(e){this.emailSendVisible=!1,this.resetPasswordVisible=!0,this.passwordLogin.email=e.email,this.passwordLogin.uuid=e.uuid},autoLoginSys:function(e){this.passwordLogin.email=e.email,this.passwordLogin.password=e.password,this.passwordLogin.uuid=e.uuid,this.resetPasswordVisible=!1}}),created:function(){var e=this;setInterval(function(){e.times>=0&&e.disabled?e.getEmailCode():(e.codeValue="获取验证码",e.disabled=!1,e.times=60)},1e3)}},xi={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:e.bgStyle},[i("el-row",{staticStyle:{"padding-top":"10%"},attrs:{gutter:24}},[i("el-col",{attrs:{xl:{span:8,offset:8},lg:{span:12,offset:6},md:{span:16,offset:4},sm:{span:20,offset:"2"},xs:{span:24}}},[i("el-header",{staticStyle:{"text-align":"center","font-size":"20px","font-weight":"800"}},[e._v(e._s(e.headerTitle))]),e._v(" "),i("el-tabs",{staticStyle:{margin:"0 5px"},attrs:{type:"border-card"},on:{"tab-click":e.getTabs},model:{value:e.activeModel,callback:function(t){e.activeModel=t},expression:"activeModel"}},[i("el-tab-pane",{attrs:{label:"账号密码登录",name:"password"}},[i("el-main",[i("el-form",{ref:"password",attrs:{model:e.passwordLogin,rules:e.passwordRules}},[i("el-form-item",{attrs:{prop:"email"}},[i("el-input",{attrs:{clearable:"",type:"text",placeholder:"email",autocomplete:"off","show-icon":""},model:{value:e.passwordLogin.email,callback:function(t){e.$set(e.passwordLogin,"email","string"==typeof t?t.trim():t)},expression:"passwordLogin.email"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-s-custom"})])],2)],1),e._v(" "),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{type:"password","show-password":"",placeholder:"password",autocomplete:"off"},model:{value:e.passwordLogin.password,callback:function(t){e.$set(e.passwordLogin,"password","string"==typeof t?t.trim():t)},expression:"passwordLogin.password"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-key"})])],2)],1),e._v(" "),i("el-form-item",{attrs:{prop:"verify_code",id:"login"}},[i("el-input",{style:e.styleWidth,attrs:{clearable:"",maxlength:"6",type:"text",placeholder:"verify code",autocomplete:"off"},model:{value:e.passwordLogin.verify_code,callback:function(t){e.$set(e.passwordLogin,"verify_code","string"==typeof t?t.trim():t)},expression:"passwordLogin.verify_code"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-picture"})])],2),e._v(" "),i("div",{staticClass:"verify_code",on:{click:e.refreshCode}},[i("s-identify",{attrs:{"identify-code":e.verifyCode}})],1)],1)],1),e._v(" "),i("el-button",{staticStyle:{"margin-bottom":"-10px"},attrs:{type:"text"},on:{click:function(t){e.emailSendVisible=!e.emailSendVisible}}},[e._v("忘记密码?")]),e._v(" "),i("el-footer",{staticStyle:{"text-align":"center",height:"30px !important"}},[i("el-button",{attrs:{plain:""},on:{click:function(t){return e.resetForm("password")}}},[e._v("取 消")]),e._v(" "),i("el-button",{ref:"login",attrs:{type:"primary",plain:""},on:{click:function(t){return e.onSubmit("password")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"邮箱验证码登录/注册",name:"email"}},[i("el-main",[i("el-form",{ref:"mail",attrs:{model:e.mailLogin,rules:e.mailRules}},[i("el-form-item",{attrs:{prop:"email"}},[i("el-input",{attrs:{clearable:"",type:"text",placeholder:"email",autocomplete:"off"},model:{value:e.mailLogin.email,callback:function(t){e.$set(e.mailLogin,"email","string"==typeof t?t.trim():t)},expression:"mailLogin.email"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-s-custom"})])],2)],1),e._v(" "),i("el-form-item",{attrs:{prop:"verify_code"}},[i("el-input",{ref:"code",attrs:{clearable:"",maxlength:"8",type:"text",placeholder:"verify code",autocomplete:"off"},model:{value:e.mailLogin.verify_code,callback:function(t){e.$set(e.mailLogin,"verify_code",e._n(t))},expression:"mailLogin.verify_code"}},[i("el-button",{attrs:{slot:"append",disabled:e.disabled},on:{click:e.getEmailCode},slot:"append"},[e._v(e._s(e.codeValue))])],1)],1)],1),e._v(" "),i("el-footer",{staticStyle:{"text-align":"center",height:"30px !important"}},[i("el-button",{attrs:{plain:""},on:{click:function(t){return e.resetForm("mail")}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.onSubmit("mail")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),i("el-tab-pane",{staticStyle:{"text-align":"center"},attrs:{label:"账户授权登录/注册",name:"oauth"}},e._l(e.oauthConfig,function(t,a){return 1===t.status?i("el-button",{key:a,staticStyle:{"margin-bottom":"10px"},attrs:{plain:"",type:"primary"},on:{click:function(i){return e.oauthLogin(t.value)}}},[e._v("\n                        "+e._s(t.name.toUpperCase())+"\n                    ")]):e._e()}),1)],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.emailSendVisible,title:"邮箱确认",center:"",width:e.dialogWidth,top:"25vh","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.emailSendVisible=t}}},[i("SendEmail",{attrs:{"user-email":e.passwordLogin.email},on:{close:function(t){e.emailSendVisible=!1},resetPassword:e.resetPassword}})],1),e._v(" "),i("el-dialog",{attrs:{visible:e.resetPasswordVisible,title:"修改密码",center:"",width:e.dialogWidth,top:"25vh","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.resetPasswordVisible=t}}},[i("ResetPassword",{attrs:{"user-email":e.passwordLogin.email,"user-uuid":e.passwordLogin.uuid},on:{close:function(t){e.resetPasswordVisible=!1,e.emailSendVisible=!0},autoLoginSys:e.autoLoginSys}})],1)],1)},staticRenderFns:[]};var ki=i("VU/8")(wi,xi,!1,function(e){i("s3lu")},null,null).exports,Ci={name:"Submit",props:{reFrom:{type:String,default:function(){return""}},model:{type:Object,default:function(){}},url:{type:String,default:function(){return""}},refs:{type:Object,default:function(){}}},data:function(){return{}},methods:m()({},Object(p.b)(["saveSystemLog","checkAuth"]),{submitForm:function(e){var t=this;this.refs[e].validate(function(e){if(e)return t.checkAuth({url:t.url}),t.model.token=t.$store.state.login.token,Dt.SaveData(t.model,t.url).then(function(e){if(e&&200===e.data.code){var i={href:t.url,msg:e.data.msg,token:t.$store.state.login.token};return t.saveSystemLog(i),t.$message({type:"success",message:e.data.msg}),t.$emit("success"),!1}}),!0;t.$message({type:"warning",message:"请检查字段完整性~"})})},resetForm:function(e){this.refs[e].resetFields(),this.$emit("cancelDialog")}})},Li={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-button",{attrs:{plain:""},on:{click:function(t){return e.resetForm(e.reFrom)}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.submitForm(e.reFrom)}}},[e._v("确 定")])],1)},staticRenderFns:[]};var Si=i("VU/8")(Ci,Li,!1,function(e){i("2zr1")},"data-v-5f801402",null).exports,Mi={name:"Radio",props:{item:{type:Object,default:function(){}},url:{type:String,default:function(){return""}}},data:function(){return{table:this.$route.meta.mode}},methods:m()({},Object(p.b)(["saveSystemLog","checkAuth"]),{setStatus:function(e){var t=this;this.checkAuth({url:this.url});var i={status:parseInt(e.status),id:e.id,token:this.$store.state.login.token,act:"status"};console.log(i),Dt.SaveData(i,this.url).then(function(a){if(a&&200===a.data.code){var s={href:t.url,msg:a.data.msg,token:t.$store.state.login.token};return t.saveSystemLog(s),t.$message({type:"success",message:a.data.msg}),void t.$emit("success")}e.status=1===parseInt(i.status)?2:1},function(t){e.status=1===parseInt(i.status)?2:1,console.log(t)})}})},$i={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-tooltip",{attrs:{content:"look before you leap",placement:"top"}},[i("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){return e.setStatus(e.item)}},model:{value:e.item.status,callback:function(t){e.$set(e.item,"status",t)},expression:"item.status"}},[i("el-radio-button",{attrs:{label:"2"}},[e._v("否")]),e._v(" "),i("el-radio-button",{attrs:{label:"1"}},[e._v("是")])],1)],1)},staticRenderFns:[]};var Ti=i("VU/8")(Mi,$i,!1,function(e){i("Xo0K")},"data-v-4baf59e0",null).exports,Oi={name:"Delete",props:{item:{type:Object,default:function(){}},url:{type:String,default:function(){return""}},index:{type:Number,default:function(){return 0}},Lists:{type:Array,default:function(){return[]}},btnText:{type:String,default:function(){return"删 除"}}},data:function(){return{table:this.$route.meta.mode}},methods:m()({},Object(p.b)(["saveSystemLog","checkAuth"]),{remove:function(e,t){var i=this;this.$confirm("此操作将永远"+this.btnText.replace(" ","")+"该条记录，是否继续？",this.btnText.replace(" ","")+"记录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.checkAuth({url:i.url});var a={id:e.id,token:i.$store.state.login.token};Dt.RemoveData(a,i.url).then(function(e){if(e&&200===e.data.code){i.Lists.splice(t,1);var a={href:i.url,msg:e.data.msg,token:i.$store.state.login.token};return i.saveSystemLog(a),i.$message({type:"success",message:e.data.msg}),i.$emit("success"),!1}})}).catch(function(){i.$message({type:"info",message:"cancel delete！"})})}})},Vi={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-button",{attrs:{plain:"",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.remove(e.item,e.index)}}},[e._v(e._s(e.btnText))])},staticRenderFns:[]};var Ii=i("VU/8")(Oi,Vi,!1,function(e){i("lO8K")},"data-v-3f726207",null).exports,Ri={name:"lists",components:{Delete:Ii,Radio:Ti,Submit:Si},data:function(){return{authLists:[],authLevel:[],search:"",syncVisible:!1,labelWidth:"80px",title:"",loading:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"auth",act:"",authModel:{},cgi:{insert:y.authSave,update:y.authUpdate,remove:y.authDelete,status:y.authUpdate},rules:{name:[{required:!0,message:"权限名称不得为空",trigger:"blur"}],href:[{required:!0,message:"权限链接不得为空",trigger:"blur"}],pid:[{required:!0,message:"权限上级不得为空",trigger:"change"}],status:[{required:!0,message:"权限状态不得为空",trigger:"change"}]},btn:{},id:0}},computed:m()({},Object(p.c)(["userInfo","dialogWidth"])),methods:{success:function(){this.getAuthLists(this.id),this.syncVisible=!1},getAuthLists:function(e){var t=this;Dt.AuthLists({id:e}).then(function(e){e&&200===e.data.code&&(t.authLists=e.data.item.authLists,t.authLevel=e.data.item.selectAuth,t.loading=!1)})},load:function(e,t,i){Dt.AuthLists({id:e.id}).then(function(e){e&&200===e.data.code&&setTimeout(function(){i(e.data.item.authLists)},500)})},setAuthName:function(e){return Array(e.level+1).join("　　")+e.name},addAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.syncVisible=!0,this.title="添加权限",this.url=this.cgi.insert,this.act="add",this.authModel={name:"",href:"",status:"1",pid:"0",level:0,path:"1"},e.name&&(this.authModel.pid=e.id.toString())},updateAuth:function(e){this.syncVisible=!0,this.title="修改权限",this.url=this.cgi.update,this.authModel=e,this.act="update",this.authModel.pid=this.authModel.pid.toString()}},mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getAuthLists(this.id)})}},Di={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[e.btn.add?i("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.addAuth}},[e._v("添 加")])],1)],1):e._e(),e._v(" "),i("el-table",{attrs:{data:e.authLists.filter(function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())||t.href.includes(e.search.toLowerCase())}),"row-key":"id",lazy:"",load:e.load,"tree-props":{children:"__child",hasChildren:"hasChildren"}}},[i("el-table-column",{attrs:{label:"权限名称",prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{label:"权限链接",prop:"href"}}),e._v(" "),e.btn.edit?i("el-table-column",{attrs:{label:"显示状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("Radio",{attrs:{item:t.row,url:e.cgi.status}})]}}],null,!1,2058033001)}):e._e(),e._v(" "),i("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{placeholder:"输入关键词查询"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[t.row.level<=1&&e.btn.add?i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"mini",plain:""},on:{click:function(i){return e.addAuth(t.row)}}},[e._v("添 加")]):e._e(),e._v(" "),e.btn.edit?i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.updateAuth(t.row)}}},[e._v("修 改")]):e._e(),e._v(" "),t.row.level>0&&e.btn.del?i("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.authLists},on:{success:e.success}}):e._e()]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.syncVisible,modal:!0,center:!0,width:e.dialogWidth},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.authModel,rules:e.rules}},[i("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"权限名称"},model:{value:e.authModel.name,callback:function(t){e.$set(e.authModel,"name",t)},expression:"authModel.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限链接",prop:"href"}},[i("el-input",{attrs:{placeholder:"/admin/auth/lists"},model:{value:e.authModel.href,callback:function(t){e.$set(e.authModel,"href",t)},expression:"authModel.href"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限上级",prop:"pid"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"权限上级",filterable:""},model:{value:e.authModel.pid,callback:function(t){e.$set(e.authModel,"pid",t)},expression:"authModel.pid"}},["0"===e.authModel.pid?i("el-option",{attrs:{label:"默认权限",value:"0",selected:""}}):e._e(),e._v(" "),e._l(e.authLevel,function(t,a){return i("el-option",{key:a,attrs:{disabled:t.id===e.authModel.id||t.pid===e.authModel.id,label:e.setAuthName(t),value:t.id.toString()}})})],2)],1),e._v(" "),"add"===e.act?i("el-form-item",{attrs:{label:"权限状态",prop:"status"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:e.authModel.status,callback:function(t){e.$set(e.authModel,"status",t)},expression:"authModel.status"}},[i("el-radio-button",{attrs:{label:"2"}},[e._v("关闭")]),e._v(" "),i("el-radio-button",{attrs:{label:"1"}},[e._v("开启")])],1)],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.authModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var Fi=i("VU/8")(Ri,Di,!1,function(e){i("qi5/")},"data-v-8829b504",null).exports,Ni={name:"lists",components:{Submit:Si,Delete:Ii,Radio:Ti},data:function(){return{roleLists:[],loading:!0,loadingText:"玩命加载中。。。",authLists:[],defaultChecked:[],search:"",limit:15,page:1,total:0,title:"",syncVisible:!1,labelWidth:"100px",url:"",refs:this.$refs,reFrom:"role",act:"",roleModel:{},cgi:{insert:y.roleSave,update:y.roleUpdate,remove:y.roleDelete,status:y.roleUpdate},btn:{}}},computed:m()({},Object(p.c)(["userInfo","dialogWidth"])),methods:{success:function(){this.getRoleLists(this.page,this.limit),this.syncVisible=!1},getRoleLists:function(e,t){var i=this,a={page:e,limit:t};Dt.RoleLists(a).then(function(e){e&&200===e.data.code&&(i.roleLists=e.data.item.role.data,i.total=e.data.item.role.total,i.authLists=e.data.item.auth,i.loading=!1)})},sizeChange:function(e){this.limit=e,this.getRoleLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getRoleLists(this.page,this.limit)},addRole:function(){this.title="添加角色",this.syncVisible=!0,this.url=this.cgi.insert,this.act="add",this.defaultChecked=[],this.roleModel={role_name:"",auth_ids:[],auth_url:[],status:"1",created_at:V.a.get_timestamp(),updated_at:V.a.get_timestamp()}},handleChange:function(e,t,i){var a=this;switch(t){case"left":i.map(function(e){a.defaultChecked.splice(a.defaultChecked.indexOf(e),1)});break;case"right":i.map(function(e){a.defaultChecked.push(parseInt(e))})}this.roleModel.auth_ids=this.defaultChecked},updateRole:function(e){var t=this;this.syncVisible=!0,this.title="修改角色",this.url=this.cgi.update,this.defaultChecked=[],this.act="update",JSON.parse(e.auth_ids).map(function(e){t.defaultChecked.push(parseInt(e))}),this.roleModel=e,this.roleModel.auth_ids=this.defaultChecked}},mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getRoleLists(this.page,this.limit)})}},zi={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[e.btn.add?i("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.addRole}},[e._v("添 加")])],1)],1):e._e(),e._v(" "),i("el-table",{attrs:{data:e.roleLists.filter(function(t){return!e.search||t.role_name.includes(e.search)})}},[i("el-table-column",{attrs:{label:"#ID",prop:"id",sortable:"",align:"center",width:"100px"}}),e._v(" "),i("el-table-column",{attrs:{label:"角色名称",prop:"role_name",align:"center"}}),e._v(" "),e.btn.edit?i("el-table-column",{attrs:{label:"显示状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("Radio",{attrs:{item:t.row,url:e.cgi.status}})]}}],null,!1,2058033001)}):e._e(),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"created_at",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"修改时间",sortable:"",prop:"updated_at",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{placeholder:"请输入关键词查询"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[e.btn.edit?i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.updateRole(t.row)}}},[e._v("修 改")]):e._e(),e._v(" "),e.btn.del?i("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.roleLists},on:{success:e.success}}):e._e()]}}])})],1),e._v(" "),i("div",{staticStyle:{margin:"25px 0"}},[i("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.syncVisible,width:e.dialogWidth,center:!0},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.roleModel,"label-position":"left"}},[i("el-form-item",{attrs:{label:"角色名称：",prop:"role_name",rules:[{required:!0,message:"角色名称不得为空",trigger:"blur"}]}},[i("el-input",{attrs:{placeholder:"角色名称"},model:{value:e.roleModel.role_name,callback:function(t){e.$set(e.roleModel,"role_name",t)},expression:"roleModel.role_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限列表：",required:"",prop:"auth_ids"}},[i("el-transfer",{attrs:{titles:["所有","拥有"],"button-texts":["移除","添加"],data:e.authLists,filterable:""},on:{change:e.handleChange},model:{value:e.defaultChecked,callback:function(t){e.defaultChecked=t},expression:"defaultChecked"}})],1),e._v(" "),"add"===e.act?i("el-form-item",{attrs:{required:"",label:"状态：",prop:"status"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:e.roleModel.status,callback:function(t){e.$set(e.roleModel,"status",t)},expression:"roleModel.status"}},[i("el-radio-button",{attrs:{label:"0"}},[e._v("关闭")]),e._v(" "),i("el-radio-button",{attrs:{label:"1"}},[e._v("开启")])],1)],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.roleModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var Ui=i("VU/8")(Ni,zi,!1,function(e){i("0XON")},"data-v-711d1897",null).exports,Ei={name:"Upload",props:{avatar_url:{type:String,default:function(){return""}},username:{type:String,default:function(){return""}},size:{type:[Number,String],default:function(){return 100}},index:{type:[Number,String],default:function(){return 1}},showFile:{type:Boolean,default:function(){return!1}},sizeLimit:{type:Number,default:function(){return 2}}},data:function(){return{fileData:{},headers:{},uploadUrl:"https://www.fanglonger.com/api/"+y.fileUpload.replace("/","")}},methods:{uploadSuccess:function(e){if(e&&200===e.code)return this.$message({type:"success",message:e.msg}),void this.$emit("uploadSuccess",e.item.src);this.$message({type:"warning",message:e.msg})},beforeUpload:function(e){var t=e.type;return["image/jpg","image/gif","image/png","image/jpeg"].includes(t)?!(e.size>1024*this.sizeLimit*1024)||(this.$message({type:"warning",message:"upload image size error"}),!1):(this.$message({type:"warning",message:"upload image format error"}),!1)}},created:function(){this.fileData.token=this.$store.state.login.token,this.fileData.rand=!0,this.headers.Authorization=""+V.a.set_password(V.a.set_random(32),V.a.set_random(12))+this.fileData.token+V.a.set_password(V.a.set_random(32),V.a.set_random(12))}},qi={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{attrs:{action:e.uploadUrl,data:e.fileData,headers:e.headers,"show-file-list":e.showFile,index:e.index,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload}},[i("el-avatar",{attrs:{src:e.avatar_url,alt:e.username,fit:"cover",size:e.size}})],1)},staticRenderFns:[]};var Ai=i("VU/8")(Ei,qi,!1,function(e){i("aqRx")},"data-v-6eaf0600",null).exports,ji={name:"lists",components:{Submit:Si,Delete:Ii,Radio:Ti,Upload:Ai},data:function(){return{userLists:[],roleLists:[],page:1,limit:15,total:0,search:"",title:"",syncVisible:!1,modal:!0,labelWidth:"80px",loading:!0,center:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"user",act:"",userModel:{},cgi:{insert:y.userSave,update:y.userUpdate,remove:y.userDelete,status:y.userUpdate},rules:{username:[{required:!0,message:"管理员名称不得为空",trigger:"blur"}],password:[{required:!0,message:"密码不得为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不得为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],phone_number:[{required:!0,message:"手机号不得为空",trigger:"blur"}],role_id:[{required:!0,message:"角色不得为空",trigger:"change"}]},btn:{}}},computed:m()({},Object(p.c)(["userInfo","dialogWidth"])),methods:{success:function(){this.getUserLists(this.page,this.limit),localStorage.setItem("token",""),this.syncVisible=!1},uploadSuccess:function(e){this.userModel.avatar_url=e},getUserLists:function(e,t){var i=this,a={page:e,limit:t};Dt.UserLists(a).then(function(e){e&&200===e.data.code&&(i.userLists=e.data.item.data,i.total=e.data.item.total,i.roleLists=e.data.item.roleLists,i.loading=!1)})},sizeChange:function(e){this.limit=e,this.getUserLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getUserLists(this.page,this.limit)},addUser:function(){this.title="添加管理员",this.syncVisible=!0,this.act="add",this.userModel={username:"",email:"",password:"",salt:V.a.set_random(),status:"1",role_id:1,phone_number:"",created_at:V.a.get_timestamp(),updated_at:V.a.get_timestamp(),remember_token:""},this.url=this.cgi.insert},updateUser:function(e){this.title="修改管理员",this.syncVisible=!0,this.userModel=e,this.url=this.cgi.update,this.act="update"}},mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getUserLists(this.page,this.limit)})}},Wi={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[e.btn.add&&e.userInfo.role_id===e.md5("1")?i("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.addUser}},[e._v("添 加")])],1)],1):e._e(),e._v(" "),i("el-table",{attrs:{data:e.userLists.filter(function(t){return!e.search||t.username.toLowerCase().includes(e.search.toLowerCase())||t.email.toLowerCase().includes(e.search.toLowerCase())||t.phone_number.toLowerCase().includes(e.search.toLowerCase())})}},[i("el-table-column",{attrs:{label:"#",prop:"id",width:"80",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"管理员",prop:"username",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.avatar_url,fit:"fill",title:e.row.username,"preview-src-list":[e.row.avatar_url]}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"邮箱",prop:"email",align:"center","show-tooltip-when-overflow":!0}}),e._v(" "),i("el-table-column",{attrs:{label:"手机号",prop:"phone_number",align:"center","show-tooltip-when-overflow":!0}}),e._v(" "),e.userInfo.role_id===e.md5("1")?i("el-table-column",{attrs:{label:"允许登录",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("Radio",{attrs:{item:t.row,url:e.cgi.status}})]}}],null,!1,2058033001)}):e._e(),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",prop:"created_at",width:"160",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"修改时间",prop:"updated_at",width:"160",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"right",width:"260"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{placeholder:"请输入关键词查询"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[e.btn.edit?i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.updateUser(t.row)}}},[e._v("修 改")]):e._e(),e._v(" "),e.btn.del?i("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.userLists},on:{success:e.success}}):e._e()]}}])})],1),e._v(" "),i("div",{staticStyle:{margin:"25px 0"}},[i("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,width:e.dialogWidth,visible:e.syncVisible,modal:e.modal,center:e.center},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.userModel,"label-width":"100px",rules:e.rules,"label-position":"left"}},[i("el-form-item",{attrs:{label:"管理员：",prop:"username"}},[i("el-input",{attrs:{readonly:"edit"===e.act,placeholder:"管理员名称"},model:{value:e.userModel.username,callback:function(t){e.$set(e.userModel,"username",t)},expression:"userModel.username"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"flex","align-items":"center",position:"relative"},attrs:{label:"用户头像：",prop:"avatar_url",id:"avatar",required:""}},[i("Upload",{attrs:{avatar_url:e.userModel.avatar_url,username:e.userModel.username},on:{uploadSuccess:e.uploadSuccess}})],1),e._v(" "),i("el-form-item",{attrs:{label:"密码：",prop:"password"}},[i("el-input",{attrs:{"show-password":"",type:"password",placeholder:"密码"},model:{value:e.userModel.password,callback:function(t){e.$set(e.userModel,"password",t)},expression:"userModel.password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[i("el-input",{attrs:{type:"email",placeholder:"邮箱"},model:{value:e.userModel.email,callback:function(t){e.$set(e.userModel,"email",t)},expression:"userModel.email"}})],1),e._v(" "),"update"===e.act?i("el-form-item",{attrs:{label:"手机号：",prop:"phone_number"}},[i("el-input",{attrs:{type:"email",placeholder:"手机号"},model:{value:e.userModel.phone_number,callback:function(t){e.$set(e.userModel,"phone_number",t)},expression:"userModel.phone_number"}})],1):e._e(),e._v(" "),e.userInfo.role_id===e.md5("1")?i("el-form-item",{attrs:{label:"角色：",prop:"role_id"}},[i("el-select",{staticStyle:{width:"100%"},model:{value:e.userModel.role_id,callback:function(t){e.$set(e.userModel,"role_id",t)},expression:"userModel.role_id"}},e._l(e.roleLists,function(e,t){return i("el-option",{key:t,attrs:{label:e.role_name,value:e.id}})}),1)],1):e._e(),e._v(" "),"add"===e.act?i("el-form-item",{attrs:{label:"显示状态：",prop:"status"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:e.userModel.status,callback:function(t){e.$set(e.userModel,"status",t)},expression:"userModel.status"}},[i("el-radio-button",{attrs:{label:"2"}},[e._v("关闭")]),e._v(" "),i("el-radio-button",{attrs:{label:"1"}},[e._v("开启")])],1)],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.userModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var Pi=i("VU/8")(ji,Wi,!1,function(e){i("vr9b")},null,null).exports,Bi={name:"lists",components:{Submit:Si,Upload:Ai},data:function(){return{loading:!0,loadingText:"玩命加载中。。。",userCenter:{u_name:"",local:[],ip_address:[],notice_status:"",user_status:"",desc:"",tags:[],u_type:""},reFrom:"center",refs:this.$refs,url:y.saveUserCenter,fileData:{},headers:{},cgi:{save:""},rules:{avatarUrl:[{required:!0,message:"用户头像不得为空",trigger:"change"}],u_name:[{required:!0,message:"用户名称不得为空",trigger:"blur"}],u_type:[{required:!0,message:"账户类型不得为空",trigger:"blur"}],local:[{required:!0,message:"居住地址不得为空",trigger:"change"}],ip_address:[{required:!0,message:"用户地址不得为空",trigger:"change"}],desc:[{required:!0,message:"个人介绍不得为空",trigger:"blur"}],tags:[{required:!0,message:"用户标签不得为空",trigger:"blur"}],notice_status:[{required:!0,message:"站内通知",trigger:"change"}],user_status:[{required:!0,message:"账号信息",trigger:"change"}]},inputVisible:!1,inputValue:"",pid:1,options:[],props:{value:"name",label:"name"}}},computed:m()({},Object(p.c)(["userInfo"])),methods:{handleClose:function(e){this.userCenter.tags.splice(this.userCenter.tags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.focus()})},setLocal:function(e){return e.length>0?e.join(",").replace(new RegExp(/,/g)," / "):e},handleInputConfirm:function(){var e=this.inputValue;if(e&&this.userCenter.tags.indexOf(e)<0){if(this.userCenter.tags.length+1>4)return void this.$message.warning("User tags must not exceed four");this.userCenter.tags.push(e)}this.inputVisible=!1,this.inputValue=""},getCity:function(e){var t=this;Dt.AreaLists({parent_id:e},y.areaLists).then(function(e){e&&200===e.data.code&&t.setOptions(e.data.item)})},setOptions:function(e){for(var t in e)0===e[t].children.length&&delete e[t].children,this.setOptions(e[t].children);this.options=e},getUserCenter:function(){var e=this;this.loading=!0,Dt.UserCenter([]).then(function(t){t&&200===t.data.code&&(e.loading=!1,e.userCenter=t.data.item,e.userCenter.user_status=e.userCenter.user_status.toString(),e.userCenter.notice_status=e.userCenter.notice_status.toString(),e.getCity(e.pid))})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.$nextTick(function(){this.getUserCenter()})}},Hi={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{xl:8,lg:8}},[i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{attrs:{label:"个人简介"}}),e._v(" "),i("el-form",{attrs:{id:"information"}},[i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-avatar",{attrs:{src:e.userInfo.avatar_url,size:100,alt:e.userInfo.username}})],1),e._v(" "),i("el-form-item",[i("i",{staticClass:"el-icon-user"}),e._v(" "),i("span",{domProps:{innerHTML:e._s(e.userCenter.u_name)}})]),e._v(" "),i("el-form-item",[i("i",{staticClass:"el-icon-message"}),e._v(" "),i("span",{domProps:{innerHTML:e._s(e.userCenter.email)}})]),e._v(" "),i("el-form-item",[i("i",{staticClass:"el-icon-location-information"}),e._v(" "),i("span",{domProps:{innerHTML:e._s(e.setLocal(e.userCenter.local))}})]),e._v(" "),i("el-form-item",[i("i",{staticClass:"el-icon-aim"}),e._v(" "),i("span",{domProps:{innerHTML:e._s(e.userCenter.desc)}})]),e._v(" "),i("el-form-item",[i("i",{staticClass:"el-icon-collection-tag"}),e._v(" "),e._l(e.userCenter.tags,function(t){return i("el-button",{key:t,staticStyle:{"margin-bottom":"5px"},attrs:{size:"mini",plain:"",type:"primary"}},[e._v(e._s(t))])})],2),e._v(" "),i("el-form-item",[i("i",{class:"1"===e.userCenter.notice_status?"el-icon-microphone":"el-icon-turn-off-microphone"}),e._v(" "),i("el-button",{attrs:{size:"mini",type:"1"===e.userCenter.notice_status?"primary":"info",plain:""}},[e._v(e._s("1"===e.userCenter.notice_status?"启用站内通知":"禁用站内通知"))])],1),e._v(" "),i("el-form-item",[i("i",{class:"1"===e.userCenter.user_status?"el-icon-microphone":"el-icon-turn-off-microphone"}),e._v(" "),i("el-button",{attrs:{size:"mini",type:"1"===e.userCenter.user_status?"primary":"info",plain:""}},[e._v(e._s("1"===e.userCenter.user_status?"启用账号通知":"禁用账号通知"))])],1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{xl:16,lg:16}},[i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{attrs:{label:"信息展示"}}),e._v(" "),i("el-form",{ref:"center",staticStyle:{"margin-left":"20px"},attrs:{model:e.userCenter,"label-width":"100px","label-position":"left",rules:e.rules}},[i("el-form-item",{staticStyle:{display:"flex","align-items":"center",position:"relative"},attrs:{label:"头像：",id:"avatar",required:""}},[i("el-avatar",{attrs:{src:e.userInfo.avatar_url,size:100,alt:e.userInfo.username}})],1),e._v(" "),i("el-form-item",{attrs:{label:"用户名：",prop:"u_name"}},[i("el-input",{attrs:{placeholder:"用户名"},model:{value:e.userCenter.u_name,callback:function(t){e.$set(e.userCenter,"u_name",t)},expression:"userCenter.u_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"居住地址：",prop:"local"}},[i("el-cascader",{staticStyle:{width:"100%"},attrs:{props:e.props,options:e.options,filterable:""},model:{value:e.userCenter.local,callback:function(t){e.$set(e.userCenter,"local",t)},expression:"userCenter.local"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"所在地：",prop:"ip_address"}},[i("el-cascader",{staticStyle:{width:"100%"},attrs:{props:e.props,options:e.options,filterable:""},model:{value:e.userCenter.ip_address,callback:function(t){e.$set(e.userCenter,"ip_address",t)},expression:"userCenter.ip_address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"座右铭：",prop:"desc"}},[i("el-input",{attrs:{type:"textarea",resize:"none",rows:"3","show-word-limit":"",maxlength:"32",placeholder:"这个人很懒，什么也没有留下"},model:{value:e.userCenter.desc,callback:function(t){e.$set(e.userCenter,"desc",t)},expression:"userCenter.desc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"个人标签：",prop:"tags"}},[e._l(e.userCenter.tags,function(t){return i("el-tag",{key:t,staticStyle:{"margin-left":"10px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return e.handleClose(t)}}},[e._v("\n                                "+e._s(t)+"\n                            ")])}),e._v(" "),e.inputVisible?i("el-input",{ref:"saveTagInput",staticStyle:{width:"100px"},attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):i("el-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Tag")])],2),e._v(" "),i("el-form-item",{attrs:{label:"站内通知：",prop:"notice_status"}},[i("el-tooltip",{attrs:{effect:"dark",content:"系统性的通知或者更新消息",placement:"top-start"}},[i("el-switch",{attrs:{"active-value":"1","inactive-value":"2"},model:{value:e.userCenter.notice_status,callback:function(t){e.$set(e.userCenter,"notice_status",t)},expression:"userCenter.notice_status"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"账号信息：",prop:"user_status"}},[i("el-tooltip",{attrs:{effect:"dark",content:"帐号变更的通知消息",placement:"top-start"}},[i("el-switch",{attrs:{"active-value":"1","inactive-value":"2"},model:{value:e.userCenter.user_status,callback:function(t){e.$set(e.userCenter,"user_status",t)},expression:"userCenter.user_status"}})],1)],1),e._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("Submit",{attrs:{reFrom:e.reFrom,url:e.url,model:e.userCenter,refs:e.refs}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Ji=i("VU/8")(Bi,Hi,!1,function(e){i("6Q7T")},null,null).exports,Gi={name:"lists",components:{Submit:Si,Upload:Ai},data:function(){return{labelWidth:"80px",loading:!1,loadingText:"玩命加载中。。。",url:y.userUpdate,refs:this.$refs,reFrom:"user",showPassword:!1,userModel:{username:"",email:"",password:"",salt:V.a.set_random(),status:1,role_id:2,phone_number:"",created_at:V.a.get_timestamp(),updated_at:V.a.get_timestamp(),avatar_url:""},rules:{username:[{required:!0,message:"登陆账号不得为空",trigger:"blur"}],password:[{required:!0,message:"密码不得为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不得为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],status:[{required:!0,message:"用户状态不得为空",trigger:"change"}],avatar_url:[{required:!0,message:"用户头像不得为空",trigger:"change"}]}}},computed:m()({},Object(p.c)(["userInfo"])),methods:{userBind:function(){var e=this;Dt.UserBind({remember_token:this.userInfo.token}).then(function(t){t&&200===t.data.code&&(e.userModel=t.data.item)})},uploadSuccess:function(e){this.userModel.avatar_url=e}},mounted:function(){this.$nextTick(function(){this.userBind()})},created:function(){this.userModel.username=this.userInfo.username,this.userModel.avatar_url=this.userInfo.avatar_url,this.userModel.remember_token=this.userInfo.token}},Yi={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.userModel,rules:e.rules}},[i("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[i("el-input",{attrs:{placeholder:"管理员名称"},model:{value:e.userModel.username,callback:function(t){e.$set(e.userModel,"username","string"==typeof t?t.trim():t)},expression:"userModel.username"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"用户头像",prop:"avatar_url"}},[i("Upload",{attrs:{avatar_url:e.userModel.avatar_url,username:e.userModel.username},on:{uploadSuccess:e.uploadSuccess}})],1),e._v(" "),i("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[i("el-input",{attrs:{type:e.showPassword?"text":"password",placeholder:"请输入你的密码（当前展示密码为加密后的密码）",readonly:!e.showPassword},model:{value:e.userModel.password,callback:function(t){e.$set(e.userModel,"password",t)},expression:"userModel.password"}},[i("el-button",{attrs:{slot:"append",icon:e.showPassword?"el-icon-open":"el-icon-turn-off"},on:{click:function(t){e.showPassword=!e.showPassword}},slot:"append"},[e._v("\n                    "+e._s(e.showPassword?"显 示":"隐 藏")+"\n                ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"用户邮箱",prop:"email"}},[i("el-input",{attrs:{type:"email",placeholder:"邮箱（请填写正确的邮箱，便于后期密码修改，密码找回）"},model:{value:e.userModel.email,callback:function(t){e.$set(e.userModel,"email","string"==typeof t?t.trim():t)},expression:"userModel.email"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"用户手机",prop:"phone_number"}},[i("el-input",{attrs:{placeholder:"手机号（请填写正确的手机号，便于后期密码修改，密码找回）"},model:{value:e.userModel.phone_number,callback:function(t){e.$set(e.userModel,"phone_number",e._n(t))},expression:"userModel.phone_number"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"允许登录",prop:"status"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:e.userModel.status,callback:function(t){e.$set(e.userModel,"status",t)},expression:"userModel.status"}},[i("el-radio-button",{attrs:{label:"2"}},[e._v("关闭")]),e._v(" "),i("el-radio-button",{attrs:{label:"1"}},[e._v("开启")])],1)],1),e._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.userModel,url:e.url,refs:e.refs}})],1)],1)],1)},staticRenderFns:[]};var Zi=i("VU/8")(Gi,Yi,!1,function(e){i("L1Z8")},"data-v-3b0aa70a",null).exports,Qi={name:"log",components:{Delete:Ii},data:function(){return{logLists:[],page:1,limit:15,total:0,search:"",loading:!0,loadingText:"玩命加载中。。。",cgi:{remove:y.logDelete},btn:{}}},computed:m()({},Object(p.c)(["userInfo"])),methods:{success:function(){this.getLogLists(this.page,this.limit)},getLogLists:function(e,t){var i=this;Dt.LogLists({page:e,limit:t}).then(function(e){e&&200===e.data.code&&(i.logLists=e.data.item.data,i.total=e.data.item.total,i.loading=!1)})},sizeChange:function(e){this.limit=e,this.getLogLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getLogLists(this.page,this.limit)}},mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getLogLists(this.page,this.limit)})}},Ki={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-table",{attrs:{data:e.logLists.filter(function(t){return!e.search||t.username.toLowerCase().includes(e.search.toLowerCase())||t.ip_address.includes(e.search.toLowerCase())||t.log.includes(e.search.toLowerCase())})}},[i("el-table-column",{attrs:{label:"#",prop:"id",sortable:"",width:"100px"}}),e._v(" "),i("el-table-column",{attrs:{label:"执行人",prop:"username",sortable:"",width:"150px"}}),e._v(" "),i("el-table-column",{attrs:{label:"日志信息","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-link",{attrs:{type:"success",href:t.row.url,target:"_blank"}},[e._v("["+e._s(t.row.url)+"]")]),e._v("　"+e._s(t.row.log)+"　\n            ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"地址",width:"200px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.local)+"【"+e._s(t.row.ip_address)+"】\n            ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"created_at",width:"200px"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"right",width:"200px"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{placeholder:"请输入关键字查询"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[e.btn.del?i("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.logLists},on:{success:e.success}}):e._e()]}}])})],1),e._v(" "),i("div",{staticStyle:{margin:"25px 0"}},[i("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var Xi=i("VU/8")(Qi,Ki,!1,function(e){i("wx8U")},"data-v-1dd7a35b",null).exports,ea=i("gZhU");i("c6RA"),i("aGTD"),i("UM8r"),i("Yokd"),i("THjC"),i("Kk9m"),i("fo6W"),i("fo6W"),i("soCA"),i("vq+x");var ta={name:"lists",components:{codemirror:ea.codemirror},data:function(){return{props:{label:"label",children:"children",isLeaf:!1},options:{mode:"text/x-php",tabSize:4,lineNumbers:!0,theme:"monokai",extraKeys:{"Ctrl-Space":"autocomplete"},lineWrapping:!1,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],indentWithTabs:!0,smartIndent:!0,matchBrackets:!0,cursorHeight:1,autoRefresh:!0,styleActiveLine:!0,readOnly:!0,showCursorWhenSelecting:!0},highlight:!0,fileLists:[],path:"storage_path",loading:!0,loadingText:"玩命加载中。。。",filterText:"",fileModel:{content:"",path:""}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},computed:m()({},Object(p.c)(["currSystemLogObj"])),methods:m()({},Object(p.b)(["addCurrSystemLogObj"]),{filterNode:function(e,t){return!e||-1!==t.label.toLowerCase().indexOf(e.toLowerCase())},getFileLists:function(e){var t=this,i={path:e,basename:"/logs//",sort:"time",sort_order:"asc"};Dt.FileLists(i).then(function(e){e&&200===e.data.code&&(t.fileLists=e.data.item,t.getFileContent(t.fileLists[t.fileLists.length-1]),t.loading=!1)})},getFileContent:function(e){var t=this,i={path:e.path};this.fileModel.name=e.label,Dt.FileRead(i).then(function(e){e&&200===e.data.code&&(t.fileModel.content=e.data.item.content,t.addCurrSystemLogObj(t.fileModel))})}}),mounted:function(){this.$nextTick(function(){this.getFileLists(this.path)})}},ia={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xl:{span:5},lg:{span:5},md:{span:24},sm:{span:24},xs:{span:24}}},[i("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"输入关键字搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),i("el-tree",{ref:"tree",staticStyle:{"background-color":"#393d49"},attrs:{data:e.fileLists,"highlight-current":e.highlight,props:e.props,"filter-node-method":e.filterNode,"node-key":e.props.id},on:{"node-click":e.getFileContent}})],1),e._v(" "),i("el-col",{attrs:{xl:{span:18,push:1},lg:{span:18,push:1},md:{span:24},sm:{span:24},xs:{span:24}}},[i("el-form",{attrs:{model:e.fileModel}},[i("el-form-item",{staticStyle:{"margin-left":"-30px !important"}},[i("el-tabs",{attrs:{type:"border-card"},model:{value:e.fileModel.name,callback:function(t){e.$set(e.fileModel,"name",t)},expression:"fileModel.name"}},[i("el-tab-pane",{key:e.fileModel.name,attrs:{label:e.fileModel.name,name:e.fileModel.name}}),e._v(" "),i("el-card",{attrs:{shadow:"always"}},[i("codemirror",{staticStyle:{"line-height":"20px"},attrs:{value:e.fileModel.content,options:e.options}})],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var aa=i("VU/8")(ta,ia,!1,function(e){i("Jom/")},"data-v-ba820a52",null).exports;i("c6RA"),i("JGZi"),i("PgJU"),i("jQeI"),i("f6fj"),i("ezqs"),i("Mixr"),i("5IAE"),i("aGTD"),i("UM8r"),i("Yokd"),i("THjC"),i("Kk9m"),i("fo6W"),i("fo6W"),i("soCA"),i("vq+x");var sa={name:"lists",components:{Submit:Si,codemirror:ea.codemirror},data:function(){return{props:{label:"label",children:"children",isLeaf:!1},checkBoxArr:[{id:4,value:"读取"},{id:2,value:"写入"},{id:1,value:"执行"}],all:[],user:[],common:[],all_id:0,user_id:0,common_id:0,chmodModel:{auth:parseInt(this.all_id+""+this.user_id+this.common_id),path:""},compressionModel:{docLists:[],resource:"",path:""},mode:{markdown:"text/markdown",php:"text/x-php",xml:"text/xml",json:"application/ld+json",sql:"text/x-mysql"},options:{mode:"text/x-php",tabSize:4,lineNumbers:!0,theme:"monokai",extraKeys:{"Ctrl-Space":"autocomplete"},lineWrapping:!1,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],indentWithTabs:!0,smartIndent:!0,matchBrackets:!0,cursorHeight:1,autoRefresh:!0,styleActiveLine:!0,readOnly:!0},menuVisible:!1,highlight:!0,fileLists:[],path:"base_path",activeFileTabName:null,title:"default",syncVisible:!1,labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"file",fileObject:{},showRightBtn:{add:!0,rename:!0,remove:!0,compression:!0,DeCompression:!1,auth:!0,download:!0,upload:!0},fileModel:{content:"",path:""},fileList:[],fileSyncVisible:!1,fileData:{},headers:{},showIdea:!0,cgi:{update:y.fileUpdate,chmod:y.fileChmod,uploadUrl:"https://www.fanglonger.com/api/"+y.fileUpload.replace("/","")},imgVisible:!1,dialogImageUrl:"",dialogVideoUrl:"",dialogTitle:"",filterText:"",scrollTop:0,btn:{}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},computed:m()({},Object(p.c)(["fileTabs","currFileObj","userInfo","dialogWidth"])),methods:m()({},Object(p.b)(["addFileTabs","deleteFileTabs","addCurrFileObj","saveSystemLog"]),{success:function(){this.addCurrFileObj(this.fileModel),this.getFileLists(this.path),this.syncVisible=!1},filterNode:function(e,t){return!e||-1!==t.label.toLowerCase().indexOf(e.toLowerCase())},getFileLists:function(e){var t=this,i={path:e,basename:"/",sort:"type",sort_order:"asc"};Dt.FileLists(i).then(function(e){e&&200===e.data.code&&(t.fileLists=e.data.item,t.loading=!1)})},rightClick:function(e,t,i,a){this.menuVisible=!1,this.menuVisible=!0;var s=document.querySelector("#menu"),n=document.getElementById("tree");switch(this.scrollTop=V.a.get_scroll_top(),document.addEventListener("click",this.foo),s.style.left=n.offsetWidth+50+"px",this.scrollTop>=229?s.style.top=e.clientY+this.scrollTop-235+"px":s.style.top=e.clientY+this.scrollTop-180+"px",this.fileObject=t,this.fileObject.fileType){case"file":this.showRightBtn.DeCompression=!1,this.showRightBtn.download=!0;var r=this.fileObject.label.split(".")[1];["tar","zip","7z","TAR","ZIP","7Z"].includes(r)&&(this.showRightBtn.DeCompression=!0);break;case"dir":this.showRightBtn.download=!1,this.showRightBtn.DeCompression=!1}},foo:function(){this.menuVisible=!1,document.removeEventListener("click",this.foo)},goto:function(e){var t=this.fileTabs;for(var i in t)if(t[i].label===e.label){this.fileModel.content=t[i].content,this.fileModel.path=t[i].path;var a={content:this.fileModel.content,path:this.fileModel.path,name:t[i].name};this.addCurrFileObj(a)}},removeTabName:function(e){var t=this;this.fileTabs.forEach(function(i,a){if(i.name===e){var s=t.fileTabs[a+1]||t.fileTabs[a-1];if(s){t.activeFileTabName=s.name,t.fileModel.content=s.content;var n={content:s.content,path:s.path,name:s.name};t.addCurrFileObj(n),t.deleteFileTabs(e)}}})},getFileContent:function(e){var t=this;if("file"!==e.fileType)return!1;var i=e.label.split(".")[1];this.dialogTitle=e.label;var a=this.userInfo.local+"storage"+e.path.substr(e.path.indexOf("public")+6,e.path.length-e.path.indexOf("public"));if(i&&["png","jpg","jpeg","gif"].includes(i.toLowerCase()))return this.dialogVideoUrl="",this.dialogImageUrl=a,this.imgVisible=!0,!1;if(i&&["mp4","flv"].includes(i.toLowerCase()))return this.dialogImageUrl="",this.dialogVideoUrl=a,this.imgVisible=!0,!1;if(i&&["xls","csv","docx","word","tar","zip","7z"].includes(i.toLowerCase()))return this.$confirm("是否下载文件【"+e.label+"】到本地",{showClose:!1,center:!0}).then(function(){window.location.href=a}).catch(function(){}),!1;this.setOptionsMode(i),this.showIdea=!0,this.activeFileTabName=e.size.toString();var s={path:e.path},n={};this.url=this.cgi.update,n.label=e.label,n.name=e.size.toString(),n.path=e.path,Dt.FileRead(s).then(function(i){i&&200===i.data.code&&(t.fileModel.content=i.data.item.content,t.fileModel.path=e.path,n.content=t.fileModel.content,t.addCurrFileObj(n),t.addFileTabs(n))})},setOptionsMode:function(e){switch(e){case"xml":this.options.mode=this.mode.xml;break;case"md":this.options.mode=this.mode.markdown;break;case"json":case"lock":this.options.mode=this.mode.json;break;case"sql":this.options.mode=this.mode.sql;break;default:this.options.mode=this.mode.php}},renameFile:function(){var e=this,t={oldFile:this.fileObject.path};this.$prompt("请输入新的文件名","["+this.fileObject.label+"] 重命名",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(i){var a=i.value;if(""===a||null===a||"null"===a||"undefined"===a)return e.$message.warning("File name cannot be empty"),!1;t.newFile=t.oldFile.replace(e.fileObject.label,a),Dt.FileRename(t).then(function(t){if(t&&200===t.data.code){e.fileObject.name=a,e.$message({type:"success",message:t.data.msg+"："+a});var i={href:y.fileSave,msg:t.data.msg+"："+a};e.saveSystemLog(i),e.getFileLists(e.path)}})}).catch(function(){e.$message({type:"info",message:"cancel entry"})})},deleteFile:function(){var e=this;this.$confirm("此操作将永远删除该条记录，是否继续？","删除记录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={path:e.fileObject.path};Dt.FileDelete(t).then(function(t){if(t&&200===t.data.code){var i={msg:t.data.msg+"："+e.fileObject.path,href:y.fileDelete};e.saveSystemLog(i),e.getFileLists(e.path),e.$message({type:"success",message:t.data.msg+"："+e.fileObject.label})}})}).catch(function(){e.$message({type:"info",message:"cancel remove！"})})},addFile:function(){var e=this,t={};this.$prompt("请输入文件名","新建文件",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(i){var a=i.value;if(""===a||null===a||"null"===a||"undefined"===a)return e.$message.warning("File name cannot be empty"),!1;"file"===e.fileObject.fileType?t.path=e.fileObject.path.replace(e.fileObject.label,a):"dir"===e.fileObject.fileType&&(t.path=e.fileObject.path+"/"+a),Dt.FileSave(t).then(function(i){if(i&&200===i.data.code){var a={msg:i.data.msg+"："+t.path,href:y.fileRename};e.saveSystemLog(a),e.getFileLists(e.path),e.$message({type:"success",message:i.data.msg+"："+t.path})}})}).catch(function(){e.$message({type:"info",message:"cancel entry"})})},authFile:function(){this.syncVisible=!0,this.title="设置权限【"+this.fileObject.label+"】",this.chmodModel.auth=parseInt(this.fileObject.auth),this.chmodModel.path=this.fileObject.path,this.all_id=this.fileObject.auth.substr(0,1),this.user_id=this.fileObject.auth.substr(1,1),this.common_id=this.fileObject.auth.substr(2,1),this.all=this.setChmod(this.all_id),this.user=this.setChmod(this.user_id),this.common=this.setChmod(this.common_id),this.url=this.cgi.chmod},setChmod:function(e){var t=[];switch(e){case"7":t=["读取","写入","执行"];break;case"6":t=["读取","写入"];break;case"5":t=["读取","执行"];break;case"4":t=["读取"];break;case"3":t=["写入","执行"];break;case"2":t=["写入"];break;case"1":t=["执行"]}return t},setChmodAuth:function(){this.chmodModel.auth=parseInt(this.chmodModel.auth),this.chmodModel.auth>666&&(this.$message({type:"warning",message:"Permission setting failed"}),this.chmodModel.auth=parseInt(this.fileObject.auth)),this.all_id=this.chmodModel.auth.toString().substr(0,1),this.user_id=this.chmodModel.auth.toString().substr(1,1),this.common_id=this.chmodModel.auth.toString().substr(2,1),this.all=this.setChmod(this.all_id),this.user=this.setChmod(this.user_id),this.common=this.setChmod(this.common_id),this.url=this.cgi.chmod},getChmod:function(e){var t=0;for(var i in e)"读取"===e[i]&&(t+=4),"写入"===e[i]&&(t+=2),"执行"===e[i]&&(t+=1);return t},allChange:function(e){this.all_id=this.getChmod(e),this.chmodModel.auth=parseInt(this.all_id+""+this.user_id+this.common_id)},userChange:function(e){this.user_id=this.getChmod(e),this.chmodModel.auth=parseInt(this.all_id+""+this.user_id+this.common_id)},commonChange:function(e){this.common_id=this.getChmod(e),this.chmodModel.auth=parseInt(this.all_id+""+this.user_id+this.common_id)},compressionFile:function(){var e=this;this.$prompt("请输入文件名","压缩包名称",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var i=t.value;if(""===i||null===i||"null"===i||"undefined"===i)return e.$message.warning("Archive name must not be empty"),!1;e.compressionModel.resource=i.indexOf(".")>=0?i.split(".")[0]:i,e.compressionModel.docLists.push(e.fileObject.path),e.compressionModel.path=e.fileObject.path.replace(e.fileObject.label,""),Dt.Compression(e.compressionModel).then(function(t){if(t&&200===t.data.code){e.$message({type:"success",message:t.data.msg});var i={msg:t.data.msg+"："+e.fileObject.label,href:y.fileCompression};e.saveSystemLog(i),e.getFileLists(e.path)}})}).catch(function(){e.$message({type:"info",message:"cancel entry"})})},DecompressionFile:function(){var e=this;this.$prompt("请输入文件名","解压包名称",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var i=t.value;if(""===i||null===i||"null"===i||"undefined"===i)return e.$message.warning("Extract package name must not be empty"),!1;var a={path:e.fileObject.path,resource:i.indexOf(".")>=0?i.split(".")[0]:i};Dt.Decompression(a).then(function(t){if(t&&200===t.data.code){e.$message({type:"success",message:t.data.msg});var i={msg:t.data.msg,href:y.fileDecompression};e.saveSystemLog(i),e.getFileLists(e.path)}})}).catch(function(){e.$message({type:"info",message:"cancel input"})})},downloadFile:function(){var e=this;this.$alert("确定下载文件："+this.fileObject.label,"文件下载").then(function(){window.open("https://www.fanglonger.com/api/"+y.fileDownload.replace("/","")+"?token="+e.userInfo.token+"&path="+e.fileObject.path,"__target");var t={msg:"file download successfully："+e.fileObject.label,href:y.fileDownload};e.saveSystemLog(t),e.$message({type:"success",message:"download file successfully"})}).catch(function(){e.$message({type:"info",message:"cancel download"})})},uploadFile:function(){this.fileSyncVisible=!0,this.fileData.token=this.userInfo.token,"file"===this.fileObject.fileType?this.fileData.path=this.fileObject.path.replace(this.fileObject.label,""):"dir"===this.fileObject.fileType&&(this.fileData.path=this.fileObject.path)},submitUpload:function(){this.headers.Authorization=""+V.a.set_password(V.a.set_random(32),V.a.set_random(12))+this.userInfo.token+V.a.set_password(V.a.set_random(32),V.a.set_random(12)),this.$refs.upload.submit()},handleRemove:function(e){this.$message({type:"warning",message:"cancel file upload："+e.name})},handleSuccess:function(e){if(200===e.code){this.$message({type:"success",message:e.msg});var t={msg:e.msg,result:e,href:y.fileUpload};this.saveSystemLog(t),this.getFileLists(this.path),this.fileSyncVisible=!1}},updateContent:function(e){this.fileModel.content=e}}),created:function(){this.activeFileTabName=this.currFileObj.name,this.fileModel=this.currFileObj,null===this.activeFileTabName&&(this.fileModel.content="",this.showIdea=!1),"admin"===this.userInfo.username&&(this.options.readOnly=!1)},mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.url=this.cgi.update,this.getFileLists(this.path)})}},na={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xl:{span:5},lg:{span:5},md:{span:24},sm:{span:24},xs:{span:24}}},[i("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"输入关键字搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),i("el-tree",{ref:"tree",staticStyle:{"background-color":"#393d49"},attrs:{data:e.fileLists,"highlight-current":e.highlight,props:e.props,"filter-node-method":e.filterNode,"node-key":e.props.id,id:"tree"},on:{"node-contextmenu":e.rightClick,"node-click":e.getFileContent}})],1),e._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.showIdea,expression:"showIdea"}],attrs:{xl:{span:18,push:1},lg:{span:18,push:1},md:{span:24},sm:{span:24},xs:{span:24}}},[i("el-form",{ref:e.reFrom,attrs:{model:e.fileModel}},[i("el-form-item",{staticStyle:{"margin-left":"-30px !important"}},[i("el-tabs",{staticStyle:{"text-align":"left!important"},attrs:{type:"border-card",closable:""},on:{"tab-click":e.goto,"tab-remove":e.removeTabName},model:{value:e.activeFileTabName,callback:function(t){e.activeFileTabName=t},expression:"activeFileTabName"}},[e._l(e.fileTabs,function(e){return i("el-tab-pane",{key:e.name,attrs:{label:e.label,name:e.name}})}),e._v(" "),i("el-card",{attrs:{shadow:"always"}},[i("codemirror",{ref:"edit",staticStyle:{"line-height":"20px"},attrs:{value:e.fileModel.content,options:e.options},on:{change:e.updateContent}})],1)],2)],1)],1),e._v(" "),e.btn.edit?i("Submit",{staticStyle:{"text-align":"center !important"},attrs:{reFrom:e.reFrom,model:e.fileModel,url:e.url,refs:e.refs},on:{success:e.success}}):e._e()],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuVisible,expression:"menuVisible"}],staticStyle:{"z-index":"100"}},[i("el-menu",{staticClass:"menu",staticStyle:{"border-bottom":"solid 1px #393d49"},attrs:{id:"menu",mode:"horizontal","background-color":"#393d49","text-color":"#cccccc","active-text-color":"#ffd04b"}},[i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.add&&e.btn.add,expression:"showRightBtn.add && btn.add"}],on:{click:e.addFile}},[i("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("添 加")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.rename&&e.btn.rename,expression:"showRightBtn.rename && btn.rename"}],on:{click:e.renameFile}},[i("i",{staticClass:"el-icon-edit-outline"}),e._v("重命名")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.auth&&e.btn.chmod,expression:"showRightBtn.auth && btn.chmod"}],on:{click:e.authFile}},[i("i",{staticClass:"el-icon-user-solid"}),e._v("权 限")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.compression&&e.btn.gzip,expression:"showRightBtn.compression && btn.gzip"}],on:{click:e.compressionFile}},[i("i",{staticClass:"el-icon-collection"}),e._v("压 缩")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.DeCompression&&e.btn.unzip,expression:"showRightBtn.DeCompression && btn.unzip"}],on:{click:e.DecompressionFile}},[i("i",{staticClass:"el-icon-receiving"}),e._v("解 压")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.download&&e.btn.download,expression:"showRightBtn.download && btn.download"}],on:{click:e.downloadFile}},[i("i",{staticClass:"el-icon-download"}),e._v("下 载")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.upload&&e.btn.upload,expression:"showRightBtn.upload && btn.upload"}],on:{click:e.uploadFile}},[i("i",{staticClass:"el-icon-upload"}),e._v("上 传")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.remove&&e.btn.del,expression:"showRightBtn.remove && btn.del"}],on:{click:e.deleteFile}},[i("i",{staticClass:"el-icon-delete-solid"}),e._v("删 除")])],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.syncVisible,width:e.dialogWidth,modal:!0,title:e.title,center:!0},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.chmodModel}},[i("el-form-item",{attrs:{label:"权限",prop:"auth",rules:[{required:!0,message:"权限必须是数字",trigger:"blur",type:"number"}]}},[i("el-input",{attrs:{placeholder:"请输入内容"},on:{change:e.setChmodAuth},model:{value:e.chmodModel.auth,callback:function(t){e.$set(e.chmodModel,"auth",e._n(t))},expression:"chmodModel.auth"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"所有者",required:""}},[i("el-checkbox-group",{on:{change:e.allChange},model:{value:e.all,callback:function(t){e.all=t},expression:"all"}},e._l(e.checkBoxArr,function(e){return i("el-checkbox",{key:e.id,attrs:{border:"",size:"small",label:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"用户组",required:""}},[i("el-checkbox-group",{on:{change:e.userChange},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}},e._l(e.checkBoxArr,function(e){return i("el-checkbox",{key:e.id,attrs:{border:"",size:"small",label:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"公共",required:""}},[i("el-checkbox-group",{on:{change:e.commonChange},model:{value:e.common,callback:function(t){e.common=t},expression:"common"}},e._l(e.checkBoxArr,function(e){return i("el-checkbox",{key:e.id,attrs:{border:"",size:"small",label:e.value}})}),1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.chmodModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.fileSyncVisible,width:e.dialogWidth,modal:!0,title:"文件上传",center:!0},on:{"update:visible":function(t){e.fileSyncVisible=t}}},[i("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"20px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),i("el-upload",{ref:"upload",attrs:{data:e.fileData,action:e.cgi.uploadUrl,headers:e.headers,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"file-list":e.fileList,"auto-upload":!1,"list-type":"picture-card"}},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"trigger"},slot:"trigger"})])],1),e._v(" "),i("el-dialog",{attrs:{id:"file",visible:e.imgVisible,width:"30%",title:e.dialogTitle,center:"","show-close":!1},on:{"update:visible":function(t){e.imgVisible=t}}},[e.dialogImageUrl?i("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.dialogImageUrl,alt:e.dialogTitle,fit:"cover","preview-src-list":[e.dialogImageUrl]}}):e._e(),e._v(" "),e.dialogVideoUrl?i("video",{attrs:{src:e.dialogVideoUrl,autoplay:"",controls:"",width:"300px",height:"300px"}},[e._v("您的浏览器不支持 video 标签。")]):e._e()],1)],1)},staticRenderFns:[]};var ra=i("VU/8")(sa,na,!1,function(e){i("fN4Y")},null,null).exports,oa={name:"CommonUpload",props:{fileList:{type:Array,default:function(){return[]}},imgWidth:{type:Number,default:function(){return 320}},imgHeight:{type:Number,default:function(){return 250}},checkSize:{type:Boolean,default:function(){return!0}},fileSize:{type:Number,default:function(){return 1024}},uploadSuccess:{type:Function},handleRemove:{type:Function},uploadLimit:{type:Number,default:function(){return 1}},action:{type:String,default:function(){return"https://www.fanglonger.com/api/v1/wx/upload"}},showFileList:{type:Boolean,default:function(){return!0}},listType:{type:String,default:function(){return"picture"}},btnStyle:{type:String|Object,default:function(){return""|{}}},showTips:{type:Boolean,default:function(){return!1}}},data:function(){return{uploadData:{}}},computed:m()({},Object(p.c)(["userInfo"])),methods:{uploadFile:function(e){var t=new FormData;t.append("file",e.file),t.append("filename",e.file.name),t.append("username",this.userInfo.username||"tourist");this.$http.post(e.action,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){t.data.filename=e.filename,e.onSuccess(t.data)}).catch(function(){e.onError()})},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type,i=e.size/1024/this.fileSize<1;if(!t)return this.$message.error("上传图片只能是 jpg、png 格式!"),!1;if(!i){var a=this.fileSize>=1024?Math.floor(this.fileSize/1024)+"MB":this.fileSize+"KB";return this.$message.error("上传图片大小不能超过 "+a),!1}if(!this.checkSize)return t&&i;var s=this,n=new x.a(function(t,i){var a=s.imgWidth,n=s.imgHeight,r=window.URL||window.webkitURL,o=new Image;o.onload=function(){o.width===a&&o.height===n||o.width>=a-10&&o.height>=n-10&&o.width<=a+10&&o.height<=n+10?t():i()},o.src=r.createObjectURL(e)}).then(function(){return e},function(){return s.$message.error("上传图片尺寸不符合,只能是"+s.imgWidth+"*"+s.imgHeight+"!"),x.a.reject()});return t&&i&&n}}},la={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{staticClass:"upload-demo",staticStyle:{"padding-left":"5px"},attrs:{"http-request":e.uploadFile,action:e.action,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload,"on-remove":e.handleRemove,limit:e.uploadLimit,"show-file-list":e.showFileList,"file-list":e.fileList,"list-type":e.listType}},[i("el-button",{style:e.btnStyle,attrs:{plain:"",size:"medium",type:"primary"}},[e._v("点击上传")]),e._v(" "),e.showTips?i("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"20px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传"+e._s(e.imgWidth)+"*"+e._s(e.imgHeight)+"的 jpg/png 图片")]):e._e()],1)},staticRenderFns:[]},ca={name:"imageView",components:{CommonUpload:i("VU/8")(oa,la,!1,null,null,null).exports},data:function(){return{loading:!1,fileLists:[],filtersListsPart:[],loadingText:"数据加载中...",fullImagePart:[],path:"storage_path",limit:9,page:1,total:0,visible:!1}},computed:m()({},Object(p.c)(["userInfo"])),mounted:function(){this.$nextTick(function(){this.getFileLists(this.path)})},methods:m()({},Object(p.b)(["saveSystemLog"]),{uploadSuccess:function(e,t){e&&200===e.code?this.getFileLists(this.path):this.$message.error(e.msg)},deleteImg:function(e,t){var i=this;this.$confirm("此操作将永远删除该条记录，是否继续？","删除记录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={path:e.path};Dt.FileDelete(t).then(function(t){if(t&&200===t.data.code){var a={msg:t.data.msg+"："+e.path,href:y.fileDelete};i.saveSystemLog(a),i.getFileLists(i.path),i.$message({type:"success",message:t.data.msg+"："+e.alt})}})}).catch(function(){i.$message({type:"info",message:"cancel remove！"})})},getFileLists:function(e){var t=this;this.loading=!0;var i={path:e,basename:"/app/public//",sort:"time",sort_order:"desc"};Dt.FileLists(i).then(function(e){e&&200===e.data.code&&(t.getImage(e.data.item),t.loading=!1)})},currentChange:function(e){this.page=e,this.getTransactionData()},getTransactionData:function(){var e=this.limit*(this.page-1);this.filtersListsPart=e+this.limit>=this.fileLists.length?this.fileLists.slice(e,this.fileLists.length):this.fileLists.slice(e,e+this.limit)},getImage:function(e){var t=this;this.filtersListsPart=[],this.fileLists=[],e.map(function(e){e.children.length>0&&e.children.map(function(e){var i=e.label.split(".")[1];["png","jpg","jpeg","gif"].includes(i.toLowerCase())&&(t.$set(e,"url",t.userInfo.local+"storage"+e.path.substr(e.path.indexOf("public")+6,e.path.length-e.path.indexOf("public"))),t.fileLists.push(e),t.fullImagePart.push(e.url))})}),this.total=this.fileLists.length,this.fileLists.sort(function(e,t){return e.time<t.time?1:-1}),this.filtersListsPart=this.fileLists.slice(0,this.total>this.limit?this.limit:this.total)}})},ua={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{margin:"0 20px"},attrs:{"element-loading-text":e.loadingText,id:"imageView"}},[i("CommonUpload",{attrs:{"check-size":!1,"upload-limit":1e3,"file-size":2048,"show-file-list":!1,"btn-style":{margin:"0 0 10px 65px"},"upload-success":e.uploadSuccess}}),e._v(" "),i("el-row",{attrs:{span:24}},e._l(e.filtersListsPart,function(t,a){return i("el-col",{key:a,staticStyle:{"margin-bottom":"10px","margin-top":"10px"},attrs:{span:7,offset:1}},[i("el-card",{attrs:{"body-style":{padding:"0px",border:"none"},shadow:"hover"}},[i("el-image",{staticClass:"image",attrs:{lazy:"",fit:"contain",title:t.label,alt:t.label,src:t.url,"preview-src-list":[t.url]}}),e._v(" "),i("div",{staticStyle:{padding:"14px"}},[i("span",{domProps:{innerHTML:e._s(t.label)}}),e._v(" "),i("div",{staticClass:"bottom clearfix"},[i("time",{staticClass:"time"},[e._v(e._s(t.time))]),e._v(" "),i("el-button",{staticClass:"button",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.deleteImg(t,a)}}},[e._v("删 除")])],1)])],1)],1)}),1),e._v(" "),i("el-pagination",{staticStyle:{float:"right",margin:"30px 0"},attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.limit,"current-page":e.page,small:""},on:{"current-change":e.currentChange}})],1)},staticRenderFns:[]};var da=i("VU/8")(ca,ua,!1,function(e){i("zcbR")},null,null).exports,ma={name:"lists",components:{VueJson:Ut,Submit:Si,Delete:Ii,Radio:Ti},data:function(){return{configLists:[],page:1,limit:15,total:0,title:"",syncVisible:!1,labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"config",configValModel:{},configModel:{},configVal:{},cgi:{remove:y.configDelete,status:y.configUpdate,insert:y.configSave,update:y.configUpdate,updateVal:y.configValUpdate},show:!1,syncConfigVisible:!1}},computed:m()({},Object(p.c)(["dialogWidth"])),methods:m()({},Object(p.b)(["saveSystemLog"]),{success:function(){this.syncVisible=!1,this.syncConfigVisible=!1,this.getConfigLists(this.page,this.limit)},cancelDialog:function(){this.syncVisible=!1,this.syncConfigVisible=!1},getConfigLists:function(e,t){var i=this,a={page:e,limit:t};Dt.ConfigLists(a).then(function(e){e&&200===e.data.code&&(i.configLists=e.data.item,i.total=e.data.item.length,i.loading=!1)})},sizeChange:function(e){this.limit=e,this.getConfigLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getConfigLists(this.page,this.limit)},updateConfig:function(e){this.title="查看配置",this.configModel=e,this.syncConfigVisible=!0},addConfig:function(){this.title="添加配置",this.configValModel={name:"",status:1,value:"[]"},this.show=!1,this.syncVisible=!0,this.url=this.cgi.insert},setConfigVal:function(e){this.configVal={name:"",value:"",status:1,id:1},this.configValModel=e,this.configVal.status=this.configValModel.status,this.configValModel.value=this.configVal,this.configValModel.act="editConfig",this.title="设置【"+e.name+"】配置值",this.show=!0,this.syncVisible=!0,this.url=this.cgi.update},removeConfigVal:function(e){var t=this;this.$confirm("此操作将永远删除该条记录，是否继续？","删除记录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.act="remove",Dt.ConfigValUpdate(e).then(function(e){if(e&&200===e.data.code){t.getConfigLists(t.page,t.limit);var i={href:t.cgi.updateVal,msg:e.data.msg,token:t.$store.state.login.token};return t.saveSystemLog(i),t.$message({type:"success",message:e.data.msg}),!1}})}).catch(function(){t.$message({type:"info",message:"已取消删除！"})})}}),mounted:function(){this.$nextTick(function(){this.getConfigLists(this.page,this.limit)})}},pa={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.addConfig}},[e._v("添 加")])],1)],1),e._v(" "),i("el-table",{attrs:{data:e.configLists,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[i("el-table-column",{attrs:{label:"#",prop:"id",width:"100px"}}),e._v(" "),i("el-table-column",{attrs:{label:"配置名称",prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{label:"显示状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.children?i("div",[i("Radio",{attrs:{item:t.row,url:e.cgi.status},on:{success:e.success}})],1):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",prop:"created_at"}}),e._v(" "),i("el-table-column",{attrs:{label:"修改时间",prop:"updated_at"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.children?i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:function(i){return e.setConfigVal(t.row)}}},[e._v("添 加")]),e._v(" "),i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-search",size:"mini"},on:{click:function(i){return e.updateConfig(t.row)}}},[e._v("查 看")])],1):i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{plain:"",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(i){return e.removeConfigVal(t.row)}}},[e._v("删 除")])],1)]}}])})],1),e._v(" "),i("div",{staticStyle:{margin:"25px 0"}},[i("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.syncVisible,width:e.dialogWidth,center:"","destroy-on-close":!0},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.configValModel}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],attrs:{label:"配置名称",prop:"name",rules:[{required:!0,message:"请输入配置名称",trigger:"blur"}]}},[i("el-input",{attrs:{placeholder:"配置名称"},model:{value:e.configValModel.name,callback:function(t){e.$set(e.configValModel,"name",t)},expression:"configValModel.name"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],attrs:{label:"配置健",rules:[{required:!0,message:"请输入配置健",trigger:"blur"}]}},[i("el-input",{attrs:{placeholder:"配置内容"},model:{value:e.configVal.name,callback:function(t){e.$set(e.configVal,"name",t)},expression:"configVal.name"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],attrs:{label:"配置值",rules:[{required:!0,message:"请输入配置值",trigger:"blur"}]}},[i("el-input",{attrs:{placeholder:"配置内容"},model:{value:e.configVal.value,callback:function(t){e.$set(e.configVal,"value",t)},expression:"configVal.value"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"配置状态",prop:"status"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:e.configValModel.status,callback:function(t){e.$set(e.configValModel,"status",t)},expression:"configValModel.status"}},[i("el-radio-button",{attrs:{label:"2"}},[e._v("关闭")]),e._v(" "),i("el-radio-button",{attrs:{label:"1"}},[e._v("开启")])],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.configValModel,url:e.url,refs:e.refs},on:{cancelDialog:e.cancelDialog,success:e.success}})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,width:e.dialogWidth,visible:e.syncConfigVisible,center:"","destroy-on-close":!0},on:{"update:visible":function(t){e.syncConfigVisible=t}}},[i("el-form",{attrs:{"label-width":e.labelWidth,model:e.configModel}},[i("el-form-item",{attrs:{label:"配置名称"}},[e._v(e._s(e.configModel.name))]),e._v(" "),i("el-form-item",{attrs:{label:"配置值",prop:"children"}},[i("VueJson",{attrs:{"json-data":e.configModel.children}})],1),e._v(" "),i("el-form-item",{attrs:{label:"配置状态"}},[i("el-button",{attrs:{size:"medium",plain:"",type:"1"==e.configModel.status?"success":"danger"}},[e._v(e._s("1"==e.configModel.status?"开启":"关闭"))])],1)],1)],1)],1)},staticRenderFns:[]};var ha=i("VU/8")(ma,pa,!1,function(e){i("bUmc")},"data-v-c2bfb8b8",null).exports,fa={name:"lists",components:{Submit:Si,Delete:Ii,Radio:Ti,VueJson:Ut},data:function(){return{categoryLists:[],props:{label:"name",children:"children",id:"id"},filterText:"",title:"",syncVisible:!1,labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"created",apiName:"",menuVisible:!1,categoryModel:{},apiCategory:[],apiStatus:!1,methodLists:{POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE"},typeLists:{String:"String",Float:"Float",Number:"Number",Object:"Object",Array:"Array",Timestamp:"Timestamp"},cgi:{insert:y.apiSave,update:y.apiUpdate,categoryInsert:y.categorySave,categoryUpdate:y.categoryUpdate,remove:y.categoryDelete},rules:{type:[{required:!0,message:"请输入权限名称",trigger:"change"}],href:[{required:!0,message:"请输入权限地址",trigger:"blur"}],method:[{required:!0,message:"请输入请求方法",trigger:"change"}],desc:[{required:!0,message:"请输入接口描述",trigger:"blur"}],response_string:[{required:!0,message:"请输入返回参数",trigger:"blur"}]},btn:{},scrollTop:0}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},computed:m()({},Object(p.c)(["apiVisible","apiModel","interfaceName","userInfo","dialogWidth"])),methods:m()({},Object(p.b)(["addApiVisible","addApiModel","saveSystemLog"]),{success:function(){this.getCategoryLists(),this.syncVisible=!1},requestApiDetails:function(){var e=this,t={};this.apiModel.request.map(function(e){t[e.name]=e.type===Number?parseInt(e.val):e.val}),Dt.ReportSys(this.apiModel.href,t).then(function(t){t&&200===t.data.code&&(e.apiModel.response_string=t.data)})},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},setName:function(e){return Array(e.level+1).join("　　")+e.name},getCategoryLists:function(){var e=this;Dt.CategoryLists().then(function(t){t&&200===t.data.code&&(e.apiCategory=t.data.item.category,e.categoryLists=t.data.item.category_tree,e.loading=!1)})},rightClick:function(e,t,i,a){this.menuVisible=!1,this.menuVisible=!0;var s=document.querySelector("#menu"),n=document.getElementById("tree");this.scrollTop=V.a.get_scroll_top(),document.addEventListener("click",this.foo),s.style.left=n.offsetWidth+50+"px",this.scrollTop>=229?s.style.top=e.clientY+this.scrollTop-235+"px":s.style.top=e.clientY+this.scrollTop-180+"px",this.categoryModel=t},foo:function(){this.menuVisible=!1,document.removeEventListener("click",this.foo)},addCategory:function(){this.title="添加接口",this.syncVisible=!0,this.reFrom="created",this.url=this.cgi.categoryInsert,this.categoryModel={name:"",pid:void 0===this.categoryModel.id?"0":this.categoryModel.id,path:"1",level:1}},updateCategory:function(){this.title=this.categoryModel.name,this.syncVisible=!0,this.reFrom="update",this.url=this.cgi.categoryUpdate},deleteCategory:function(){var e=this;Dt.CategoryDelete({id:this.categoryModel.id}).then(function(t){if(t&&200===t.data.code){var i={href:e.cgi.remove,msg:t.data.msg,token:e.$store.state.login.token};e.saveSystemLog(i),e.$message({type:"success",message:t.data.msg}),e.getCategoryLists()}})},getApiDetail:function(e){var t=this;if(e.level<=1)this.$notify({title:"通知",message:"该接口暂时不允许访问",type:"success"});else{var i={apiVisible:!0,interfaceName:e.name};this.addApiVisible(i),this.apiName=this.interfaceName,Dt.ApiLists({type:e.id}).then(function(i){if(i&&200===i.data.code)t.addApiModel(i.data.item),t.apiModel.request=JSON.parse(t.apiModel.request),t.apiModel.response=JSON.parse(t.apiModel.response),t.apiModel.response_string=JSON.parse(t.apiModel.response_string),t.url=t.cgi.update;else{t.url=t.cgi.insert;var a={desc:"",type:e.id,href:"",method:"POST",request:[{name:"token",desc:"用户token",required:"1",type:"String",val:t.userInfo.token}],response:[{name:"code",desc:"200 成功",type:"Number"},{name:"msg",desc:"Success",type:"String"}],response_string:[],remark:"接口调用必须添加header头Authorization以便验证用户的合法性"};t.addApiModel(a)}})}},requestRemove:function(e,t){var i=[],a=this;qt()(a.apiModel.request).forEach(function(e){i.push(a.apiModel.request[e])}),i.splice(t,1),a.apiModel.request=i},requestAdd:function(){this.apiModel.request.push({name:"",desc:"",required:"",type:"",val:""})},responseRemove:function(e,t){var i=[],a=this;qt()(a.apiModel.response).forEach(function(e){i.push(a.apiModel.response[e])}),i.splice(t,1),a.apiModel.response=i},responseAdd:function(){this.apiModel.response.push({name:"",desc:"",type:""})}}),created:function(){this.apiName=this.interfaceName,this.apiModel.id?this.url=this.cgi.update:this.url=this.cgi.insert,this.$notify({type:"success",title:"特别注意",dangerouslyUseHTMLString:!0,message:"接口调用必须添加header头Authorization以便验证用户的合法性",offset:150})},mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getCategoryLists()})}},ga={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xl:{span:5},lg:{span:5},md:{span:24},sm:{span:24},xs:{span:24}}},[i("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"输入关键字搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-plus"},on:{click:e.addCategory},slot:"append"})],1),e._v(" "),i("el-tree",{ref:"tree",staticStyle:{"background-color":"#393d49"},attrs:{props:e.props,"filter-node-method":e.filterNode,"highlight-current":!0,data:e.categoryLists,"default-expand-all":"",id:"tree","node-key":e.props.id},on:{"node-contextmenu":e.rightClick,"node-click":e.getApiDetail}})],1),e._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.apiVisible,expression:"apiVisible"}],attrs:{xl:{span:18,push:1},lg:{span:18,push:1},md:{span:24},sm:{span:24},xs:{span:24}}},[i("el-tabs",{attrs:{type:"border-card"},model:{value:e.apiName,callback:function(t){e.apiName=t},expression:"apiName"}},[i("el-tab-pane",{key:e.apiName,attrs:{label:e.apiName,name:e.apiName}}),e._v(" "),i("el-card",{attrs:{shadow:"always"}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.apiModel,rules:e.rules}},[i("el-form-item",{attrs:{label:"接口名称",prop:"type"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{"auto-complete":"true",placeholder:"接口名称"},model:{value:e.apiModel.type,callback:function(t){e.$set(e.apiModel,"type",t)},expression:"apiModel.type"}},e._l(e.apiCategory,function(t,a){return i("el-option",{key:a,attrs:{label:e.setName(t),value:t.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"接口描述",prop:"desc"}},[i("el-input",{attrs:{placeholder:"接口描述"},model:{value:e.apiModel.desc,callback:function(t){e.$set(e.apiModel,"desc",t)},expression:"apiModel.desc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"接口地址",prop:"href"}},[i("el-input",{attrs:{placeholder:"接口地址"},model:{value:e.apiModel.href,callback:function(t){e.$set(e.apiModel,"href",t)},expression:"apiModel.href"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"接口方法",prop:"method"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"接口方法"},model:{value:e.apiModel.method,callback:function(t){e.$set(e.apiModel,"method",t)},expression:"apiModel.method"}},e._l(e.methodLists,function(e,t){return i("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"请求字段",prop:"request",required:""}},[i("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",plain:"",icon:"el-icon-circle-plus-outline",size:"medium"},on:{click:function(t){return e.requestAdd()}}}),e._v(" "),e._l(e.apiModel.request,function(t,a){return i("div",{key:a},[i("el-input",{staticStyle:{width:"180px","margin-bottom":"5px"},attrs:{"auto-complete":"true",placeholder:"参数名"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"request.name"}}),e._v(" "),i("el-select",{staticStyle:{width:"180px"},attrs:{"auto-complete":"true",placeholder:"字段类型"},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"request.type"}},e._l(e.typeLists,function(e,t){return i("el-option",{key:t,attrs:{label:e,value:t}})}),1),e._v(" "),i("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"是否必须"},model:{value:t.required,callback:function(i){e.$set(t,"required",i)},expression:"request.required"}},[i("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"否",value:"0"}})],1),e._v(" "),i("el-input",{staticStyle:{width:"180px"},attrs:{"auto-complete":"true",placeholder:"参数描述"},model:{value:t.desc,callback:function(i){e.$set(t,"desc",i)},expression:"request.desc"}}),e._v(" "),i("el-input",{staticStyle:{width:"180px"},attrs:{"auto-complete":"true",placeholder:"参数值"},model:{value:t.val,callback:function(i){e.$set(t,"val",i)},expression:"request.val"}}),e._v(" "),i("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"medium"},on:{click:function(i){return e.requestRemove(t,a)}}})],1)})],2),e._v(" "),i("el-form-item",{attrs:{label:"返回字段",prop:"response",required:""}},[i("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",plain:"",icon:"el-icon-circle-plus-outline",size:"medium"},on:{click:function(t){return e.responseAdd()}}}),e._v(" "),e._l(e.apiModel.response,function(t,a){return i("div",{key:a},[i("el-input",{staticStyle:{width:"180px","margin-bottom":"5px"},attrs:{"auto-complete":"true",placeholder:"参数名"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"response.name"}}),e._v(" "),i("el-select",{staticStyle:{width:"180px"},attrs:{"auto-complete":"true",placeholder:"字段类型"},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"response.type"}},e._l(e.typeLists,function(e,t){return i("el-option",{key:t,attrs:{label:e,value:t}})}),1),e._v(" "),i("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"true",placeholder:"参数描述"},model:{value:t.desc,callback:function(i){e.$set(t,"desc",i)},expression:"response.desc"}}),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"medium"},on:{click:function(i){return e.responseRemove(t,a)}}})],1)})],2),e._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark",required:""}},[i("el-input",{attrs:{maxlength:"500","show-word-limit":"",resize:"none",autosize:{minRows:4},placeholder:"备注",type:"textarea"},model:{value:e.apiModel.remark,callback:function(t){e.$set(e.apiModel,"remark",t)},expression:"apiModel.remark"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"接口请求",required:""}},[i("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.requestApiDetails}},[e._v("接口调用")])],1),e._v(" "),i("el-form-item",{attrs:{label:"返回参数",prop:"response_string"}},[i("VueJson",{attrs:{"json-data":e.apiModel.response_string?e.apiModel.response_string:[],expand:3}})],1),e._v(" "),e.btn.edit?i("Submit",{staticStyle:{"text-align":"center"},attrs:{reFrom:e.reFrom,model:e.apiModel,url:e.url,refs:e.refs},on:{success:e.success}}):e._e()],1)],1)],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuVisible,expression:"menuVisible"}],staticStyle:{"z-index":"100"}},[i("el-menu",{staticClass:"menu",staticStyle:{"border-bottom":"solid 1px #393d49"},attrs:{id:"menu","background-color":"#393d49","text-color":"#cccccc",mode:"horizontal","active-text-color":"#ffd04b"}},[i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.btn.add,expression:"btn.add"}],on:{click:e.addCategory}},[i("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("添 加")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.btn.edit,expression:"btn.edit"}],on:{click:e.updateCategory}},[i("i",{staticClass:"el-icon-edit-outline"}),e._v("修 改")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.btn.del,expression:"btn.del"}],on:{click:e.deleteCategory}},[i("i",{staticClass:"el-icon-delete-solid"}),e._v("删 除")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.syncVisible,modal:!0,center:!0,width:e.dialogWidth},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.categoryModel,rules:e.rules}},[i("el-form-item",{attrs:{label:"接口名称",prop:"name",rules:[{required:!0,message:"请输入接口名称",trigger:"blur"}]}},[i("el-input",{attrs:{placeholder:"接口名称"},model:{value:e.categoryModel.name,callback:function(t){e.$set(e.categoryModel,"name",t)},expression:"categoryModel.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限名称",prop:"pid",rules:[{required:!0,message:"请选择权限名称",trigger:"blur"}]}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"权限名称",disabled:"update"===e.reFrom},model:{value:e.categoryModel.pid,callback:function(t){e.$set(e.categoryModel,"pid",t)},expression:"categoryModel.pid"}},["0"===e.categoryModel.pid?i("el-option",{attrs:{label:"默认权限",value:"0",selected:""}}):e._e(),e._v(" "),e._l(e.apiCategory,function(t,a){return i("el-option",{key:a,attrs:{label:e.setName(t),value:t.id}})})],2)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.categoryModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var va=i("VU/8")(fa,ga,!1,function(e){i("+Z5Z")},null,null).exports,ba={name:"doc",components:{Submit:Si,Delete:Ii},data:function(){return{categoryLists:[],props:{label:"name",children:"children",id:"id"},filterText:"",title:"",syncVisible:!1,labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"category",apiName:"README",menuVisible:!1,categoryModel:{},apiCategory:[],highlight:!0,value:"",mavonBool:!1,codeStyle:"monokai",cgi:{categoryInsert:y.categorySave,categoryUpdate:y.categoryUpdate,remove:y.categoryDelete,uploadUrl:"https://www.fanglonger.com/api/"+y.fileUpload},scrollTop:0,btn:{},token:"",codeStyleList:i("6ZH5")}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},computed:m()({},Object(p.c)(["docVisible","docModel","docName","userInfo","dialogWidth"])),methods:m()({},Object(p.b)(["addDocVisible","addDocModel","saveSystemLog"]),{success:function(){this.getCategoryLists(),this.syncVisible=!1},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},setName:function(e){return Array(e.level+1).join("　　")+e.name},getCategoryLists:function(){var e=this;Dt.CategoryLists({}).then(function(t){t&&200===t.data.code&&(e.apiCategory=t.data.item.category,e.categoryLists=t.data.item.category_tree,e.docModel.id||(e.apiName=e.categoryLists[0].name,e.getApiDetail(e.categoryLists[0])),e.loading=!1)})},rightClick:function(e,t,i,a){this.menuVisible=!1,this.menuVisible=!0;var s=document.querySelector("#menu"),n=document.getElementById("tree");this.scrollTop=V.a.get_scroll_top(),document.addEventListener("click",this.foo),s.style.left=n.offsetWidth+50+"px",this.scrollTop>=229?s.style.top=e.clientY+this.scrollTop-235+"px":s.style.top=e.clientY+this.scrollTop-180+"px",this.categoryModel=t},foo:function(){this.menuVisible=!1,document.removeEventListener("click",this.foo)},addCategory:function(){this.title="添加接口",this.syncVisible=!0,this.url=this.cgi.categoryInsert,this.categoryModel={name:"",pid:void 0===this.categoryModel.id?"0":this.categoryModel.id,path:"1",level:1}},updateCategory:function(){this.title=this.categoryModel.name,this.syncVisible=!0,this.url=this.cgi.categoryUpdate},deleteCategory:function(){var e=this;Dt.CategoryDelete({id:this.categoryModel.id}).then(function(t){if(t&&200===t.data.code){var i={href:e.cgi.remove,msg:t.data.msg,token:e.$store.state.login.token};e.saveSystemLog(i),e.$message({type:"success",message:t.data.msg}),e.getCategoryLists()}})},uploadFile:function(e,t){var i=this,a=t.type;if(!["image/jpg","image/gif","image/png","image/jpeg"].includes(a))return this.$message({type:"warning",message:"upload image format error"}),!1;if(t.size>2097152)return this.$message({type:"warning",message:"upload image size error"}),!1;var s=new FormData;s.append("file",t),s.append("token",this.userInfo.token),s.append("rand",!0);var n={headers:{"Content-Type":"multipart/form-data",Authorization:""+V.a.set_password(V.a.set_random(32),V.a.set_random(12))+this.userInfo.token+V.a.set_password(V.a.set_random(32),V.a.set_random(12))}};this.$http.post(this.cgi.uploadUrl,s,n).then(function(t){i.$refs.md.$img2Url(e,t.data.item.src)})},getData:function(e,t){this.docModel.markdown=e,this.docModel.html=t},saveData:function(){var e=this;this.docModel.id?Dt.ApiDocUpdate(this.docModel).then(function(t){if(t&&200===t.data.code){e.addDocModel(e.docModel);var i={href:y.apiDocUpdate,msg:t.data.msg,token:e.$store.state.login.token};e.saveSystemLog(i),e.$message.success(t.data.msg)}}):Dt.ApiDocSave(this.docModel).then(function(t){if(t&&200===t.data.code){e.$message.success(t.data.msg),e.addDocModel(e.docModel);var i={href:y.apiDocSave,msg:t.data.msg,token:e.$store.state.login.token};e.saveSystemLog(i),e.getCategoryLists()}})},getApiDetail:function(e){var t=this,i={docVisible:!0,docName:e.name};this.addDocVisible(i),this.mavonBool=!1,this.$refs.md&&"undefined"!==this.$refs.md&&this.$refs.md.markdownIt.set({breaks:!1}),this.apiName=this.docName,Dt.ApiDocLists({type:e.id}).then(function(i){i&&200===i.data.code?t.addDocModel(i.data.item):(t.mavonBool=!0,t.addDocModel({}),t.docModel.type=e.id)})}}),created:function(){this.docName&&(this.apiName=this.docName),this.token=this.$store.state.login.token},mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getCategoryLists()})}},_a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xl:{span:5},lg:{span:5},md:{span:24},sm:{span:24},xs:{span:24}}},[i("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"输入关键字搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-plus"},on:{click:e.addCategory},slot:"append"})],1),e._v(" "),i("el-tree",{ref:"tree",staticStyle:{"background-color":"#393d49"},attrs:{props:e.props,"filter-node-method":e.filterNode,"highlight-current":e.highlight,data:e.categoryLists,"default-expand-all":"",id:"tree","node-key":e.props.id},on:{"node-contextmenu":e.rightClick,"node-click":e.getApiDetail}})],1),e._v(" "),i("el-col",{attrs:{xl:{span:18,push:1},lg:{span:18,push:1},md:{span:24},sm:{span:24},xs:{span:24}}},[e.docVisible?i("el-tabs",{attrs:{type:"border-card"},model:{value:e.apiName,callback:function(t){e.apiName=t},expression:"apiName"}},[i("el-tab-pane",{key:e.apiName,attrs:{label:e.apiName,name:e.apiName}}),e._v(" "),i("el-card",{attrs:{shadow:"always"}},[i("el-form",[i("el-form-item",{attrs:{inline:!0}},[e.mavonBool?i("el-select",{model:{value:e.codeStyle,callback:function(t){e.codeStyle=t},expression:"codeStyle"}},e._l(e.codeStyleList,function(e,t){return i("el-option",{key:t,attrs:{label:t,value:t}})}),1):e._e(),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{plain:"",type:"primary",icon:e.mavonBool?"el-icon-back":"el-icon-edit-outline"},on:{click:function(t){e.mavonBool=!e.mavonBool}}},[e._v(e._s(e.mavonBool?"返 回":"修 改"))])],1),e._v(" "),i("el-form-item",[i("mavon-editor",{ref:"md",staticStyle:{"z-index":"1","min-height":"500px"},attrs:{defaultOpen:"preview",subfield:e.mavonBool,toolbarsFlag:e.mavonBool,codeStyle:e.codeStyle},on:{imgAdd:e.uploadFile,change:e.getData,save:e.saveData},model:{value:e.docModel.markdown,callback:function(t){e.$set(e.docModel,"markdown",t)},expression:"docModel.markdown"}})],1)],1)],1)],1):e._e()],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuVisible,expression:"menuVisible"}]},[i("el-menu",{staticClass:"menu",staticStyle:{"border-bottom":"solid 1px #393d49"},attrs:{id:"menu","background-color":"#393d49","text-color":"#cccccc",mode:"horizontal","active-text-color":"#ffd04b"}},[i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.btn.add,expression:"btn.add"}],on:{click:e.addCategory}},[i("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("添 加")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.btn.edit,expression:"btn.edit"}],on:{click:e.updateCategory}},[i("i",{staticClass:"el-icon-edit-outline"}),e._v("修 改")]),e._v(" "),i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.btn.del,expression:"btn.del"}],on:{click:e.deleteCategory}},[i("i",{staticClass:"el-icon-delete-solid"}),e._v("删 除")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,width:e.dialogWidth,visible:e.syncVisible,modal:!0,center:!0},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.categoryModel}},[i("el-form-item",{attrs:{label:"接口名称",prop:"name",required:""}},[i("el-input",{attrs:{placeholder:"分类名称"},model:{value:e.categoryModel.name,callback:function(t){e.$set(e.categoryModel,"name",t)},expression:"categoryModel.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"接口上级",prop:"pid"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"接口上级"},model:{value:e.categoryModel.pid,callback:function(t){e.$set(e.categoryModel,"pid",t)},expression:"categoryModel.pid"}},["0"===e.categoryModel.pid?i("el-option",{attrs:{label:"默认权限",value:"0",selected:""}}):e._e(),e._v(" "),e._l(e.apiCategory,function(t,a){return i("el-option",{key:a,attrs:{label:e.setName(t),value:t.id}})})],2)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.categoryModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var ya=i("VU/8")(ba,_a,!1,function(e){i("RT22")},null,null).exports,wa={name:"lists",data:function(){return{databaseLists:[],labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",edit:!1,name:"",search:"",btn:{}}},computed:m()({},Object(p.c)(["userInfo"])),methods:m()({},Object(p.b)(["saveSystemLog"]),{getDatabaseLists:function(){var e=this;Dt.DatabaseLists([]).then(function(t){t&&200===t.data.code&&(e.databaseLists=t.data.item,e.loading=!1)})},backup:function(e){var t=this;this.loading=!0,this.edit=!1,Dt.DatabaseBackup(e).then(function(e){if(e&&200===e.data.code){setTimeout(function(){t.loading=!1,t.$message({type:"success",message:e.data.msg})},e.data.item.times);var i={href:e.config.url,msg:e.data.msg,token:t.$store.state.login.token};t.saveSystemLog(i)}})},setComment:function(e){this.name=e.name,this.edit=!0},updateComment:function(e){var t=this;if(!e.comment)return this.$message.warning("请输入数据表备注"),this.$refs.comment.focus(),!1;this.loading=!0,Dt.DatabaseUpdateComment(e).then(function(e){if(e&&200===e.data.code){t.loading=!1,t.$message({type:"success",message:e.data.msg}),t.edit=!1,t.name="";var i={href:e.config.url,msg:e.data.msg,token:t.$store.state.login.token};t.saveSystemLog(i)}})},repair:function(e){var t=this;this.loading=!0,this.edit=!1,Dt.DatabaseRepair(e).then(function(e){if(e&&200===e.data.code){t.loading=!1,t.$message({type:"success",message:e.data.msg});var i={href:e.config.url,msg:e.data.msg,token:t.$store.state.login.token};t.saveSystemLog(i)}})},optimize:function(e){var t=this;this.loading=!0,this.edit=!1,Dt.DatabaseOptimize(e).then(function(e){if(e&&200===e.data.code){t.loading=!1,t.$message({type:"success",message:e.data.msg});var i={href:e.config.url,msg:e.data.msg,token:t.$store.state.login.token};t.saveSystemLog(i)}})}}),mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getDatabaseLists()})}},xa={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-table",{attrs:{data:e.databaseLists.filter(function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}),width:"100%"}},[i("el-table-column",{attrs:{label:"表名",prop:"name","show-tooltip-when-overflow":!0,"min-width":"100",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"版本号",prop:"version","min-width":"100",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"引擎",prop:"engine","min-width":"100",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"数据表大小",prop:"data_length",align:"center",sortable:"","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{label:"自增量",prop:"auto_increment",align:"center",sortable:"","min-width":"100"}}),e._v(" "),i("el-table-column",{attrs:{label:"字符集编码",prop:"collation","show-tooltip-when-overflow":!0,"min-width":"120",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"备注",align:"center","min-width":"150","show-tooltip-when-overflow":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.name===e.name&&e.edit?i("el-input",{ref:"comment",attrs:{id:t.row.name,placeholder:"请输入数据表备注"},model:{value:t.row.comment,callback:function(i){e.$set(t.row,"comment",i)},expression:"scope.row.comment"}}):i("div",{domProps:{innerHTML:e._s(t.row.comment)}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"create_time",align:"center","min-width":"160"}}),e._v(" "),i("el-table-column",{attrs:{"min-width":"350",align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{placeholder:"输入关键词查询"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[i("el-button-group",[t.row.name===e.name&&e.edit&&e.btn.comment?i("el-button",{attrs:{round:"",type:"primary",plain:"",size:"small",icon:"el-icon-edit-outline"},on:{click:function(i){return e.updateComment(t.row)}}},[e._v("更 新")]):e.btn.comment?i("el-button",{attrs:{round:"",type:"primary",plain:"",size:"small",icon:"el-icon-edit"},on:{click:function(i){return e.setComment(t.row)}}},[e._v("修 改")]):e._e(),e._v(" "),e.btn.backup?i("el-button",{attrs:{round:"",type:"primary",plain:"",size:"small"},on:{click:function(i){return e.backup(t.row)}}},[e._v("备 份")]):e._e(),e._v(" "),e.btn.repair?i("el-button",{attrs:{round:"",type:"primary",plain:"",size:"small"},on:{click:function(i){return e.repair(t.row)}}},[e._v("修 复")]):e._e(),e._v(" "),e.btn.optimize?i("el-button",{attrs:{round:"",type:"primary",plain:"",size:"small"},on:{click:function(i){return e.optimize(t.row)}}},[e._v("优 化")]):e._e()],1)]}}])})],1)],1)},staticRenderFns:[]};var ka=i("VU/8")(wa,xa,!1,function(e){i("n5Y9")},"data-v-6157ea8d",null).exports,Ca=i("RRo+"),La=i.n(Ca),Sa={name:"lists",components:{Submit:Si,Delete:Ii,Radio:Ti,Upload:Ai},data:function(){return{oauthLists:[],page:1,limit:15,total:0,search:"",title:"",syncVisible:!1,modal:!0,labelWidth:"80px",loading:!0,destroy_on_close:!0,center:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"role",OauthModel:{},showCode:!1,showPassword:!1,oauthVisible:!1,cgi:{remove:y.oauthDelete,status:y.oauthUpdate,update:y.oauthUpdate,uploadUrl:"https://www.fanglonger.com/api/"+y.fileUpload},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],avatar_url:[{required:!0,message:"请上传用户头像",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:function(e,t,i){try{La()(t)||i(new Error("验证码格式错误")),6!==t.toString().length&&i(new Error("请输入6位长度的验证码")),i()}catch(e){i(new Error("验证码格式错误"))}},trigger:"blur"}],remember_token:[{required:!0,message:"请输入用户标识",trigger:"blur"}]},btn:{}}},computed:m()({},Object(p.c)(["userInfo","oauthConfig","dialogWidth"])),methods:m()({},Object(p.b)(["getOauthConfig","addTabs","addCurrTabs"]),{oauthLogin:function(){this.oauthVisible=!0,this.getOauthConfig("Oauth")},goto:function(e){var t=this;Dt.OauthBind({oauth_type:e,remember_token:this.userInfo.token}).then(function(e){if(e&&200===e.data.code){if(e.data.item.oauth_url)return window.open(e.data.item.oauth_url,"_self"),!1;var i={label:"账户绑定",name:e.data.item.local};t.activeName=i.name,t.addCurrTabs(i),t.addTabs(i),t.$router.push({path:i.name})}})},success:function(){this.syncVisible=!1,this.getOauthLists(this.page,this.limit)},uploadSuccess:function(e){this.OauthModel.avatar_url=e},getOauthLists:function(e,t){var i=this,a={page:e,limit:t};Dt.OauthLists(a).then(function(e){e&&200===e.data.code&&(i.oauthLists=e.data.item.data,i.total=e.data.item.total,i.loading=!1)})},sendMail:function(e){var t=this;this.$refs[this.reFrom].validate(function(i){if(i){var a={email:e.email,id:e.id,username:e.username,remember_token:e.remember_token};Dt.SendEmail(a).then(function(e){e&&200===e.data.code&&(t.$message({type:"success",message:e.data.msg}),t.showCode=!0)})}})},checkCode:function(e){var t=this,i={code:e.code,email:e.email};Dt.VerifyCode(i).then(function(i){i&&200===i.data.code?t.$message({type:"success",message:i.data.msg}):e.code=""})},sizeChange:function(e){this.limit=e,this.getOauthLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getOauthLists(this.page,this.limit)},updateOauth:function(e){this.title="修改授权用户",this.syncVisible=!0,this.OauthModel=e,this.showCode=!1,this.url=this.cgi.update}}),mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getOauthLists(this.page,this.limit)})}},Ma={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.oauthLogin}},[e._v("账号绑定")])],1)],1),e._v(" "),i("el-table",{attrs:{data:e.oauthLists.filter(function(t){return!e.search||t.username.toLowerCase().includes(e.search.toLowerCase())||t.oauth_type.toLowerCase().includes(e.search.toLowerCase())})}},[i("el-table-column",{attrs:{label:"#ID",prop:"id",align:"center",width:"100px"}}),e._v(" "),i("el-table-column",{attrs:{label:"用户名",prop:"username",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.avatar_url,fit:"fill",title:e.row.username,"preview-src-list":[e.row.avatar_url]}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"用户邮箱",prop:"email",align:"center","show-tooltip-when-overflow":""}}),e._v(" "),i("el-table-column",{attrs:{label:"账号来源",prop:"oauth_type",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",prop:"created_at",width:"160px",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"修改时间",prop:"updated_at",width:"160px",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"right",width:"200px"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{placeholder:"请输入关键词查询"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[e.btn.edit?i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.updateOauth(t.row)}}},[e._v("修 改")]):e._e(),e._v(" "),e.btn.del?i("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.oauthLists},on:{success:e.success}}):e._e()]}}])})],1),e._v(" "),i("div",{staticStyle:{margin:"25px 0"}},[i("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.syncVisible,modal:e.modal,width:e.dialogWidth,center:e.center,"destroy-on-close":e.destroy_on_close},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.OauthModel,"label-position":"left","label-width":"100px",rules:e.rules}},[i("el-form-item",{attrs:{label:"用户名称：",prop:"username"}},[i("el-input",{model:{value:e.OauthModel.username,callback:function(t){e.$set(e.OauthModel,"username",t)},expression:"OauthModel.username"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"flex","align-items":"center",position:"relative"},attrs:{label:"用户头像：",prop:"avatar_url",id:"avatar"}},[i("Upload",{attrs:{avatar_url:e.OauthModel.avatar_url,username:e.OauthModel.username},on:{uploadSuccess:e.uploadSuccess}})],1),e._v(" "),i("el-form-item",{attrs:{label:"邮箱账号：",prop:"email"}},[i("el-input",{model:{value:e.OauthModel.email,callback:function(t){e.$set(e.OauthModel,"email",t)},expression:"OauthModel.email"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-edit"},on:{click:function(t){return e.sendMail(e.OauthModel)}},slot:"append"},[e._v("绑定邮箱")])],1)],1),e._v(" "),e.showCode?i("el-form-item",{attrs:{label:"验证码：",prop:"code"}},[i("el-input",{attrs:{maxlength:"8"},on:{blur:function(t){return e.checkCode(e.OauthModel)}},model:{value:e.OauthModel.code,callback:function(t){e.$set(e.OauthModel,"code",e._n(t))},expression:"OauthModel.code"}})],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.OauthModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.oauthVisible,title:"账户授权登录","destroy-on-close":e.destroy_on_close,center:e.center,width:e.dialogWidth,id:"oauth"},on:{"update:visible":function(t){e.oauthVisible=t}}},e._l(e.oauthConfig,function(t,a){return 1===t.status?i("el-button",{key:a,attrs:{plain:"",type:"primary"},on:{click:function(i){return e.goto(t.name)}}},[e._v(e._s(t.name.toUpperCase()))]):e._e()}),1)],1)},staticRenderFns:[]};var $a=i("VU/8")(Sa,Ma,!1,function(e){i("y83Z")},null,null).exports,Ta={name:"lists",components:{Submit:Si,Delete:Ii,Radio:Ti},data:function(){return{reqRuleLists:[],ruleLists:[],userLists:[],page:1,limit:15,total:0,search:"",title:"",syncVisible:!1,labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"reqRule",reqRuleModel:{},cgi:{remove:y.reqRuleDelete,status:y.reqRuleUpdate,update:y.reqRuleUpdate,insert:y.reqRuleSave},rules:{username:[{required:!0,message:"申请人不得为空",trigger:"blur"}],href:[{required:!0,message:"授权地址不得为空",trigger:"change"}],expires:[{required:!0,message:"授权时效不得为空",trigger:"change"}],desc:[{required:!0,message:"授权说明不得为空",trigger:"blur"}],status:[{required:!0,message:"授权状态不得为空",trigger:"blur"}]},time:Date.parse(new Date)/1e3+604800,href:!1,pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()},shortcuts:[{text:"一星期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+6048e5),e.$emit("pick",t)}},{text:"一个月",onClick:function(e){var t=new Date;t.setTime(t.getTime()+2592e6),e.$emit("pick",t)}},{text:"三个月",onClick:function(e){var t=new Date;t.setTime(t.getTime()+7776e6),e.$emit("pick",t)}},{text:"六个月",onClick:function(e){var t=new Date;t.setTime(t.getTime()+15552e6),e.$emit("pick",t)}},{text:"一年",onClick:function(e){var t=new Date;t.setTime(t.getTime()+31104e6),e.$emit("pick",t)}}]},btn:{}}},computed:m()({},Object(p.c)(["userInfo","dialogWidth"])),methods:{success:function(){this.syncVisible=!1,this.getReqRuleLists(this.page,this.limit)},setTimes:function(e){return V.a.set_time(1e3*e)},getReqRuleLists:function(e,t){var i=this,a={page:e,limit:t};this.loading=!0,Dt.ReqRuleLists(a).then(function(e){e&&200===e.data.code&&(i.reqRuleLists=e.data.item.data,i.total=e.data.item.total,i.userLists=e.data.item.userLists,i.loading=!1)})},setAuthName:function(e){return Array(e.level+1).join("　　")+e.name},sizeChange:function(e){this.limit=e,this.getReqRuleLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getReqRuleLists(this.page,this.limit)},addReqRule:function(){this.title="权限申请",this.syncVisible=!0,this.reqRuleModel={username:"",href:"",desc:"",expires:"",status:1},this.url=this.cgi.insert,this.href=!1},getAuth:function(e){var t=this,i={user_id:e};Dt.GetAuthByToken(i).then(function(e){e&&200===e.data.code&&(t.ruleLists=e.data.item,t.href=!0)})},updateReqRule:function(e){this.title="权限续期",this.syncVisible=!0,this.reqRuleModel=e,this.reqRuleModel.href=[this.reqRuleModel.href],this.ruleLists=this.reqRuleModel.ruleLists,this.url=this.cgi.update,this.href=!0}},mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getReqRuleLists(this.page,this.limit)})}},Oa={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[e.btn.add?i("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.addReqRule}},[e._v("添 加")])],1)],1):e._e(),e._v(" "),i("el-table",{attrs:{data:e.reqRuleLists.filter(function(t){return!e.search||t.username.toLowerCase().includes(e.search.toLowerCase())||t.href.includes(e.search.toLowerCase())})}},[i("el-table-column",{attrs:{label:"#ID",prop:"id",width:"70px",align:"center",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{label:"申请人",prop:"username",width:"130px","show-tooltip-when-overflow":!0,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"授权地址",prop:"href",align:"center","show-tooltip-when-overflow":!0}}),e._v(" "),"admin"===e.userInfo.username?i("el-table-column",{attrs:{label:"授权状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?i("el-button",{attrs:{icon:"el-icon-success",circle:"",plain:"",type:"success",size:"medium"}}):i("Radio",{attrs:{item:t.row,url:e.cgi.status},on:{success:e.success}})]}}],null,!1,1648834844)}):e._e(),e._v(" "),"admin"!==e.userInfo.username?i("el-table-column",{attrs:{label:"授权状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?i("el-button",{attrs:{icon:"el-icon-success",circle:"",plain:"",type:"success",size:"medium"}}):e._e(),e._v(" "),2===t.row.status?i("el-button",{attrs:{icon:"el-icon-error",circle:"",plain:"",type:"info",size:"medium"}}):e._e()]}}],null,!1,1240247109)}):e._e(),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",prop:"created_at",align:"center",width:"160px",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{label:"修改时间",prop:"updated_at",align:"center",width:"160px",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{label:"权限时效",prop:"expires",align:"center",width:"160px",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200px",align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{placeholder:"请输入关键字查询"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[1===t.row.status&&e.btn.edit&&Date.parse(t.row.expires)/1e3<=e.time?i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:function(i){return e.updateReqRule(t.row)}}},[e._v("续 期")]):e._e(),e._v(" "),1===t.row.status&&e.btn.del?i("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.reqRuleLists,"btn-text":"撤 销"},on:{success:e.success}}):e._e()]}}])})],1),e._v(" "),i("div",{staticStyle:{margin:"25px 0"}},[i("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.syncVisible,modal:!0,width:e.dialogWidth,center:!0,"destroy-on-close":!0},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.reqRuleModel,rules:e.rules}},[i("el-form-item",{attrs:{label:"申请人",prop:"username"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},on:{change:e.getAuth},model:{value:e.reqRuleModel.username,callback:function(t){e.$set(e.reqRuleModel,"username",t)},expression:"reqRuleModel.username"}},e._l(e.userLists,function(e,t){return i("el-option",{key:t,attrs:{label:e.username,value:e.id}})}),1)],1),e._v(" "),e.href?i("el-form-item",{attrs:{label:"授权地址",prop:"href"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"multiple",filterable:""},model:{value:e.reqRuleModel.href,callback:function(t){e.$set(e.reqRuleModel,"href",t)},expression:"reqRuleModel.href"}},e._l(e.ruleLists,function(t,a){return i("el-option",{key:a,attrs:{label:e.setAuthName(t),value:t.href,disabled:t.disable}})}),1)],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"授权时间",prop:"expires"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择授权时间","picker-options":e.pickerOptions},model:{value:e.reqRuleModel.expires,callback:function(t){e.$set(e.reqRuleModel,"expires",t)},expression:"reqRuleModel.expires"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"授权说明",prop:"desc"}},[i("el-input",{attrs:{maxlength:"200","show-word-limit":"",resize:"none",autosize:{minRows:4},type:"textarea"},model:{value:e.reqRuleModel.desc,callback:function(t){e.$set(e.reqRuleModel,"desc",t)},expression:"reqRuleModel.desc"}})],1),e._v(" "),"admin"===e.userInfo.username?i("el-form-item",{attrs:{label:"是否授权",prop:"status"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:e.reqRuleModel.status,callback:function(t){e.$set(e.reqRuleModel,"status",t)},expression:"reqRuleModel.status"}},[i("el-radio-button",{attrs:{label:"2"}},[e._v("否")]),e._v(" "),i("el-radio-button",{attrs:{label:"1"}},[e._v("是")])],1)],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.reqRuleModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var Va=i("VU/8")(Ta,Oa,!1,function(e){i("0sLT")},"data-v-33497852",null).exports,Ia={name:"lists",components:{VueJson:Ut},data:function(){return{areaLists:[],loading:!0,loadingText:"玩命加载中。。。",search:"",pid:1,showCity:!1,cityName:"",weather:{}}},computed:m()({},Object(p.c)(["dialogWidth"])),methods:{getAreaLists:function(e){var t=this;Dt.AreaLists({parent_id:e},y.areaIndex).then(function(e){e&&200===e.data.code&&(t.areaLists=e.data.item,t.loading=!1)})},load:function(e,t,i){Dt.AreaLists({parent_id:e.id},y.areaIndex).then(function(e){e&&200===e.data.code&&setTimeout(function(){i(e.data.item)},500)})},getWeather:function(e){var t=this,i={code:e.code,id:e.id,parent_id:e.pid};Dt.AreaWeather(i).then(function(e){e&&200===e.data.code&&(t.$message.success(e.data.msg),t.getAreaLists(t.pid))})},searchWeather:function(e){this.showCity=!0,this.cityName=e.name,this.weather=JSON.parse(e.forecast)}},mounted:function(){this.$nextTick(function(){this.getAreaLists(this.pid)})}},Ra={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-table",{attrs:{data:e.areaLists.filter(function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}),"row-key":"id","tree-props":{children:"__child",hasChildren:"hasChildren"},lazy:"",load:e.load}},[i("el-table-column",{attrs:{label:"地区名称",prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{label:"天气",prop:"info","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{placeholder:"输入关键词查询"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.getWeather(t.row)}}},[e._v("天气同步")]),e._v(" "),i("el-button",{attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-search"},on:{click:function(i){return e.searchWeather(t.row)}}},[e._v("天气预告")])]}}])})],1),e._v(" "),i("el-dialog",{attrs:{visible:e.showCity,width:e.dialogWidth,title:"【"+e.cityName+"】天气预告",center:""},on:{"update:visible":function(t){e.showCity=t}}},[i("VueJson",{attrs:{"json-data":e.weather}})],1)],1)},staticRenderFns:[]};var Da=i("VU/8")(Ia,Ra,!1,function(e){i("ktkw")},"data-v-be052cda",null).exports,Fa={name:"lists",components:{Submit:Si,Delete:Ii,Radio:Ti},data:function(){return{pushLists:[],page:1,limit:15,state:"",status:"",total:0,search:"",oauthLists:[],title:"",syncVisible:!1,modal:!0,labelWidth:"80px",loading:!0,destroy_on_close:!0,center:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"push",pushModel:{},cgi:{insert:y.pushSave,update:y.pushUpdate,remove:y.pushDelete,status:y.pushUpdate},rules:{info:[{required:!0,message:"站内通知不得为空",trigger:"blur"}],title:[{required:!0,message:"站内通知标题不得为空",trigger:"blur"}]},pushState:[{val:"successfully",label:"成功",type:"success"},{val:"failed",label:"失败",type:"danger"},{val:"offline",label:"离线",type:"default"}],btn:{}}},computed:m()({},Object(p.c)(["userInfo","dialogWidth"])),methods:{success:function(){this.syncVisible=!1,this.getPushLists(this.page,this.limit)},filterStatus:function(e,t){return t.status.toString()===e},setType:function(e){var t="";switch(e){case"failed":t="danger";break;case"successfully":t="success";break;case"offline":t="default"}return t},getPushLists:function(e,t){var i=this,a={page:e,limit:t,state:this.state,status:this.status};Dt.PushList(a).then(function(e){i.pushLists=e.data.item.data,i.total=e.data.item.total,i.oauthLists=e.data.item.oauth}),this.loading=!1},changeOauthName:function(e){var t=this;this.oauthLists.map(function(i){e===i.uuid&&(t.pushModel.username=i.username)}),this.pushModel.uid="all"!==e?e:""},getState:function(e){this.state=e,this.getPushLists(1,this.limit)},sizeChange:function(e){this.limit=e,this.getPushLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getPushLists(this.page,this.limit)},addPush:function(){this.title="添加站内通知",this.syncVisible=!0,this.pushModel={username:"all",uid:"",state:"",status:2,created_at:V.a.set_time(new Date),title:"系统通知"},this.url=this.cgi.insert},updatePush:function(e){this.title="修改站内通知",this.syncVisible=!0,this.pushModel=e,this.url=this.cgi.update}},mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getPushLists(this.page,this.limit)})}},Na={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[i("el-form-item",e._l(e.pushState,function(t,a){return i("el-button",{key:a,attrs:{type:t.type,size:"medium",plain:""},on:{click:function(i){return e.getState(t.val)}}},[e._v(e._s(t.val.toUpperCase()))])}),1),e._v(" "),e.btn.add?i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.addPush}},[e._v("添 加")])],1):e._e()],1),e._v(" "),i("el-table",{attrs:{data:e.pushLists.filter(function(t){return!e.search||t.username.toLowerCase().includes(e.search.toLowerCase())||t.info.toLowerCase().includes(e.search.toLowerCase())})}},[i("el-table-column",{attrs:{label:"#",prop:"id",width:"100px"}}),e._v(" "),i("el-table-column",{attrs:{label:"目标用户",prop:"username",width:"120px"}}),e._v(" "),i("el-table-column",{attrs:{label:"推送类型",prop:"title",width:"150px"}}),e._v(" "),i("el-table-column",{attrs:{label:"推送内容",prop:"info","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{label:"实时",width:"80px",filters:[{text:"是",value:"1"},{text:"否",value:"2"}],"filter-method":e.filterStatus},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.status?i("el-button",{attrs:{plain:"",type:"primary",size:"mini"}},[e._v("否")]):e._e(),e._v(" "),1===t.row.status?i("el-button",{attrs:{plain:"",type:"success",size:"mini"}},[e._v("是")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"推送状态",prop:"state",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{plain:"",type:e.setType(t.row.state),size:"mini"}},[e._v(e._s(t.row.state.toUpperCase()))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"时间",prop:"created_at",width:"200px"}}),e._v(" "),i("el-table-column",{attrs:{width:"200px",align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{placeholder:"请输入关键词查询"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return["successfully"!==t.row.state&&e.btn.edit?i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.updatePush(t.row)}}},[e._v("执 行")]):e._e(),e._v(" "),e.btn.del?i("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.pushLists},on:{success:e.success}}):e._e()]}}])})],1),e._v(" "),i("div",{staticStyle:{margin:"25px 0"}},[i("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,width:e.dialogWidth,visible:e.syncVisible,modal:e.modal,center:e.center,"destroy-on-close":e.destroy_on_close},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.pushModel,rules:e.rules}},[i("el-form-item",{attrs:{label:"用户名",prop:"username"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},on:{change:e.changeOauthName},model:{value:e.pushModel.username,callback:function(t){e.$set(e.pushModel,"username",t)},expression:"pushModel.username"}},[i("el-option",{attrs:{label:"所有人",value:"all"}}),e._v(" "),e._l(e.oauthLists,function(e,t){return i("el-option",{key:t,attrs:{label:e.username,value:e.uuid}})})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"UUID",prop:"uid"}},[i("el-input",{attrs:{readonly:"",placeholder:"用户UUID"},model:{value:e.pushModel.uid,callback:function(t){e.$set(e.pushModel,"uid",t)},expression:"pushModel.uid"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"推送标题"},model:{value:e.pushModel.title,callback:function(t){e.$set(e.pushModel,"title",t)},expression:"pushModel.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"时间",prop:"created_at"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss"},model:{value:e.pushModel.created_at,callback:function(t){e.$set(e.pushModel,"created_at",t)},expression:"pushModel.created_at"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"消息",prop:"info"}},[i("el-input",{attrs:{placeholder:"推送消息",type:"textarea",resize:"none",rows:"4"},model:{value:e.pushModel.info,callback:function(t){e.$set(e.pushModel,"info",t)},expression:"pushModel.info"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"实时推送",prop:"status"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:e.pushModel.status,callback:function(t){e.$set(e.pushModel,"status",t)},expression:"pushModel.status"}},[i("el-radio-button",{attrs:{label:"2"}},[e._v("否")]),e._v(" "),i("el-radio-button",{attrs:{label:"1"}},[e._v("是")])],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.pushModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var za=i("VU/8")(Fa,Na,!1,function(e){i("kaR9")},"data-v-25a63d6d",null).exports,Ua={name:"lists",components:{Delete:Ii},data:function(){return{chatLists:[],page:1,limit:10,total:0,title:"",syncVisible:!1,modal:!0,labelWidth:"80px",loading:!0,destroy_on_close:!0,center:!0,loadingText:"玩命加载中。。。",cgi:{remove:y.remove,status:y.status},rules:{}}},methods:{unescape:function(e){return e.replace(e?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;nbsp;/g," ").replace(/&#39;/g,"'")},success:function(){this.syncVisible=!1},setTimes:function(e){return V.a.set_time(1e3*e)},getChatLists:function(e,t){var i=this;Dt.ChatLists({page:e,limit:t}).then(function(e){i.loading=!1,i.chatLists=e.data.item.data,i.total=e.data.item.total})},sizeChange:function(e){this.limit=e,this.getChatLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getChatLists(this.page,this.limit)}},mounted:function(){this.$nextTick(function(){this.getChatLists(this.page,this.limit)})}},Ea={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}}),e._v(" "),i("el-table",{attrs:{data:e.chatLists}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"发送方："}},[i("span",[e._v(e._s(t.row.content.from_client_name))])]),e._v(" "),i("el-form-item",{attrs:{label:"接收ID："}},[i("span",[e._v(e._s(t.row.content.to_client_id))])]),e._v(" "),i("el-form-item",{attrs:{label:"发送ID："}},[i("span",[e._v(e._s(t.row.content.from_client_id))])]),e._v(" "),i("el-form-item",{attrs:{label:"接收方："}},[i("span",[e._v(e._s(t.row.content.to_client_name))])]),e._v(" "),i("el-form-item",{attrs:{label:"用户头像："}},[i("el-avatar",{attrs:{src:t.row.content.client_img,size:30,alt:t.row.content.from_client_name}})],1),e._v(" "),i("el-form-item",{attrs:{label:"消息类型："}},[i("span",[e._v(e._s(t.row.content.msg_type))])]),e._v(" "),i("el-form-item",{attrs:{label:"发送内容："}},[i("span",{domProps:{innerHTML:e._s(e.unescape(t.row.content.content))}})]),e._v(" "),i("el-form-item",{attrs:{label:"发送时间："}},[i("span",[e._v(e._s(t.row.content.time))])])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"发送者",prop:"from_client_id"}}),e._v(" "),i("el-table-column",{attrs:{label:"接收者",prop:"to_client_id"}}),e._v(" "),i("el-table-column",{attrs:{label:"房间号",prop:"room_id"}}),e._v(" "),i("el-table-column",{attrs:{label:"发送时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{innerHTML:e._s(t.row.content.time)}})]}}])})],1),e._v(" "),i("div",{staticStyle:{margin:"25px 0"}},[i("el-pagination",{attrs:{"page-size":e.limit,layout:"total, prev, pager, next",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var qa=i("VU/8")(Ua,Ea,!1,function(e){i("XRGo")},"data-v-31c2aaaa",null).exports,Aa={name:"markdown",data:function(){return{value:'```JavaScript\n<template>\n    <mavon-editor @imgAdd="uploadFile" ref="md" v-model="value"/>\n</template>\n\n<script>\n    import $url from "../../api/url"\n    import func from "../../api/func"\n    export default {\n        name: "markdown",\n        data(){\n            return {\n                value:"",\n                uploadUrl:process.env.API_ROOT+$url.fileUpload,\n                token:""\n            }\n        },\n        created(){\n            this.token = this.$store.state.login.token;\n        },\n        methods:{\n            /**\n             * TODO:图片上传\n             * @param post\n             * @param file\n             */\n            uploadFile:function (post,file) {\n                let type = file.type;\n                let typeArr = ["image/jpg","image/gif","image/png","image/jpeg"];\n                if (!typeArr.includes(type)){\n                    this.$message({type:"warning",message:"upload image format error"});\n                    return false;\n                }\n                if (file.size>2*1024*1024){\n                    this.$message({type:"warning",message:"upload image size error"});\n                    return false;\n                }\n                let params = new FormData();\n                params.append("file",file);\n                params.append("token",this.token);\n                params.append("rand",true);\n                let config = {headers: {"Content-Type": "multipart/form-data","Authorization":`${func.set_password(func.set_random(32),func.set_random(12))}${this.token}${func.set_password(func.set_random(32),func.set_random(12))}`}}\n                this.$http.post(this.uploadUrl,params,config).then(response=>{\n                    this.$refs["md"].$img2Url(post, response.data.item.src);\n                })\n            },\n        },\n    }\n<\/script>\n```',uploadUrl:"https://www.fanglonger.com/api/"+y.fileUpload.replace("/",""),token:""}},created:function(){this.token=this.$store.state.login.token},methods:{uploadFile:function(e,t){var i=this,a=t.type;if(!["image/jpg","image/gif","image/png","image/jpeg"].includes(a))return this.$message({type:"warning",message:"upload image format error"}),!1;if(t.size>2097152)return this.$message({type:"warning",message:"upload image size error"}),!1;var s=new FormData;s.append("file",t),s.append("token",this.token),s.append("rand",!0);var n={headers:{"Content-Type":"multipart/form-data",Authorization:""+V.a.set_password(V.a.set_random(32),V.a.set_random(12))+this.token+V.a.set_password(V.a.set_random(32),V.a.set_random(12))}};this.$http.post(this.uploadUrl,s,n).then(function(t){i.$refs.md.$img2Url(e,t.data.item.src)})},getData:function(e,t){console.log(e,t)}}},ja={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("mavon-editor",{ref:"md",staticStyle:{"z-index":"1"},on:{imgAdd:e.uploadFile,change:e.getData},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})},staticRenderFns:[]};var Wa=i("VU/8")(Aa,ja,!1,function(e){i("vBu6")},"data-v-4e903099",null).exports,Pa={action:"https://www.fanglonger.com/api/"+y.fileUpload.replace("/",""),methods:"POST",token:localStorage.token,name:"file",size:2,rand:!0,accept:"image/png, image/gif, image/jpeg, image/bmp, image/x-icon, image/jpg"},Ba={placeholder:"Compose an epic...",theme:"snow",modules:{toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]],handlers:{image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null===t&&((t=document.createElement("input")).setAttribute("type","file"),Pa.name&&t.setAttribute("name",Pa.name),t.setAttribute("accept",Pa.accept),t.classList.add("ql-image"),t.addEventListener("change",function(){if(Pa.size&&t.files[0].size>=1024*Pa.size)t.value="";else{var i=new FormData;i.append(Pa.name,t.files[0]),Pa.token&&i.append("token",Pa.token),Pa.rand&&i.append("rand",Pa.rand);var a=new XMLHttpRequest;a.open(Pa.methods,Pa.action,!0),a.setRequestHeader("Authorization",""+V.a.set_password(V.a.set_random(32),V.a.set_random(12))+localStorage.token+V.a.set_password(V.a.set_random(32),V.a.set_random(12))),a.upload.onloadstart=function(e){t.value=""},a.onload=function(i){if(200===a.status){var s=JSON.parse(a.responseText),n=e.quill.getSelection(!0).index;e.quill.insertEmbed(n,"image",s.item.src),e.quill.setSelection(n+1)}t.value=""},a.upload.onerror=function(e){},a.upload.onloadend=function(e){},a.send(i)}}),this.container.appendChild(t)),t.click()}}}}},Ha={data:function(){return{messages:"",avatar_url:"",editorOption:Ba}},methods:{onEditorBlur:function(){console.log("blur",this.messages)},onEditorFocus:function(){console.log("focus",this.messages)},onEditorReady:function(){console.log("ready",this.messages)},onEditorChange:function(e){var t=e.quill,i=e.html,a=e.text;console.log({quill:t,html:i,text:a})}}},Ja={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("quill-editor",{ref:"myQuillEditor",staticStyle:{height:"400px","padding-bottom":"40px"},attrs:{id:"quill",options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)},ready:function(t){return e.onEditorReady(t)}},model:{value:e.messages,callback:function(t){e.messages=t},expression:"messages"}})},staticRenderFns:[]};var Ga=i("VU/8")(Ha,Ja,!1,function(e){i("HZds")},null,null).exports,Ya={name:"timeline",components:{Delete:Ii,Submit:Si},data:function(){return{timeLineList:[],page:1,limit:15,total:0,search:"",title:"",syncVisible:!1,modal:!0,labelWidth:"80px",loading:!0,destroy_on_close:!0,center:!0,loadingText:"玩命加载中。。。",reFrom:"timeline",timeLineModel:{},refs:this.$refs,url:"",cgi:{save:y.timeLineSave,update:y.timeLineUpdate},rules:{content:[{required:!0,message:"文案不得为空",trigger:"blur"}],timestamp:[{required:!0,message:"时间不得为空",trigger:"change"}]},btn:{},typeLists:[{key:"SUCCESS",val:"success"},{key:"INFO",val:"info"},{key:"PRIMARY",val:"primary"},{key:"DANGER",val:"danger"},{key:"WARNING",val:"warning"}]}},computed:m()({},Object(p.c)(["userInfo","dialogWidth"])),methods:{success:function(){this.syncVisible=!1,this.getTimeLineList(this.page,this.limit)},getTimeLineList:function(e,t){var i=this;Dt.TimeLineLists({page:e,limit:t}).then(function(e){i.loading=!1,i.timeLineList=e.data.item.data,i.total=e.data.item.total})},addTimeLine:function(){this.syncVisible=!0,this.title="添加时间线",this.timeLineModel={content:"",type:"success",timestamp:V.a.set_time(1e3*V.a.get_timestamp())},this.url=this.cgi.save},editTimeLine:function(e){this.title="修改时间线",this.timeLineModel=e,this.syncVisible=!0,this.url=this.cgi.update},sizeChange:function(e){this.limit=e,this.getTimeLineList(this.page,this.limit)},currentChange:function(e){this.page=e,this.getTimeLineList(this.page,this.limit)}},mounted:function(){this.$nextTick(function(){this.btn=V.a.set_btn_status(this.$route.path,this.$route.name,this.userInfo.auth),this.getTimeLineList(this.page,this.limit)})}},Za={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[i("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[i("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[e.btn.add?i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.addTimeLine}},[e._v("添 加")])],1):e._e()],1)],1),e._v(" "),i("el-table",{attrs:{data:e.timeLineList}},[i("el-table-column",{attrs:{label:"#",prop:"id",width:"100px"}}),e._v(" "),i("el-table-column",{attrs:{label:"文案",prop:"content","show-tooltip-when-overflow":!0}}),e._v(" "),i("el-table-column",{attrs:{label:"时间",prop:"timestamp"}}),e._v(" "),i("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:t.row.type,size:"mini",plain:""}},[e._v(e._s(t.row.type.toUpperCase()))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"200px",align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{placeholder:"请输入关键词查询"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[e.btn.edit?i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.editTimeLine(t.row)}}},[e._v("修 改")]):e._e(),e._v(" "),e.btn.del?i("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.timeLineList},on:{success:e.success}}):e._e()]}}])})],1),e._v(" "),i("div",{staticStyle:{margin:"25px 0"}},[i("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,width:e.dialogWidth,visible:e.syncVisible,modal:e.modal,center:e.center,"destroy-on-close":e.destroy_on_close},on:{"update:visible":function(t){e.syncVisible=t}}},[i("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.timeLineModel,rules:e.rules}},[i("el-form-item",{attrs:{label:"文案",prop:"content"}},[i("el-input",{attrs:{placeholder:"文案"},model:{value:e.timeLineModel.content,callback:function(t){e.$set(e.timeLineModel,"content",t)},expression:"timeLineModel.content"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型",prop:"type"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},model:{value:e.timeLineModel.type,callback:function(t){e.$set(e.timeLineModel,"type",t)},expression:"timeLineModel.type"}},e._l(e.typeLists,function(e,t){return i("el-option",{key:t,attrs:{value:e.val,label:e.key}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"时间",prop:"timestamp"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},model:{value:e.timeLineModel.timestamp,callback:function(t){e.$set(e.timeLineModel,"timestamp",t)},expression:"timeLineModel.timestamp"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("Submit",{attrs:{reFrom:e.reFrom,model:e.timeLineModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var Qa=i("VU/8")(Ya,Za,!1,function(e){i("CXt4")},"data-v-49b4fc16",null).exports,Ka={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:5,offset:9}},[t("img",{staticStyle:{width:"500px","margin-top":"200px"},attrs:{src:i("zAji"),alt:"返回首页"}})])],1)],1)},staticRenderFns:[]};var Xa=i("VU/8")({name:"empty",data:function(){return{}}},Ka,!1,function(e){i("KvLZ")},"data-v-3fd8febc",null).exports,es={name:"Table",components:{Delete:Ii},props:{tableData:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},empty:{type:String,default:"暂无数据"},searchOptionsRules:{type:Object,default:function(){}},searchOptions:{type:Array,default:function(){return[]}},searchOption:{type:Object,default:function(){}},remove:{type:String,default:y.componentAction}},methods:m()({},Object(p.b)(["saveSystemLog"]),{search:function(){for(var e in this.searchOptions)this.searchOption[this.searchOptions[e].prop]=this.searchOptions[e].model;this.$emit("search",this.searchOption)},handleCommand:function(e){this.searchOption.lan=e,this.$emit("search",this.searchOption)},ExcelExport:function(){var e=this;Dt.ExcelExport(this.searchOption).then(function(t){if(t&&200===t.data.code){var i={href:y.excelExport,msg:t.data.msg,token:e.$store.state.login.token};return e.saveSystemLog(i),e.$message({type:"success",message:t.data.msg}),window.open("https://www.fanglonger.com/api/"+y.fileDownload.replace("/","")+"?token="+e.$store.state.login.token+"&path="+t.data.item.href+"&name="+t.data.item.name,"__target"),!1}e.$message({type:"warning",message:t.data.msg})})},removeResource:function(e,t){var i=this;this.$confirm("This operation will always delete the record, whether to continue？","Delete Record",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(function(){Dt.RemoveData({id:e.id},i.remove).then(function(e){if(e&&200===e.data.code){i.tableData.splice(t,1);var a={href:i.remove,msg:e.data.msg,token:i.$store.state.login.token};return i.saveSystemLog(a),i.$message({type:"success",message:e.data.msg}),i.$emit("removeSuccess"),!1}i.$message({type:"warning",message:e.data.msg})},function(e){console.log(e)})}).catch(function(){i.$message({type:"info",message:"Cancelled！"})})}}),mounted:function(){this.$nextTick(function(){})}},ts={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{attrs:{inline:!0,rules:e.searchOptionsRules,model:e.searchOption}},[e._l(e.searchOptions,function(t,a){return"input"===t.type?i("el-form-item",{key:a,attrs:{label:t.label,prop:t.prop}},[i("el-input",{attrs:{placeholder:t.tips},model:{value:t.model,callback:function(i){e.$set(t,"model",i)},expression:"search.model"}})],1):e._e()}),e._v(" "),e._l(e.searchOptions,function(t,a){return"datetime"===t.type?i("el-form-item",{key:a,attrs:{label:t.label,prop:t.prop}},[i("el-date-picker",{attrs:{type:t.datetype||"daterange","value-format":t.format||"yyyy-MM-dd",format:t.format||"yyyy-MM-dd","start-placeholder":t.tips.split("-")[0],"end-placeholder":t.tips.split("-")[1]},model:{value:t.model,callback:function(i){e.$set(t,"model",i)},expression:"search.model"}})],1):e._e()}),e._v(" "),e._l(e.searchOptions,function(t,a){return"select"===t.type?i("el-form-item",{key:a,attrs:{label:t.label,prop:t.prop}},[i("el-select",{attrs:{placeholder:t.tips},model:{value:t.model,callback:function(i){e.$set(t,"model",i)},expression:"search.model"}},e._l(t.options,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1):e._e()}),e._v(" "),i("el-form-item",[i("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"medium",plain:"plain"},on:{click:e.search}},[e._v("Search")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-download",type:"primary",size:"medium",plain:"plain"},on:{click:e.ExcelExport}},[e._v("Excel Export To Server")]),e._v(" "),i("el-dropdown",{attrs:{"split-button":"",trigger:"click",type:"primary",size:"medium"},on:{command:e.handleCommand}},[e._v("\n                "+e._s("zh"===e.searchOption.lan?"中文":"English")+"\n                "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"zh"}},[e._v("中文")]),e._v(" "),i("el-dropdown-item",{attrs:{command:"en"}},[e._v("English")])],1)],1)],1)],2),e._v(" "),i("el-table",{attrs:{data:e.tableData,"empty-text":e.empty,border:""}},[e._l(e.columns,function(e,t){return i("el-table-column",{key:t,attrs:{align:"center","show-overflow-tooltip":"",label:e.label,prop:e.prop}})}),e._v(" "),i("el-table-column",{attrs:{align:"center",fixed:"right",label:"Action",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-edit"}},[e._v(e._s("zh"===e.searchOption.lan?"修改":"Edit"))]),e._v(" "),i("el-tooltip",{attrs:{content:"look before you leap",placement:"top"}},[i("el-button",{attrs:{plain:"",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(i){return e.removeResource(t.row,t.$index)}}},[e._v(e._s("zh"===e.searchOption.lan?"删除":"Delete"))])],1)]}}])})],2)],1)},staticRenderFns:[]};var is={name:"table-example",components:{TableComponent:i("VU/8")(es,ts,!1,function(e){i("ABPY")},"data-v-a1a556e8",null).exports},data:function(){return{columns:[],tableData:[],searchOptions:[],searchOption:{},params:{table:"os_users",lan:"zh"}}},methods:{getResource:function(e){var t=this;Dt.TableComponents(e).then(function(e){for(var i in t.columns=e.data.item.columns,t.tableData=e.data.item.data,t.searchOptions=e.data.item.searchOptions,e.data.item.searchOption)t.searchOption[i]=e.data.item.searchOption[i]})},removeSuccess:function(){this.getResource(this.params)}},mounted:function(){this.$nextTick(function(){this.getResource(this.params)})}},as={render:function(){var e=this.$createElement;return(this._self._c||e)("TableComponent",{attrs:{tableData:this.tableData,columns:this.columns,"search-options":this.searchOptions,"search-option":this.searchOption},on:{search:this.getResource,removeSuccess:this.removeSuccess}})},staticRenderFns:[]};var ss=i("VU/8")(is,as,!1,function(e){i("TOyV")},"data-v-67c81cce",null).exports,ns={name:"form-component",components:{Submit:Si},props:{formData:{type:Object,default:function(){}},searchOptions:{type:Array,default:function(){return[]}},rules:{type:Object,default:function(){}},labelWidth:{type:String,default:"0"},update:{type:String,default:y.componentAction}},data:function(){return{}},methods:m()({},Object(p.b)(["saveSystemLog"]),{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){for(var i in t.searchOptions)t.formData[t.searchOptions[i].prop]=t.searchOptions[i].model;return t.formData.token=t.$store.state.login.token,Dt.SaveData(t.formData,t.update).then(function(e){if(e&&200===e.data.code){var i={href:y.componentAction,msg:e.data.msg,token:t.$store.state.login.token};return t.saveSystemLog(i),t.$message({type:"success",message:e.data.msg}),t.$emit("success"),!1}},function(e){console.log(e)}),!0}t.$message({type:"warning",message:"Please check field integrity ~"})})},resetForm:function(e){this.$refs[e].resetFields()}}),mounted:function(){this.$nextTick(function(){console.log(this.formData)})}},rs={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{ref:"reFrom",attrs:{model:e.formData,rules:e.rules,"label-width":e.labelWidth}},[e._l(e.searchOptions,function(t,a){return"input"===t.type?i("el-form-item",{key:a,attrs:{label:t.label,prop:t.prop}},[i("el-input",{attrs:{placeholder:t.tips},model:{value:t.model,callback:function(i){e.$set(t,"model",i)},expression:"search.model"}})],1):e._e()}),e._v(" "),e._l(e.searchOptions,function(t,a){return"datetime"===t.type?i("el-form-item",{key:a,attrs:{label:t.label,prop:t.prop}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:t.datetype||"daterange","value-format":t.format||"yyyy-MM-dd",format:t.format||"yyyy-MM-dd","start-placeholder":t.tips.split("-")[0],"end-placeholder":t.tips.split("-")[1]},model:{value:t.model,callback:function(i){e.$set(t,"model",i)},expression:"search.model"}})],1):e._e()}),e._v(" "),e._l(e.searchOptions,function(t,a){return"select"===t.type?i("el-form-item",{key:a,attrs:{label:t.label,prop:t.prop}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.tips},model:{value:t.model,callback:function(i){e.$set(t,"model",i)},expression:"search.model"}},["0"===t.model?i("el-option",{attrs:{label:"Default",value:"0",selected:""}}):e._e(),e._v(" "),e._l(t.options,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1):e._e()}),e._v(" "),e._l(e.searchOptions,function(t,a){return"radio"===t.type?i("el-form-item",{key:a,attrs:{label:t.label,prop:t.prop}},[i("el-radio-group",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.model,callback:function(i){e.$set(t,"model",i)},expression:"search.model"}},e._l(t.options,function(t,a){return i("el-radio-button",{key:a,attrs:{label:t.label}},[e._v(e._s(t.value))])}),1)],1):e._e()}),e._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{plain:""},on:{click:function(t){return e.resetForm("reFrom")}}},[e._v("Cancel")]),e._v(" "),i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.submitForm("reFrom")}}},[e._v("Confirm")])],1)],2)},staticRenderFns:[]};var os={name:"forms",components:{FormComponent:i("VU/8")(ns,rs,!1,function(e){i("0tTl")},"data-v-7107f136",null).exports},data:function(){return{dialogVisible:!0,formData:{datetime:[],name:"",radio:"1",select:""},searchOptions:[{type:"datetime",label:"DateTime",prop:"datetime",model:[],datetype:"daterange",format:"yyyy-MM-dd",tips:"Please select params - Please select params"},{type:"input",label:"Name",prop:"name",model:"",tips:"Please input params"},{type:"radio",label:"Radio",prop:"radio",model:"1",tips:"Please select params",options:[{label:"1",value:"Close"},{label:"2",value:"Open"}]},{type:"select",label:"Select",prop:"select",model:"",options:[{label:"Successfully",value:"1"},{label:"Offline",value:"2"},{label:"Failed",value:"3"}],tips:"Please select params"}]}}},ls={render:function(){var e=this.$createElement;return(this._self._c||e)("FormComponent",{attrs:{"search-options":this.searchOptions,"form-data":this.formData}})},staticRenderFns:[]};var cs=i("VU/8")(os,ls,!1,function(e){i("0zgu")},"data-v-48ea2aae",null).exports;n.default.use(u.a);var us=new u.a({mode:"history",routes:[{path:"/",name:"/",component:ki,meta:{mode:"",title:"登录"}},{path:"/login",name:"Login",component:ki,meta:{mode:"",title:"登录"}},{path:"/404",name:"Empty",component:Xa,meta:{mode:"",title:"404"}},{path:"/admin",name:"Admin",component:oi,meta:{mode:"",title:"首页"}},{path:"/admin",component:oi,children:[{path:"index/:access_token?",name:"Welcome",component:mi,meta:{mode:"",title:"欢迎页"}},{path:"auth/index",name:"AuthLists",component:Fi,meta:{mode:"rule",title:"权限列表"}},{path:"role/index",name:"RoleLists",component:Ui,meta:{mode:"role",title:"角色列表"}},{path:"user/index",name:"UserLists",component:Pi,meta:{mode:"user",title:"管理员列表"}},{path:"user/center",name:"UserCenter",component:Ji,meta:{mode:"user_center",title:"个人中心"}},{path:"user/bind/:access_token?",name:"UserBind",component:Zi,meta:{mode:"user_bind",title:"账户绑定"}},{path:"oauth/index",name:"OauthLists",component:$a,meta:{mode:"oauth",title:"授权用户"}},{path:"req-rule/index",name:"ReqRuleLists",component:Va,meta:{mode:"req_rule",title:"申请授权列表"}},{path:"log/index",name:"LogLists",component:Xi,meta:{mode:"log",title:"日志列表"}},{path:"system/log",name:"SystemLog",component:aa,meta:{mode:"log",title:"系统日志"}},{path:"file/index",name:"SystemFile",component:ra,meta:{mode:"file",title:"文件列表"}},{path:"image/preview",name:"ImagePreview",component:da,meta:{mode:"file",title:"图片预览"}},{path:"config/index",name:"ConfigLists",component:ha,meta:{mode:"config",title:"基础配置"}},{path:"category/index",name:"ApiLists",component:va,meta:{mode:"api_lists",title:"项目列表"}},{path:"apidoc/index",name:"APIDoc",component:ya,meta:{mode:"api_lists",title:"APIDoc"}},{path:"database/index",name:"DatabaseLists",component:ka,meta:{mode:"",title:"数据表列表"}},{path:"area/index",name:"AreaLists",component:Da,meta:{mode:"china_area",title:"城市列表"}},{path:"push/index",name:"PushList",component:za,meta:{mode:"push",title:"站内通知"}},{path:"chat/index",name:"ChatLists",component:qa,meta:{mode:"chat",title:"聊天记录"}},{path:"editor/markdown",name:"MarkDown",component:Wa,meta:{mode:"push",title:"MarkDown"}},{path:"editor/quill",name:"UEditor",component:Ga,meta:{mode:"push",title:"Quill"}},{path:"timeline/index",name:"TimeLine",component:Qa,meta:{mode:"timeline",title:"时间线"}},{path:"example/table",name:"TableExample",component:ss,meta:{mode:"",title:"表格组件"}},{path:"example/form",name:"FormExample",component:cs,meta:{mode:"",title:"表单组件"}}]},{path:"/chat",name:"chatRoom",component:ii,meta:{mode:"chat",title:"聊天室"}},{path:"*",redirect:"/404"}]}),ds=i("NC6I"),ms=i.n(ds),ps=(i("pw1w"),i("OS1Z")),hs=i.n(ps),fs=i("G0J2"),gs=i.n(fs),vs=(i("3f40"),i("4qOc"),i("+cgv"),i("iUJ9"));i("AmOA");n.default.use(vs.a),n.default.use(gs.a),n.default.config.productionTip=!1,n.default.use(hs.a),n.default.use(o.a),n.default.use(u.a),n.default.prototype.$http=Ue,n.default.prototype.md5=ms.a,us.beforeEach(function(e,t,i){if(e.meta.title&&(document.title=e.meta.title),e.params.access_token&&F.commit("setToken",e.params.access_token),"Empty"!==e.name)if("chatDemo"!==e.name||localStorage.getItem("token"))if("Login"===e.name||"/"===e.name){if(!F.state.login.token)return void i();Dt.CheckToken({token:F.state.login.token?F.state.login.token:localStorage.getItem("token")}).then(function(t){if(t&&t.data.code===T.a.SUCCESS)return i({path:"/admin/index",redirect:e.path}),void F.commit("setUserInfo",t.data.item);i()})}else Dt.CheckToken({token:F.state.login.token?F.state.login.token:localStorage.getItem("token")}).then(function(t){if(t&&t.data.code!==T.a.SUCCESS)return i({path:"/login",redirect:e.path}),void F.commit("setToken","");F.commit("setUserInfo",t.data.item);if(-1===F.state.login.userInfo.auth.indexOf(e.path)&&!["Welcome","UserBind","Empty","chatRoom"].includes(e.name)){var a="你没有访问权限，请联系管理员【"+T.a.QQ+"】检验数据的正确性";o.a.MessageBox.alert(a).then(function(){var t={username:F.state.login.username,href:[e.path]};Dt.ReqRuleSave(t).then(function(t){if(t&&t.data.code===T.a.SUCCESS){var i={href:e.path.replace("admin","v1"),msg:s()({info:a,result:t.data.result}),token:F.state.login.token};Dt.LogSave(i).then(function(e){e&&e.data.code===T.a.SUCCESS&&(r.Message.success(e.data.msg),location.href="tencent://message/?uin="+T.a.QQ+"&Site=后台权限认证&Menu=yes")})}})}),i({path:"/admin/index",redirect:e.path})}i()});else i("/login");else i()}),new n.default({el:"#app",router:us,store:F,components:{App:c},template:"<App/>"})},NOWg:function(e,t){},RT22:function(e,t){},Rr2I:function(e,t){},TOyV:function(e,t){},UM8r:function(e,t){},WhkN:function(e,t){},XRGo:function(e,t){},Xo0K:function(e,t){},Yokd:function(e,t){},"Yxo+":function(e,t){},aqRx:function(e,t){},bUmc:function(e,t){},fN4Y:function(e,t){},"k3x/":function(e,t,i){var a={FORBIDDEN:403,METHOD_ERROR:405,Unauthorized:401,SUCCESS:200,ERROR:201,VERIFY_CODE:202,QQ:785973567,Socket:"https://www.fanglonger.com:2120/",Websocket:"wss://www.fanglonger.com:7272/"};e.exports=a},kaR9:function(e,t){},ktkw:function(e,t){},lO8K:function(e,t){},n5Y9:function(e,t){},pw1w:function(e,t){},"qi5/":function(e,t){},s3lu:function(e,t){},sg93:function(e,t){},tvR6:function(e,t){},vBu6:function(e,t){},vr9b:function(e,t){},wx8U:function(e,t){},y83Z:function(e,t){},zAji:function(e,t,i){e.exports=i.p+"static/img/404.a57b6f3.png"},zcbR:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b19f3e675d58a2fc3f50.js.map