webpackJsonp([1],{"4/hK":function(e,t){},"4DCW":function(e,t){},"7NyR":function(e,t){},"8Ygm":function(module,exports,__webpack_require__){var md5=__webpack_require__("NC6I"),str_count=function(e,t){var s=void 0,i=[];for(s=e.indexOf(t);s>-1;)i.push(s),s=e.indexOf(t,s+1);return i.length},t=function t(){var times=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],timestamp=arguments[1],date=new Date(timestamp),Y=date.getFullYear(),M=date.getMonth()+1<10?"0"+eval(date.getMonth()+1):date.getMonth()+1,D=date.getDate()<10?"0"+date.getDate():date.getDate(),h=date.getHours()<10?"0"+date.getHours():date.getHours(),m=date.getMinutes()<10?"0"+date.getMinutes():date.getMinutes(),s=date.getSeconds()<10?"0"+date.getSeconds():date.getSeconds();return times?Y+"-"+M+"-"+D+" "+h+":"+m+":"+s:Y+"-"+M+"-"+D+".log"},get_timestamp=function(){return Math.round((new Date).getTime()/1e3)},set_time=function(e){return t(!0,e)},repeat_str=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"　　",i=str_count(e,t);return Array(i).join(s)},set_tree=function e(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[];for(var a in t)t[a].pid===s&&(t[a].__child=e(t,t[a].id),i.push(t[a]));return i},set_random=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=void 0;switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all"){case"all":t="MNBVCXZASDFGHJKLPOIUYTREWQ0123456789qwertyuioplkjhgfdsazxcvbnm";break;case"number":t="0123456789";break;case"l":t="QWERTYUIOPLKJHGFDSAZXCVBNM";break;case"s":t="zxcvbnmlkjhgfdsaqwertyuiop"}for(var s="",i=0;i<e;i++)s+=str_shuffle(t).substring(0,1);return s},str_shuffle=function(e){for(var t="",s=e.length;s>0;s--){t+=e[Math.random()*(s+1)|0]}return t},set_password=function(e,t){return md5(md5(e)+md5(t))},func={str_count:str_count,set_time:set_time,repeat_str:repeat_str,set_tree:set_tree,get_timestamp:get_timestamp,set_random:set_random,str_shuffle:str_shuffle,set_password:set_password};module.exports=func},CqVR:function(e,t,s){e.exports=s.p+"static/img/u0.38ed65b.jpg"},FDVj:function(e,t){},JqXC:function(e,t){},L7TN:function(e,t){},LCdV:function(e,t){},LIwb:function(e,t){},Lgoy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("pFYg"),a=s.n(i),n=s("8U58");s("4/hK");var o={props:{value:{type:String,default:""},options:{type:Object,default:function(){return{mode:"text/javascript",lineNumbers:!0,lineWrapping:!0}}}},data:function(){return{skipNextChangeEvent:!1}},ready:function(){var e=this;this.editor=n.fromTextArea(this.$el.querySelector("textarea"),this.options),this.editor.setValue(this.value),this.editor.on("change",function(t){e.skipNextChangeEvent?e.skipNextChangeEvent=!1:(e.value=t.getValue(),e.$emit&&e.$emit("change",t.getValue()))})},mounted:function(){var e=this;this.editor=n.fromTextArea(this.$el.querySelector("textarea"),this.options),this.editor.setValue(this.value),this.editor.on("change",function(t){e.skipNextChangeEvent?e.skipNextChangeEvent=!1:e.$emit&&(e.$emit("change",t.getValue()),e.$emit("input",t.getValue()))})},watch:{value:function(e,t){if(e!==this.editor.getValue()){this.skipNextChangeEvent=!0;var s=this.editor.getScrollInfo();this.editor.setValue(e),this.editor.scrollTo(s.left,s.top)}},options:function(e,t){if("object"===(void 0===e?"undefined":a()(e)))for(var s in e)e.hasOwnProperty(s)&&this.editor.setOption(s,e[s])}},beforeDestroy:function(){this.editor&&this.editor.toTextArea()}},l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vue-codemirror-wrap"},[t("textarea")])}]};var r=s("VU/8")(o,l,!1,function(e){s("n76T")},null,null);t.default=r.exports},N0Sb:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),n=s("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=s("VU/8")({name:"App"},o,!1,function(e){s("vRGJ")},null,null).exports,r=s("/ocq"),c=s("Dd8w"),u=s.n(c),d=s("NYxO"),m={name:"baseModule",data:function(){return{isCollapse:!1,activeName:null,activeIndex:"1",menuClass:"el-icon-s-unfold",asideWidth:"200px",asideHeight:{"min-height":window.innerHeight-60+"px"},headerStyle:{"margin-left":"200px"}}},computed:u()({},Object(d.c)(["tabs","token","username","activeAuthName","contentVisible","menuLists"])),methods:u()({},Object(d.b)(["addTabs","deleteTabs","addCurrTabs","logoutSystem","getAuthMenu"]),{setAttr:function(e){var t={label:e.name,name:e.href};this.activeName=t.name,this.addCurrTabs(t),this.addTabs(t),this.asideHeight={"min-height":window.innerHeight-60+"px"}},goto:function(e){this.$router.push({path:e.name})},remove:function(e){var t=this;this.tabs.forEach(function(s,i){if(s.name===e){var a=t.tabs[i+1]||t.tabs[i-1];a&&(t.deleteTabs(e),t.activeName=a.name,t.$router.push({path:t.activeName}),t.addCurrTabs(a))}})},handleSelect:function(e,t){switch(e){case"2-3":this.logoutSystem(this.token)}},hideMenu:function(){this.isCollapse=!this.isCollapse,this.isCollapse?(this.menuClass="el-icon-s-fold",this.asideWidth="65px",this.headerStyle={"margin-left":"65px"}):(this.menuClass="el-icon-s-unfold",this.asideWidth="200px",this.headerStyle={"margin-left":"200px"})}}),created:function(){this.activeName=this.activeAuthName,this.asideHeight={"min-height":window.innerHeight-60+"px"}},mounted:function(){this.$nextTick(function(){this.getAuthMenu(this.username)})}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-header",[s("el-menu",{style:e.headerStyle,attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#393d49","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[s("el-menu-item",{attrs:{index:"1"},on:{click:e.hideMenu}},[s("i",{class:e.menuClass})]),e._v(" "),s("el-submenu",{staticStyle:{float:"right"},attrs:{index:"2"}},[s("template",{slot:"title"},[e._v(e._s(e.username))]),e._v(" "),s("el-menu-item",{attrs:{index:"2-1"}},[e._v("账号资料")]),e._v(" "),s("el-menu-item",{attrs:{index:"2-2"}},[e._v("基础设置")]),e._v(" "),s("el-menu-item",{attrs:{index:"2-3"}},[e._v("退出系统")])],2)],1)],1),e._v(" "),s("el-container",[s("el-aside",{style:e.asideHeight,attrs:{width:e.asideWidth}},[s("el-menu",{attrs:{"unique-opened":"","background-color":"#393d49","text-color":"#fff","active-text-color":"#ffd04b",collapse:e.isCollapse}},e._l(e.menuLists,function(t,i){return s("el-submenu",{key:i,attrs:{index:t.id.toString()}},[s("template",{slot:"title"},[2!==t.id?s("i",{staticClass:"el-icon-menu"}):e._e(),e._v(" "),s("span",{domProps:{innerHTML:e._s(t.name)}})]),e._v(" "),e._l(t.__child,function(t,i){return s("el-menu-item",{key:i,attrs:{index:t.id.toString()},on:{click:function(s){return e.setAttr(t)}}},[s("router-link",{staticStyle:{color:"#fff"},attrs:{to:t.href},domProps:{innerHTML:e._s(t.name)}})],1)})],2)}),1)],1),e._v(" "),s("el-container",[s("el-main",[s("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.contentVisible,expression:"contentVisible"}],staticStyle:{"text-align":"left!important"},attrs:{type:"border-card",closable:""},on:{"tab-click":e.goto,"tab-remove":e.remove},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.tabs,function(e){return s("el-tab-pane",{key:e.name,attrs:{label:e.label,name:e.name}})}),e._v(" "),s("el-card",{attrs:{shadow:"always"}},[s("router-view")],1)],2)],1),e._v(" "),s("el-footer",[e._v("\n                © element.com - 底部固定区域\n            ")])],1)],1)],1)},staticRenderFns:[]};var p={name:"index",data:function(){return{}},components:{baseModule:s("VU/8")(m,h,!1,function(e){s("Qt1/")},"data-v-3f859891",null).exports}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{attrs:{gutter:24}},[t("baseModule")],1)},staticRenderFns:[]},g=s("VU/8")(p,f,!1,null,null,null).exports,v=s("XLwt"),b=s.n(v),_={name:"Charts",props:{id:String,seriesData:Array,legendData:Array,legendSelected:Object,xAxisData:Array,chartsTitle:String},data:function(){return{charts:{}}},methods:{initCharts:function(e){this.charts=b.a.init(document.getElementById(e)),this.charts.showLoading(),this.charts.hideLoading(),this.charts.setOption({title:{text:this.chartsTitle},tooltip:{trigger:"axis"},legend:{data:this.legendData,selected:this.legendSelected},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.xAxisData},yAxis:{type:"value"},series:this.seriesData})}},mounted:function(){this.$nextTick(function(){this.initCharts(this.id)})}},y={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticStyle:{width:"100%",height:"600px"},attrs:{id:this.id}})},staticRenderFns:[]};var x={name:"index",data:function(){return{seriesData:[{name:"日志管理",type:"line",stack:"总量",data:[120,132,101,134,90,230,210]},{name:"接口管理",type:"line",stack:"总量",data:[220,182,191,234,290,330,310]},{name:"权限管理",type:"line",stack:"总量",data:[150,232,201,154,190,330,410]},{name:"角色管理",type:"line",stack:"总量",data:[320,332,301,334,390,330,320]},{name:"管理员管理",type:"line",stack:"总量",data:[820,932,901,934,1290,1330,1320]}],legendData:["日志管理","接口管理","权限管理","角色管理","管理员管理"],legendSelected:{Log:!0,Api:!1,Auth:!1,Role:!1,User:!1},xAxisData:["周一","周二","周三","周四","周五","周六","周日"],chartsTitle:"数据分析",access_token:""}},components:{charts:s("VU/8")(_,y,!1,function(e){s("4DCW")},"data-v-cc1e8db6",null).exports},methods:u()({},Object(d.d)(["setToken"])),created:function(){this.$route.params.access_token&&(this.access_token=this.$route.params.access_token)},mounted:function(){this.$nextTick(function(){this.access_token&&this.setToken(this.access_token)})}},k={render:function(){var e=this.$createElement;return(this._self._c||e)("charts",{attrs:{seriesData:this.seriesData,legendData:this.legendData,legendSelected:this.legendSelected,xAxisData:this.xAxisData,id:"charts",chartsTitle:this.chartsTitle}})},staticRenderFns:[]};var w=s("VU/8")(x,k,!1,function(e){s("LCdV")},"data-v-fbb9af2a",null).exports,L={name:"login",data:function(){return{users:{username:"",password:""},rules:{username:[{required:!0,message:"用户名必须",trigger:"blur"}],password:[{required:!0,message:"用户密码必须",trigger:"blur"}]},reFrom:"login",bgStyle:{background:"url("+s("CqVR")+")","background-repeat":"no-repeat",height:window.innerHeight-16+"px"}}},methods:u()({},Object(d.b)(["loginSystem"]),{onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.loginSystem(t.users)})},resetForm:function(e){this.$refs[e].resetFields()}}),mounted:function(){this.$nextTick(function(){console.log(window)})}},S={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{style:e.bgStyle},[s("el-row",{staticStyle:{"padding-top":"8%"},attrs:{gutter:24}},[s("el-col",{attrs:{xl:{span:8,offset:8},lg:{span:12,offset:6},md:{span:16,offset:4},sm:{span:20,offset:"2"},xs:{span:24}}},[s("el-header",{staticStyle:{"text-align":"center","font-size":"20px"}},[e._v("登录系统")]),e._v(" "),s("el-main",[s("el-form",{ref:e.reFrom,attrs:{model:e.users,rules:e.rules}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"username",autocomplete:"off"},model:{value:e.users.username,callback:function(t){e.$set(e.users,"username",t)},expression:"users.username"}},[s("template",{slot:"prepend"},[s("i",{staticClass:"el-icon-s-custom"})])],2)],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"password",autocomplete:"off"},model:{value:e.users.password,callback:function(t){e.$set(e.users,"password",t)},expression:"users.password"}},[s("template",{slot:"prepend"},[s("i",{staticClass:"el-icon-user-solid"})])],2)],1)],1)],1)],1)],1),e._v(" "),s("el-footer",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{plain:""},on:{click:function(t){return e.resetForm(e.reFrom)}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.onSubmit(e.reFrom)}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var M=s("VU/8")(L,S,!1,function(e){s("7NyR")},"data-v-559c7217",null).exports,C={name:"Submit",props:{reFrom:String,model:Object,url:String,refs:Object},data:function(){return{}},methods:u()({},Object(d.b)(["saveSystemLog"]),{submitForm:function(e){var t=this;this.refs[e].validate(function(e){if(e)return t.model.token=t.$store.state.login.token,t.$http.post(t.url,t.model).then(function(e){if(200===e.data.code){var s={msg:a()({info:e.data.msg,result:e.data.result}),token:t.$store.state.login.token};return t.saveSystemLog(s),t.$message({type:"success",message:e.data.msg}),t.$emit("success"),!1}},function(e){console.log(e)}),!0;t.$message({type:"warning",message:"请检查字段完整性~"})})},resetForm:function(e){this.refs[e].resetFields()}})},T={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-button",{attrs:{plain:""},on:{click:function(t){return e.resetForm(e.reFrom)}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.submitForm(e.reFrom)}}},[e._v("确 定")])],1)},staticRenderFns:[]};var F=s("VU/8")(C,T,!1,function(e){s("L7TN")},"data-v-3a8a9656",null).exports,$={name:"Radio",props:{item:Object,url:String},data:function(){return{table:this.$route.meta.mode}},methods:u()({},Object(d.b)(["saveSystemLog"]),{setStatus:function(e){var t=this,s={status:e.status,id:e.id,token:this.$store.state.login.token,act:"status"};this.$http.post(this.url,s).then(function(i){if(200===i.data.code){var n={msg:a()({info:i.data.msg,result:i.data.result}),token:t.$store.state.login.token};return t.saveSystemLog(n),void t.$message({type:"success",message:i.data.msg})}e.status=1===s.status?2:1},function(t){e.status=1===s.status?2:1,console.log(t)})}})},N={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){return e.setStatus(e.item)}},model:{value:e.item.status,callback:function(t){e.$set(e.item,"status",t)},expression:"item.status"}},[s("el-radio-button",{attrs:{label:"2"}},[e._v("关闭")]),e._v(" "),s("el-radio-button",{attrs:{label:"1"}},[e._v("开启")])],1)],1)},staticRenderFns:[]};var V=s("VU/8")($,N,!1,function(e){s("ixqN")},"data-v-4f7de1cc",null).exports,A={name:"Delete",props:{item:Object,url:String,index:Number,Lists:Array},data:function(){return{table:this.$route.meta.mode}},methods:u()({},Object(d.b)(["saveSystemLog"]),{remove:function(e,t){var s=this;this.$confirm("此操作将永远删除该条记录，是否继续？","删除记录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i={id:e.id,token:s.$store.state.login.token};s.$http.post(s.url,i).then(function(e){if(200===e.data.code){s.Lists.splice(t,1);var i={msg:a()({info:e.data.msg,result:e.data.result}),token:s.$store.state.login.token};return s.saveSystemLog(i),s.$message({type:"success",message:e.data.msg}),s.$emit("success"),!1}},function(e){console.log(e)})}).catch(function(){s.$message({type:"info",message:"已取消删除！"})})}})},R={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-button",{attrs:{plain:"",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.remove(e.item,e.index)}}},[e._v("删 除")])},staticRenderFns:[]};var O=s("VU/8")(A,R,!1,function(e){s("LIwb")},"data-v-5f71f45d",null).exports,D=s("woOf"),j=s.n(D),U={authLists:"/v1/auth/index",authSave:"/v1/auth/save",authUpdate:"/v1/auth/update",authDelete:"/v1/auth/delete",roleLists:"/v1/role/index",roleSave:"/v1/role/save",roleUpdate:"/v1/role/update",roleDelete:"/v1/role/delete",userLists:"/v1/user/index",userSave:"/v1/user/save",userUpdate:"/v1/user/update",userDelete:"/v1/user/delete",logLists:"/v1/log/index",logSave:"/v1/log/save",logDelete:"/v1/log/delete",apiLists:"/v1/api/index",apiSave:"/v1/api/save",apiUpdate:"/v1/api/update",categoryLists:"/v1/category/index",categorySave:"/v1/category/save",categoryUpdate:"/v1/category/update",categoryDelete:"/v1/category/delete",databaseLists:"/v1/database/index",databaseBackUp:"/v1/database/backup",musicLists:"/v1/music/index",musicPlay:"/v1/music/play",fileLists:"/v1/file/index",fileRead:"/v1/file/read",fileRename:"/v1/file/rename",fileChmod:"/v1/file/chmod",fileSave:"/v1/file/save",fileDelete:"/v1/file/delete",fileUpdate:"/v1/file/update",fileUpload:"v1/file/upload",fileDownload:"v1/file/download",fileCompression:"/v1/file/zip",fileDecompression:"/v1/file/unzip",imagePreview:"/v1/image/preview",localLists:"/v1/local/index",localTools:"/v1/tools/index",tree:"/v1/menu",login:"/v1/user/login",logout:"/v1/logout",checkToken:"/v1/checkLogin"},q=s("//Fk"),E=s.n(q),z=s("mtWM"),I=s.n(z),B={state:{tabs:[{label:"欢迎页",name:"/admin/index"}],currTabs:{label:null,name:null},activeAuthName:"/admin/index",contentVisible:!0},getters:{tabs:function(e){return e.tabs},currTabs:function(e){return e.currTabs},activeAuthName:function(e){return e.activeAuthName},contentVisible:function(e){return e.contentVisible}},mutations:{setTabs:function(e,t){e.tabs.push(t)},setCurrTabs:function(e,t){e.currTabs=t},setActiveAuthName:function(e,t){e.activeAuthName=t,e.contentVisible=!0},delTabs:function(e,t){e.tabs=t}},actions:{addTabs:function(e,t){var s=e.state,i=e.commit;-1===a()(s.tabs).indexOf(a()(t))&&i("setTabs",t)},addCurrTabs:function(e,t){e.state;var s=e.commit;s("setCurrTabs",t),s("setActiveAuthName",t.label)},deleteTabs:function(e,t){var s=e.state,i=e.commit,a=0;for(var n in s.tabs)t===s.tabs[n].name&&(a=n);s.tabs.splice(a,1),i("delTabs",s.tabs)}}},W={state:{fileTabs:[],currFileObj:{name:null,content:null,path:null,label:null}},getters:{fileTabs:function(e){return e.fileTabs},currFileObj:function(e){return e.currFileObj}},mutations:{setFileTabs:function(e,t){e.fileTabs.push(t)},delFileTabs:function(e,t){e.fileTabs=t},setCurrFileObj:function(e,t){e.currFileObj=t}},actions:{addFileTabs:function(e,t){var s=e.state,i=e.commit;-1===a()(s.fileTabs).indexOf(a()(t))&&i("setFileTabs",t)},deleteFileTabs:function(e,t){var s=e.state,i=e.commit,a=0;for(var n in s.fileTabs)t===s.fileTabs[n].name&&(a=n);s.fileTabs.splice(a,1),i("delFileTabs",s.fileTabs)},addCurrFileObj:function(e,t){e.state;(0,e.commit)("setCurrFileObj",t)}}},H={state:{apiVisible:!1,interfaceName:"",apiModel:{}},getters:{apiVisible:function(e){return e.apiVisible},interfaceName:function(e){return e.interfaceName},apiModel:function(e){return e.apiModel}},mutations:{setApiVisible:function(e,t){e.apiVisible=t},setInterfaceName:function(e,t){e.interfaceName=t},setApiModel:function(e,t){e.apiModel=t}},actions:{addApiVisible:function(e,t){e.state;var s=e.commit;s("setApiVisible",t.apiVisible),s("setInterfaceName",t.interfaceName)},addApiModel:function(e,t){e.state,(0,e.commit)("setApiModel",t)}}},P=s("zL8q"),Y=s.n(P),Q=s("k3x/"),G=s.n(Q),J=s("8Ygm"),K=s.n(J),Z={state:{token:localStorage.getItem("token"),username:localStorage.getItem("username"),auth_url:localStorage.getItem("urls"),menuLists:[]},getters:{token:function(e){return e.token},username:function(e){return e.username},auth_url:function(e){return e.auth_url},menuLists:function(e){return e.menuLists}},mutations:{setToken:function(e,t){e.token=t,localStorage.setItem("token",t)},setUserName:function(e,t){e.username=t,localStorage.setItem("username",t)},setMenuLists:function(e,t){e.menuLists=t}},actions:{loginSystem:function(e,t){e.state;var s=e.commit;ne.LoginSys(t).then(function(e){e.data.code===G.a.SUCCESS&&(P.Message.success(e.data.msg),s("setToken",e.data.item.token),s("setUserName",e.data.item.username),$e.push({path:"/admin/index"}))})},getAuthMenu:function(e,t){var s=e.state,i=e.commit;s.menuLists.length>0?i("setMenuLists",s.menuLists):ne.AuthTree({username:t}).then(function(e){e.data.code===G.a.SUCCESS&&i("setMenuLists",K.a.set_tree(e.data.item))})},logoutSystem:function(e,t){e.state;var s=e.commit;ne.LogoutSys({token:t}).then(function(e){e.data.code===G.a.SUCCESS&&(P.Message.success(e.data.msg),s("setToken",""),s("setUserName",""),$e.push({path:"/login"}))})},saveSystemLog:function(e,t){var s=e.state;e.commit;t.username=s.username,ne.LogSave(t).then(function(e){e.data.code===G.a.SUCCESS&&P.Message.success(e.data.msg)})}}};n.default.use(d.a);var X=new d.a.Store({modules:{tabs:B,fileTabs:W,api:H,login:Z}}),ee=I.a.create({timeout:5e3});ee.defaults.baseURL="https://www.fanglonger.com/api/",ee.interceptors.request.use(function(e){return X.state.login.token&&(e.headers.Authorization=K.a.set_password(K.a.set_random(32),K.a.set_random(12))+"-"+X.state.login.token+"-"+K.a.set_password(K.a.set_random(32),K.a.set_random(12))),e},function(e){return E.a.reject(e)}),ee.interceptors.response.use(function(e){return 200!==e.data.code&&P.Message.warning(e.data.msg),e},function(e){console.log(e.response),function(e,t){switch(e){case 401:case 403:$e.push({path:"/login"}),localStorage.clear(),P.Message.warning(t.statusText);break;case 404:case 504:P.Message.warning(t.statusText);break;default:console.log(t)}}(e.response.status,e.response)});var te=ee,se=s("mw3O"),ie=s.n(se),ae={token:X.state.login.token},ne={LoginSys:function(e){return te.post(U.login,ie.a.stringify(j()(ae,e)))},LogoutSys:function(e){return te.post(U.logout,ie.a.stringify(j()(ae,e)))},LogSave:function(e){return te.post(U.logSave,ie.a.stringify(j()(ae,e)))},CheckToken:function(e){return te.post(U.checkToken,ie.a.stringify(j()(ae,e)))},AuthLists:function(e){return te.post(U.authLists,ie.a.stringify(j()(ae,e)))},RoleLists:function(e){return te.post(U.roleLists,ie.a.stringify(j()(ae,e)))},AuthTree:function(e){return te.post(U.tree,ie.a.stringify(j()(ae,e)))},UserLists:function(e){return te.post(U.userLists,ie.a.stringify(j()(ae,e)))},LogLists:function(e){return te.post(U.logLists,ie.a.stringify(j()(ae,e)))},ApiLists:function(e){return te.post(U.apiLists,ie.a.stringify(j()(ae,e)))},CategoryLists:function(e){return te.post(U.categoryLists,ie.a.stringify(j()(ae,e)))},FileLists:function(e){return te.post(U.fileLists,ie.a.stringify(j()(ae,e)))},FileRead:function(e){return te.post(U.fileRead,ie.a.stringify(j()(ae,e)))},FileRename:function(e){return te.post(U.fileRename,ie.a.stringify(j()(ae,e)))},FileSave:function(e){return te.post(U.fileSave,ie.a.stringify(j()(ae,e)))},FileDelete:function(e){return te.post(U.fileDelete,ie.a.stringify(j()(ae,e)))},DatabaseLists:function(e){return te.post(U.databaseLists,ie.a.stringify(j()(ae,e)))},MusicLists:function(e){return te.post(U.musicLists,ie.a.stringify(j()(ae,e)))},MusicPlay:function(e){return te.post(U.musicPlay,ie.a.stringify(j()(ae,e)))},CategoryDelete:function(e){return te.post(U.categoryDelete,ie.a.stringify(j()(ae,e)))},Compression:function(e){return te.post(U.fileCompression,ie.a.stringify(j()(ae,e)))},Decompression:function(e){return te.post(U.fileDecompression,ie.a.stringify(j()(ae,e)))},ImagePreview:function(e){return te.post(U.imagePreview,ie.a.stringify(j()(ae,e)))}},oe={name:"lists",components:{Delete:O,Radio:V,Submit:F},data:function(){return{authLists:[],page:1,limit:15,total:0,pid:"",auth:"",title:"",status:"",syncVisible:!1,modal:!0,labelWidth:"80px",authLevel:[],loading:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"auth",act:"",authModel:{},cgi:{insert:U.authSave,update:U.authUpdate,remove:U.authDelete,status:U.authUpdate},rules:{name:[{required:!0,message:"权限名称不得为空",trigger:"blur"}],href:[{required:!0,message:"权限链接不得为空",trigger:"blur"}],pid:[{required:!0,message:"权限上级不得为空",trigger:"change"}],status:[{required:!0,message:"权限状态不得为空",trigger:"change"}]}}},methods:{success:function(){this.getAuthLists(this.page,this.limit),this.syncVisible=!1},getAuthLists:function(e,t){var s=this,i={pid:this.pid,name:this.auth,page:e,limit:t};ne.AuthLists(i).then(function(e){200===e.data.code&&(s.authLists=e.data.item.authLists.data,s.authLevel=e.data.item.selectAuth,s.total=e.data.item.authLists.total,s.loading=!1)})},sizeChange:function(e){this.limit=e,this.getAuthLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getAuthLists(this.page,this.limit)},searchAuth:function(){this.getAuthLists(this.page,this.limit)},reset:function(){this.pid="",this.auth="",this.getAuthLists(this.page,this.limit)},setAuthName:function(e){return Array(e.level+1).join("　　")+e.name},addAuth:function(){this.syncVisible=!0,this.title="添加权限",this.url=this.cgi.insert,this.act="add",this.authModel={name:"",href:"",status:"1",pid:"0",level:0,path:"1"}},updateAuth:function(e){this.syncVisible=!0,this.title="修改权限",this.url=this.cgi.update,this.authModel=e,this.act="update",this.authModel.pid=this.authModel.pid.toString()}},mounted:function(){this.$nextTick(function(){this.getAuthLists(this.page,this.limit)})}},le={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[s("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[s("el-form-item",[s("el-select",{attrs:{placeholder:"选择权限"},on:{change:e.searchAuth},model:{value:e.pid,callback:function(t){e.pid=t},expression:"pid"}},e._l(e.authLevel,function(t,i){return s("el-option",{key:i,attrs:{label:e.setAuthName(t),value:t.id}})}),1)],1),e._v(" "),s("el-form-item",[s("el-input",{attrs:{placeholder:"权限名称"},model:{value:e.auth,callback:function(t){e.auth=t},expression:"auth"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{plain:"",icon:"el-icon-search",size:"medium",type:"primary"},on:{click:e.searchAuth}},[e._v("搜 索")]),e._v(" "),s("el-button",{attrs:{plain:"",type:"primary",size:"medium"},on:{click:e.reset}},[e._v("重 置")])],1),e._v(" "),s("el-form-item",{staticStyle:{float:"right"}},[s("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.addAuth}},[e._v("添 加")])],1)],1),e._v(" "),s("el-table",{attrs:{data:e.authLists,border:""}},[s("el-table-column",{attrs:{label:"#",prop:"id"}}),e._v(" "),s("el-table-column",{attrs:{label:"权限名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.setAuthName(t.row))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"权限链接",prop:"url"}}),e._v(" "),s("el-table-column",{attrs:{label:"显示状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("Radio",{attrs:{item:t.row,url:e.cgi.status}})]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"mini"},on:{click:function(s){return e.updateAuth(t.row)}}},[e._v("修 改")]),e._v(" "),s("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.authLists}})]}}])})],1),e._v(" "),s("div",{staticStyle:{margin:"25px 0"}},[s("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),s("el-dialog",{attrs:{title:e.title,visible:e.syncVisible,modal:e.modal,center:""},on:{"update:visible":function(t){e.syncVisible=t}}},[s("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.authModel,rules:e.rules}},[s("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[s("el-input",{attrs:{placeholder:"权限名称"},model:{value:e.authModel.name,callback:function(t){e.$set(e.authModel,"name",t)},expression:"authModel.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"权限链接",prop:"href"}},[s("el-input",{attrs:{placeholder:"/admin/auth/lists"},model:{value:e.authModel.href,callback:function(t){e.$set(e.authModel,"href",t)},expression:"authModel.href"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"权限上级",prop:"pid"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"权限上级"},model:{value:e.authModel.pid,callback:function(t){e.$set(e.authModel,"pid",t)},expression:"authModel.pid"}},["0"===e.authModel.pid?s("el-option",{attrs:{label:"默认权限",value:"0",selected:""}}):e._e(),e._v(" "),e._l(e.authLevel,function(t,i){return s("el-option",{key:i,attrs:{label:e.setAuthName(t),value:t.id.toString()}})})],2)],1),e._v(" "),"add"===e.act?s("el-form-item",{attrs:{label:"权限状态",prop:"status"}},[s("el-radio-group",{attrs:{size:"small"},model:{value:e.authModel.status,callback:function(t){e.$set(e.authModel,"status",t)},expression:"authModel.status"}},[s("el-radio-button",{attrs:{label:"2"}},[e._v("关闭")]),e._v(" "),s("el-radio-button",{attrs:{label:"1"}},[e._v("开启")])],1)],1):e._e()],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("Submit",{attrs:{reFrom:e.reFrom,model:e.authModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var re=s("VU/8")(oe,le,!1,function(e){s("t4un")},"data-v-8e73ad2c",null).exports,ce={name:"lists",components:{Submit:F,Delete:O,Radio:V},data:function(){return{roleLists:[],loading:!0,loadingText:"玩命加载中。。。",authLists:[],defaultChecked:[],title:"",syncVisible:!1,modal:!0,labelWidth:"80px",url:"",refs:this.$refs,reFrom:"role",act:"",roleModel:{},ids:[],urls:[],cgi:{insert:U.roleSave,update:U.roleUpdate,remove:U.roleDelete,status:U.roleUpdate},rules:{role_name:[{required:!0,message:"角色名称不得为空",trigger:"blur"}],ids:[{required:!0,message:"权限ID不得为空",trigger:"blur"}],urls:[{required:!0,message:"权限地址不得为空",trigger:"blur"}]}}},methods:{success:function(){this.getRoleLists(this.page,this.limit),this.syncVisible=!1},getRoleLists:function(e,t){var s=this,i={offset:t*(e-1),limit:t,level:4};ne.RoleLists(i).then(function(e){200===e.data.code&&(s.roleLists=e.data.item.role,s.authLists=e.data.item.auth,s.loading=!1)})},sizeChange:function(e){this.limit=e,this.getRoleLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getRoleLists(this.page,this.limit)},addRole:function(){this.title="添加角色",this.syncVisible=!0,this.url=this.cgi.insert,this.act="add",this.defaultChecked=[],this.roleModel={role_name:"",auth_ids:[],auth_url:[],status:"1",created_at:K.a.get_timestamp(),updated_at:K.a.get_timestamp()}},handleChange:function(e,t,s){var i=this;switch(t){case"left":s.forEach(function(e,t){i.ids.splice(i.ids.indexOf(e),1)});break;case"right":s.forEach(function(e,t){i.ids.push(parseInt(e))})}i.roleModel.auth_ids=i.ids},updateRole:function(e){for(var t in this.syncVisible=!0,this.title="修改角色",this.url=this.cgi.update,this.ids=JSON.parse(e.auth_ids),this.urls=JSON.parse(e.auth_url),this.defaultChecked=[],this.act="update",this.ids)this.defaultChecked.push(parseInt(this.ids[t]));this.roleModel=e,this.roleModel.auth_ids=this.defaultChecked}},mounted:function(){this.$nextTick(function(){this.getRoleLists(this.page,this.limit)})}},ue={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[s("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[s("el-form-item",{staticStyle:{float:"right"}},[s("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.addRole}},[e._v("添 加")])],1)],1),e._v(" "),s("el-table",{attrs:{data:e.roleLists,border:""}},[s("el-table-column",{attrs:{label:"#",prop:"id",sortable:""}}),e._v(" "),s("el-table-column",{attrs:{label:"角色名称",prop:"role_name"}}),e._v(" "),s("el-table-column",{attrs:{label:"显示状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("Radio",{attrs:{item:t.row,url:e.cgi.status}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"created_at"}}),e._v(" "),s("el-table-column",{attrs:{label:"修改时间",sortable:"",prop:"updated_at"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"mini"},on:{click:function(s){return e.updateRole(t.row)}}},[e._v("修 改")]),e._v(" "),s("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.roleLists}})]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.title,visible:e.syncVisible,modal:e.modal,center:""},on:{"update:visible":function(t){e.syncVisible=t}}},[s("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.roleModel,rules:e.rules}},[s("el-form-item",{attrs:{label:"角色名称",prop:"role_name"}},[s("el-input",{attrs:{placeholder:"角色名称"},model:{value:e.roleModel.role_name,callback:function(t){e.$set(e.roleModel,"role_name",t)},expression:"roleModel.role_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"权限列表",prop:"auth_ids"}},[s("el-transfer",{attrs:{titles:["所有","拥有"],"button-texts":["移除","添加"],data:e.authLists,filterable:""},on:{change:e.handleChange},model:{value:e.defaultChecked,callback:function(t){e.defaultChecked=t},expression:"defaultChecked"}})],1),e._v(" "),"add"===e.act?s("el-form-item",{attrs:{label:"状态",prop:"status"}},[s("el-radio-group",{attrs:{size:"small"},model:{value:e.roleModel.status,callback:function(t){e.$set(e.roleModel,"status",t)},expression:"roleModel.status"}},[s("el-radio-button",{attrs:{label:"0"}},[e._v("关闭")]),e._v(" "),s("el-radio-button",{attrs:{label:"1"}},[e._v("开启")])],1)],1):e._e()],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("Submit",{attrs:{reFrom:e.reFrom,model:e.roleModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var de=s("VU/8")(ce,ue,!1,function(e){s("JqXC")},"data-v-c8af7012",null).exports,me={name:"lists",components:{Submit:F,Delete:O,Radio:V},data:function(){return{userLists:[],roleLists:[],page:1,limit:15,total:0,title:"",syncVisible:!1,modal:!0,labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"user",act:"",userModel:{},cgi:{insert:U.userSave,update:U.userUpdate,remove:U.userDelete,status:U.userUpdate},rules:{username:[{required:!0,message:"管理员名称不得为空",trigger:"blur"}],password:[{required:!0,message:"密码不得为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不得为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],phone_number:[{required:!0,message:"手机号不得为空",trigger:"blur"}],role_id:[{required:!0,message:"角色不得为空",trigger:"change"}]}}},methods:{success:function(){this.getUserLists(this.page,this.limit),this.syncVisible=!1},getUserLists:function(e,t){var s=this,i={offset:t*(e-1),limit:t,level:"1"};ne.UserLists(i).then(function(e){200===e.data.code&&(s.userLists=e.data.item.userLists,s.total=e.data.item.total,s.roleLists=e.data.item.roleLists,s.loading=!1)})},sizeChange:function(e){this.limit=e,this.getUserLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getUserLists(this.page,this.limit)},addUser:function(){this.title="添加管理员",this.syncVisible=!0,this.act="add",this.userModel={username:"",email:"",password:"",salt:K.a.set_random(),status:"1",role_id:1,phone_number:"",created_at:K.a.get_timestamp(),updated_at:K.a.get_timestamp(),access_token:""},this.url=this.cgi.insert},updateUser:function(e){this.title="修改管理员",this.syncVisible=!0,this.userModel=e,this.url=this.cgi.update,this.act="update"}},mounted:function(){this.$nextTick(function(){this.getUserLists(this.page,this.limit)})}},he={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[s("el-form",{staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[s("el-form-item",{staticStyle:{float:"right"}},[s("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"medium",plain:""},on:{click:e.addUser}},[e._v("添 加")])],1)],1),e._v(" "),s("el-table",{attrs:{data:e.userLists,border:""}},[s("el-table-column",{attrs:{label:"#",prop:"id"}}),e._v(" "),s("el-table-column",{attrs:{label:"管理员",prop:"username"}}),e._v(" "),s("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),e._v(" "),s("el-table-column",{attrs:{label:"手机号",prop:"phone_number"}}),e._v(" "),s("el-table-column",{attrs:{label:"显示状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("Radio",{attrs:{item:t.row,url:e.cgi.status}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间",prop:"created_at"}}),e._v(" "),s("el-table-column",{attrs:{label:"修改时间",prop:"updated_at"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"mini"},on:{click:function(s){return e.updateUser(t.row)}}},[e._v("修 改")]),e._v(" "),s("Delete",{attrs:{url:e.cgi.remove,item:t.row,index:t.$index,Lists:e.userLists}})]}}])})],1),e._v(" "),s("div",{staticStyle:{margin:"25px 0"}},[s("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),s("el-dialog",{attrs:{title:e.title,visible:e.syncVisible,modal:e.modal,center:""},on:{"update:visible":function(t){e.syncVisible=t}}},[s("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.userModel,rules:e.rules}},[s("el-form-item",{attrs:{label:"管理员",prop:"username"}},[s("el-input",{attrs:{placeholder:"管理员名称"},model:{value:e.userModel.username,callback:function(t){e.$set(e.userModel,"username",t)},expression:"userModel.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.userModel.password,callback:function(t){e.$set(e.userModel,"password",t)},expression:"userModel.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{attrs:{type:"email",placeholder:"邮箱"},model:{value:e.userModel.email,callback:function(t){e.$set(e.userModel,"email",t)},expression:"userModel.email"}})],1),e._v(" "),"update"===e.act?s("el-form-item",{attrs:{label:"手机号",prop:"phone_number"}},[s("el-input",{attrs:{type:"email",placeholder:"手机号"},model:{value:e.userModel.phone_number,callback:function(t){e.$set(e.userModel,"phone_number",t)},expression:"userModel.phone_number"}})],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"角色",prop:"role_id"}},[s("el-select",{staticStyle:{width:"100%"},model:{value:e.userModel.role_id,callback:function(t){e.$set(e.userModel,"role_id",t)},expression:"userModel.role_id"}},e._l(e.roleLists,function(e,t){return s("el-option",{key:t,attrs:{label:e.role_name,value:e.id}})}),1)],1),e._v(" "),"add"===e.act?s("el-form-item",{attrs:{label:"显示状态",prop:"status"}},[s("el-radio-group",{attrs:{size:"small"},model:{value:e.userModel.status,callback:function(t){e.$set(e.userModel,"status",t)},expression:"userModel.status"}},[s("el-radio-button",{attrs:{label:"2"}},[e._v("关闭")]),e._v(" "),s("el-radio-button",{attrs:{label:"1"}},[e._v("开启")])],1)],1):e._e()],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("Submit",{attrs:{reFrom:e.reFrom,model:e.userModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var pe=s("VU/8")(me,he,!1,function(e){s("Qago")},"data-v-16c9450f",null).exports,fe={name:"log",components:{Delete:O},data:function(){return{logLists:[],page:1,limit:15,total:0,functions:K.a,labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",cgi:{remove:U.logDelete},rules:{}}},methods:{success:function(){this.getLogLists(this.page,this.limit)},getLogLists:function(e,t){var s=this,i={page:e,limit:t};ne.LogLists(i).then(function(e){200===e.data.code&&(s.logLists=e.data.item.data,s.total=e.data.item.total,s.loading=!1)})},sizeChange:function(e){this.limit=e,this.getLogLists(this.page,this.limit)},currentChange:function(e){this.page=e,this.getLogLists(this.page,this.limit)}},mounted:function(){this.$nextTick(function(){this.getLogLists(this.page,this.limit)})}},ge={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[s("el-table",{attrs:{data:e.logLists,border:""}},[s("el-table-column",{attrs:{label:"#",prop:"id"}}),e._v(" "),s("el-table-column",{attrs:{label:"执行人",prop:"username"}}),e._v(" "),s("el-table-column",{attrs:{label:"日志信息",prop:"log","show-overflow-tooltip":!0}}),e._v(" "),s("el-table-column",{attrs:{label:"地址",prop:"ip_address"}}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"created_at"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("Delete",{attrs:{url:e.cgi.remove,func:e.functions,item:t.row,index:t.$index,Lists:e.logLists},on:{success:e.success}})]}}])})],1),e._v(" "),s("div",{staticStyle:{margin:"25px 0"}},[s("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"current-page":e.page},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var ve=s("VU/8")(fe,ge,!1,function(e){s("N0Sb")},"data-v-7b7f412d",null).exports,be=s("gZhU");s("4/hK"),s("8U58"),s("c6RA"),s("aGTD"),s("UM8r"),s("Yokd"),s("THjC"),s("Kk9m"),s("fo6W"),s("fo6W"),s("soCA"),s("vq+x");var _e={name:"lists",components:{Submit:F,codemirror:be.codemirror},data:function(){return{props:{label:"label",children:"children",isLeaf:!1},checkBoxArr:[{id:4,value:"读取"},{id:2,value:"写入"},{id:1,value:"执行"}],all:[],user:[],common:[],all_id:0,user_id:0,common_id:0,chmodModel:{auth:parseInt(this.all_id+""+this.user_id+this.common_id),path:""},compressionModel:{docLists:[],resource:"",path:""},options:{mode:"text/x-php",tabSize:4,lineNumbers:!0,theme:"monokai",extraKeys:{"Ctrl-Space":"autocomplete"},lineWrapping:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],indentWithTabs:!0,smartIndent:!0,matchBrackets:!0,cursorHeight:1,autoRefresh:!0,styleActiveLine:!0},menuVisible:!1,highlight:!0,fileLists:[],path:"base_path",activeFileTabName:null,title:"default",syncVisible:!1,modal:!0,labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"file",fileObject:{},showRightBtn:{add:!0,rename:!0,remove:!0,compression:!0,DeCompression:!1,auth:!0,download:!0,upload:!0},fileModel:{content:"",path:""},fileList:[],fileSyncVisible:!1,fileData:{},showIdea:!0,cgi:{update:U.fileUpdate,chmod:U.fileChmod,uploadUrl:"https://www.fanglonger.com/api/"+U.fileUpload},imgVisible:!1,dialogImageUrl:"",rules:{auth:[{required:!0,message:"权限不得为空",trigger:"blur"},{type:"number",message:"权限必须为数字值",trigger:"blur"}]}}},computed:u()({},Object(d.c)(["fileTabs","currFileObj","token"])),methods:u()({},Object(d.b)(["addFileTabs","deleteFileTabs","addCurrFileObj","saveSystemLog"]),{success:function(){this.getFileLists(this.path),this.syncVisible=!1},getFileLists:function(e){var t=this,s={path:e,basename:"/"};ne.FileLists(s).then(function(e){200===e.data.code&&(t.fileLists=e.data.item,t.loading=!1)})},rightClick:function(e,t,s,i){this.menuVisible=!1,this.menuVisible=!0;var a=document.querySelector("#menu");switch(document.addEventListener("click",this.foo),a.style.left="340px",a.style.top=e.clientY-195+"px",this.fileObject=t,this.fileObject.fileType){case"file":this.showRightBtn.DeCompression=!1,this.showRightBtn.download=!0;var n=this.fileObject.label.split(".")[1];["tar","zip","7z","TAR","ZIP","7Z"].includes(n)&&(this.showRightBtn.DeCompression=!0);break;case"dir":this.showRightBtn.download=!1,this.showRightBtn.DeCompression=!1}},foo:function(){this.menuVisible=!1,document.removeEventListener("click",this.foo)},goto:function(e){var t=this.fileTabs;for(var s in t)if(t[s].label===e.label){this.fileModel.content=t[s].content,this.fileModel.path=t[s].path;var i={content:this.fileModel.content,path:this.fileModel.path,name:t[s].name};this.addCurrFileObj(i)}},removeTabName:function(e){var t=this;this.fileTabs.forEach(function(s,i){if(s.name===e){var a=t.fileTabs[i+1]||t.fileTabs[i-1];if(a){t.activeFileTabName=a.name,t.fileModel.content=a.content;var n={content:a.content,path:a.path,name:a.name};t.addCurrFileObj(n),t.deleteFileTabs(e)}}})},getFileContent:function(e){var t=this;if("file"!==e.fileType)return this.$notify({type:"success",title:"通知",message:"不是一个文件"}),!1;var s=e.label.split(".")[1];if(["tar","zip","7z","TAR","ZIP","7Z"].includes(s))return this.$notify({type:"success",title:"通知",message:"该文件不支持直接查看"}),!1;this.showIdea=!0,this.activeFileTabName=e.size.toString();var i={path:e.path},a={};this.url=this.cgi.update,a.label=e.label,a.name=e.size.toString(),a.path=e.path,ne.FileRead(i).then(function(s){200===s.data.code&&(t.fileModel.content=s.data.item.content,t.fileModel.path=e.path,a.content=t.fileModel.content,t.addCurrFileObj(a),t.addFileTabs(a))})},renameFile:function(){var e=this,t={oldFile:this.fileObject.path};this.$prompt("请输入文件名","重命名",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){var i=s.value;t.newFile=t.oldFile.replace(e.fileObject.label,i),ne.FileRename(t).then(function(t){if(200===t.data.code){e.fileObject.name=i,e.$message({type:"success",message:"你的新文件名: "+i});var s={msg:a()({url:U.fileSave,info:"你的新文件名: "+i,result:t.data.result})};e.saveSystemLog(s),e.getFileLists(e.path)}})}).catch(function(){e.$message({type:"info",message:"取消输入"})})},deleteFile:function(){var e=this;this.$confirm("此操作将永远删除该条记录，是否继续？","删除记录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={path:e.fileObject.path};ne.FileDelete(t).then(function(s){if(200===s.data.code){var i={msg:"删除文件成功："+t.path,result:s.data.result};e.saveSystemLog(i),e.getFileLists(e.path),e.$message({type:"success",message:"删除记录成功！："+t.path})}})}).catch(function(){e.$message({type:"info",message:"已取消删除！"})})},addFile:function(){var e=this,t={};this.$prompt("请输入文件名","新建文件",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){var i=s.value;"file"===e.fileObject.fileType?t.path=e.fileObject.path.replace(e.fileObject.label,i):"dir"===e.fileObject.fileType&&(t.path=e.fileObject.path+"/"+i),ne.FileSave(t).then(function(s){if(200===s.data.code){var i={msg:"你的新文件名: "+t.path,result:s.data.result};e.saveSystemLog(i),e.getFileLists(e.path),e.$message({type:"success",message:"你的新文件名: "+t.path})}})}).catch(function(){e.$message({type:"info",message:"取消输入"})})},authFile:function(){this.syncVisible=!0,this.title="设置权限【"+this.fileObject.path+"】",this.chmodModel.auth=parseInt(this.fileObject.auth),this.chmodModel.path=this.fileObject.path,this.all_id=this.fileObject.auth.substr(0,1),this.user_id=this.fileObject.auth.substr(1,1),this.common_id=this.fileObject.auth.substr(2,1),this.all=this.setChmod(this.all_id),this.user=this.setChmod(this.user_id),this.common=this.setChmod(this.common_id),this.url=this.cgi.chmod},setChmod:function(e){var t=[];switch(e){case"7":t=["读取","写入","执行"];break;case"6":t=["读取","写入"];break;case"5":t=["读取","执行"];break;case"4":t=["读取"];break;case"3":t=["写入","执行"];break;case"2":t=["写入"];break;case"1":t=["执行"]}return t},setChmodAuth:function(){this.chmodModel.auth=parseInt(this.chmodModel.auth),this.chmodModel.auth>666&&(this.$message({type:"warning",message:"权限设置失败"}),this.chmodModel.auth=parseInt(this.fileObject.auth)),this.all_id=this.chmodModel.auth.toString().substr(0,1),this.user_id=this.chmodModel.auth.toString().substr(1,1),this.common_id=this.chmodModel.auth.toString().substr(2,1),this.all=this.setChmod(this.all_id),this.user=this.setChmod(this.user_id),this.common=this.setChmod(this.common_id),this.url=this.cgi.chmod},getChmod:function(e){var t=0;for(var s in e)"读取"===e[s]&&(t+=4),"写入"===e[s]&&(t+=2),"执行"===e[s]&&(t+=1);return t},allChange:function(e){this.all_id=this.getChmod(e),this.chmodModel.auth=parseInt(this.all_id+""+this.user_id+this.common_id)},userChange:function(e){this.user_id=this.getChmod(e),this.chmodModel.auth=parseInt(this.all_id+""+this.user_id+this.common_id)},commonChange:function(e){this.common_id=this.getChmod(e),this.chmodModel.auth=parseInt(this.all_id+""+this.user_id+this.common_id)},compressionFile:function(){var e=this;this.$prompt("请输入文件名","压缩包名称",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var s=t.value;e.compressionModel.resource=s,e.compressionModel.docLists.push(e.fileObject.path),e.compressionModel.path=e.fileObject.path.replace(e.fileObject.label,""),ne.Compression(e.compressionModel).then(function(t){if(200===t.data.code){e.$message({type:"success",message:t.data.msg});var s={msg:"你的压缩包名: "+e.compressionModel.type,result:t.data.result};e.saveSystemLog(s),e.getFileLists(e.path)}})}).catch(function(){e.$message({type:"info",message:"取消输入"})})},DecompressionFile:function(){var e=this;this.$prompt("请输入文件名","解压包名称",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var s=t.value,i={path:e.fileObject.path,resource:s};ne.Decompression(i).then(function(t){if(200===t.data.code){e.$message({type:"success",message:t.data.msg});var s={msg:"文件解压成功",result:t.data.result};e.saveSystemLog(s),e.getFileLists(e.path)}})}).catch(function(){e.$message({type:"info",message:"取消输入"})})},downloadFile:function(){var e=this;this.$alert("确定下载文件："+this.fileObject.path,"文件下载").then(function(){window.open("https://www.fanglonger.com/api/"+U.fileDownload+"?token="+e.token+"&path="+e.fileObject.path,"__target");var t={msg:"文件下载成功："+e.fileObject.path};e.saveSystemLog(t),e.$message({type:"success",message:"download file successfully"})}).catch(function(){e.$message({type:"info",message:"取消下载"})})},uploadFile:function(){this.fileSyncVisible=!0,this.fileList=[],this.fileData.token=this.token,"file"===this.fileObject.fileType?this.fileData.path=this.fileObject.path.replace(this.fileObject.label,""):"dir"===this.fileObject.fileType&&(this.fileData.path=this.fileObject.path)},submitUpload:function(){this.$refs.upload.submit()},handelSuccess:function(e){var t=this;if(200===e.code){var s=e.item.name.split(".")[1];["png","jpeg","gif"].includes(s.toLowerCase())&&this.$alert("是否预览图片?","图片预览").then(function(){t.imgVisible=!0,ne.ImagePreview({name:e.item.name}).then(function(e){200===e.data.code&&(t.dialogImageUrl=e.data.item.src)})}),this.$message({type:"success",message:e.msg});var i={msg:e.msg,result:e};this.saveSystemLog(i),this.getFileLists(this.path),this.fileSyncVisible=!1}},handleRemove:function(e){console.log(e),this.$message({type:"warning",message:"取消文件上传："+e.name})},updateContent:function(e){this.fileModel.content=e}}),created:function(){this.activeFileTabName=this.currFileObj.name,this.fileModel=this.currFileObj,null===this.activeFileTabName&&(this.fileModel.content="",this.showIdea=!1)},mounted:function(){this.$nextTick(function(){this.url=this.cgi.update,this.getFileLists(this.path)})}},ye={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[s("el-row",{attrs:{gutter:24}},[s("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xl:{span:5},lg:{span:5},md:{span:24},sm:{span:24},xs:{span:24}}},[s("el-tree",{staticStyle:{"background-color":"#393d49"},attrs:{data:e.fileLists,"highlight-current":e.highlight,props:e.props,"node-key":e.props.id},on:{"node-contextmenu":e.rightClick,"node-click":e.getFileContent}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.menuVisible,expression:"menuVisible"}]},[s("ul",{staticClass:"menu",attrs:{id:"menu"}},[s("li",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.add,expression:"showRightBtn.add"}],staticClass:"menu__item",on:{click:e.addFile}},[s("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 添 加")]),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.rename,expression:"showRightBtn.rename"}],staticClass:"menu__item",on:{click:e.renameFile}},[s("i",{staticClass:"el-icon-edit-outline"}),e._v(" 修 改")]),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.auth,expression:"showRightBtn.auth"}],staticClass:"menu__item",on:{click:e.authFile}},[s("i",{staticClass:"el-icon-user-solid"}),e._v(" 权 限")]),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.compression,expression:"showRightBtn.compression"}],staticClass:"menu__item",on:{click:e.compressionFile}},[s("i",{staticClass:"el-icon-collection"}),e._v(" 压 缩")]),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.DeCompression,expression:"showRightBtn.DeCompression"}],staticClass:"menu__item",on:{click:e.DecompressionFile}},[s("i",{staticClass:"el-icon-receiving"}),e._v(" 解 压")]),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.download,expression:"showRightBtn.download"}],staticClass:"menu__item",on:{click:e.downloadFile}},[s("i",{staticClass:"el-icon-download"}),e._v(" 下 载")]),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.upload,expression:"showRightBtn.upload"}],staticClass:"menu__item",on:{click:e.uploadFile}},[s("i",{staticClass:"el-icon-upload"}),e._v(" 上 传")]),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:e.showRightBtn.remove,expression:"showRightBtn.remove"}],staticClass:"menu__item",on:{click:e.deleteFile}},[s("i",{staticClass:"el-icon-delete-solid"}),e._v(" 删 除")])])]),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:e.showIdea,expression:"showIdea"}],attrs:{xl:{span:18,push:1},lg:{span:18,push:1},md:{span:24},sm:{span:24},xs:{span:24}}},[s("el-form",{ref:e.reFrom,attrs:{model:e.fileModel}},[s("el-form-item",{staticStyle:{"margin-left":"-30px !important"}},[s("el-tabs",{staticStyle:{"text-align":"left!important"},attrs:{type:"border-card",closable:""},on:{"tab-click":e.goto,"tab-remove":e.removeTabName},model:{value:e.activeFileTabName,callback:function(t){e.activeFileTabName=t},expression:"activeFileTabName"}},[e._l(e.fileTabs,function(e){return s("el-tab-pane",{key:e.name,attrs:{label:e.label,name:e.name}})}),e._v(" "),s("el-card",{attrs:{shadow:"hover"}},[s("codemirror",{ref:"edit",staticStyle:{"line-height":"20px"},attrs:{value:e.fileModel.content,options:e.options},on:{change:e.updateContent}})],1)],2)],1)],1),e._v(" "),s("Submit",{staticStyle:{"text-align":"center !important"},attrs:{reFrom:e.reFrom,model:e.fileModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.syncVisible,modal:e.modal,title:e.title,center:""},on:{"update:visible":function(t){e.syncVisible=t}}},[s("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.chmodModel,rules:e.rules}},[s("el-form-item",{attrs:{label:"权限",prop:"auth"}},[s("el-input",{attrs:{placeholder:"请输入内容"},on:{change:e.setChmodAuth},model:{value:e.chmodModel.auth,callback:function(t){e.$set(e.chmodModel,"auth",t)},expression:"chmodModel.auth"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所有者"}},[s("el-checkbox-group",{on:{change:e.allChange},model:{value:e.all,callback:function(t){e.all=t},expression:"all"}},e._l(e.checkBoxArr,function(e){return s("el-checkbox",{key:e.id,attrs:{border:"",size:"small",label:e.value}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"用户组"}},[s("el-checkbox-group",{on:{change:e.userChange},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}},e._l(e.checkBoxArr,function(e){return s("el-checkbox",{key:e.id,attrs:{border:"",size:"small",label:e.value}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"公共"}},[s("el-checkbox-group",{on:{change:e.commonChange},model:{value:e.common,callback:function(t){e.common=t},expression:"common"}},e._l(e.checkBoxArr,function(e){return s("el-checkbox",{key:e.id,attrs:{border:"",size:"small",label:e.value}})}),1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("Submit",{attrs:{reFrom:e.reFrom,model:e.chmodModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.fileSyncVisible,modal:e.modal,title:"文件上传",center:""},on:{"update:visible":function(t){e.fileSyncVisible=t}}},[s("el-upload",{ref:"upload",attrs:{data:e.fileData,action:e.cgi.uploadUrl,"on-remove":e.handleRemove,"on-success":e.handelSuccess,"file-list":e.fileList,"auto-upload":!1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.imgVisible},on:{"update:visible":function(t){e.imgVisible=t}}},[s("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var xe=s("VU/8")(_e,ye,!1,function(e){s("l7VM")},"data-v-4bac45ab",null).exports,ke=s("fZjL"),we=s.n(ke);s("4/hK"),s("8U58"),s("Mixr"),s("5IAE"),s("aGTD"),s("jQeI"),s("PsxY"),s("Ev5Y"),s("UM8r"),s("Yokd"),s("THjC"),s("Kk9m"),s("fo6W"),s("fo6W"),s("soCA"),s("vq+x");var Le={name:"lists",components:{Submit:F,Delete:O,Radio:V,codemirror:be.codemirror},data:function(){return{categoryLists:[],props:{label:"name",children:"children",id:"id"},title:"",syncVisible:!1,modal:!0,labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",url:"",refs:this.$refs,reFrom:"category",apiName:"",menuVisible:!1,categoryModel:{},apiCategory:[],highlight:!0,options:{mode:"application/ld+json",tabSize:4,lineNumbers:!0,theme:"monokai",extraKeys:{"Ctrl-Space":"autocomplete"},lineWrapping:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],indentWithTabs:!0,smartIndent:!0,matchBrackets:!0,cursorHeight:1,autoRefresh:!0,styleActiveLine:!0},apiStatus:!1,methodLists:{POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE"},typeLists:{String:"String",Float:"Float",Number:"Number",Object:"Object",Timestamp:"Timestamp"},cgi:{insert:U.apiSave,update:U.apiUpdate,categoryInsert:U.categorySave,categoryUpdate:U.categoryUpdate,remove:U.categoryDelete},rules:{type:[{required:!0,message:"请输入权限名称",trigger:"change"}],href:[{required:!0,message:"请输入权限地址",trigger:"blur"}],method:[{required:!0,message:"请输入请求方法",trigger:"change"}],desc:[{required:!0,message:"请输入接口描述",trigger:"blur"}],response_string:[{required:!0,message:"请输入返回参数",trigger:"blur"}]}}},computed:u()({},Object(d.c)(["apiVisible","apiModel","interfaceName"])),methods:u()({},Object(d.b)(["addApiVisible","addApiModel","saveSystemLog"]),{success:function(){this.getCategoryLists(),this.syncVisible=!1},setName:function(e){return Array(e.level+1).join("　　")+e.name},getCategoryLists:function(){var e=this;ne.CategoryLists().then(function(t){200===t.data.code&&(e.apiCategory=t.data.item.category,e.categoryLists=t.data.item.category_tree,e.loading=!1)})},rightClick:function(e,t,s,i){this.menuVisible=!1,this.menuVisible=!0;var a=document.querySelector("#menu");document.addEventListener("click",this.foo),a.style.left="275px",a.style.top=e.screenY-185+"px",this.categoryModel=t},foo:function(){this.menuVisible=!1,document.removeEventListener("click",this.foo)},addCategory:function(){this.title="添加接口",this.syncVisible=!0,this.url=this.cgi.categoryInsert,this.categoryModel={name:"",pid:this.categoryModel.value,path:"1",level:1}},updateCategory:function(){this.title=this.categoryModel.name,this.syncVisible=!0,this.url=this.cgi.categoryUpdate},deleteCategory:function(){var e=this;ne.CategoryDelete({id:this.categoryModel.value}).then(function(t){if(200===t.data.code){var s={msg:a()({url:e.cgi.remove,info:t.data.msg,result:t.data.result}),token:e.$store.state.login.token};e.saveSystemLog(s),e.$message({type:"success",message:t.data.msg}),e.getCategoryLists()}})},getApiDetail:function(e){var t=this;if(console.log(e),0!==e.level){var s={apiVisible:!0,interfaceName:e.name};this.addApiVisible(s),this.apiName=this.interfaceName,ne.ApiLists({type:e.id}).then(function(s){if(200===s.data.code)t.addApiModel(s.data.item),t.apiModel.request=JSON.parse(t.apiModel.request),t.apiModel.response=JSON.parse(t.apiModel.response),t.url=t.cgi.update;else{t.url=t.cgi.insert;var i={desc:"",type:e.id,href:"",method:"POST",request:[{name:"token",desc:"用户token",required:"1",type:"String",val:""}],response:[{name:"code",desc:"200 成功",type:"number"},{name:"msg",desc:"Success",type:"string"}],response_string:"",remark:""};t.addApiModel(i)}})}else this.$notify({title:"通知",message:"该接口暂时不允许访问",type:"success"})},requestRemove:function(e,t){var s=[],i=this;we()(i.apiModel.request).forEach(function(e){s.push(i.apiModel.request[e])}),s.splice(t,1),i.apiModel.request=s},requestAdd:function(){this.apiModel.request.push({name:"",desc:"",required:"",type:"",val:""})},responseRemove:function(e,t){var s=[],i=this;we()(i.apiModel.response).forEach(function(e){s.push(i.apiModel.response[e])}),s.splice(t,1),i.apiModel.response=s},responseAdd:function(){this.apiModel.response.push({name:"",desc:"",type:""})},updateContent:function(e){this.apiModel.response_string=e}}),created:function(){this.apiName=this.interfaceName},mounted:function(){this.$nextTick(function(){this.getCategoryLists()})}},Se={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[s("el-row",{attrs:{gutter:24}},[s("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xl:{span:4},lg:{span:4},md:{span:24},sm:{span:24},xs:{span:24}}},[s("el-tree",{staticStyle:{"background-color":"#393d49"},attrs:{props:e.props,"highlight-current":e.highlight,data:e.categoryLists,"default-expand-all":"","node-key":e.props.id},on:{"node-contextmenu":e.rightClick,"node-click":e.getApiDetail}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.menuVisible,expression:"menuVisible"}]},[s("ul",{staticClass:"menu",attrs:{id:"menu"}},[s("li",{staticClass:"menu__item",on:{click:e.addCategory}},[s("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 添 加")]),e._v(" "),s("li",{staticClass:"menu__item",on:{click:e.updateCategory}},[s("i",{staticClass:"el-icon-edit-outline"}),e._v(" 修 改")]),e._v(" "),s("li",{staticClass:"menu__item",on:{click:e.deleteCategory}},[s("i",{staticClass:"el-icon-delete-solid"}),e._v(" 删 除")])])]),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:e.apiVisible,expression:"apiVisible"}],attrs:{xl:{span:19,push:1},lg:{span:19,push:1},md:{span:24},sm:{span:24},xs:{span:24}}},[s("el-tabs",{attrs:{type:"border-card"},model:{value:e.apiName,callback:function(t){e.apiName=t},expression:"apiName"}},[s("el-tab-pane",{key:e.apiName,attrs:{label:e.apiName,name:e.apiName}}),e._v(" "),s("el-card",{attrs:{shadow:"hover"}},[s("el-form",{ref:e.reFrom,attrs:{model:e.apiModel,rules:e.rules}},[s("el-form-item",{attrs:{label:"接口名称",prop:"type"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{"auto-complete":"true",placeholder:"接口名称"},model:{value:e.apiModel.type,callback:function(t){e.$set(e.apiModel,"type",t)},expression:"apiModel.type"}},e._l(e.apiCategory,function(t,i){return s("el-option",{key:i,attrs:{label:e.setName(t),value:t.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"接口描述",prop:"desc"}},[s("el-input",{attrs:{placeholder:"接口描述"},model:{value:e.apiModel.desc,callback:function(t){e.$set(e.apiModel,"desc",t)},expression:"apiModel.desc"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"接口地址",prop:"href"}},[s("el-input",{attrs:{placeholder:"接口地址"},model:{value:e.apiModel.href,callback:function(t){e.$set(e.apiModel,"href",t)},expression:"apiModel.href"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"接口方法",prop:"method"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"接口方法"},model:{value:e.apiModel.method,callback:function(t){e.$set(e.apiModel,"method",t)},expression:"apiModel.method"}},e._l(e.methodLists,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"请求字段",prop:"request"}},[s("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.requestAdd()}}}),e._v(" "),e._l(e.apiModel.request,function(t,i){return s("div",{key:i},[s("el-input",{staticStyle:{width:"195px","margin-bottom":"5px"},attrs:{"auto-complete":"true",placeholder:"参数名"},model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"request.name"}}),e._v(" "),s("el-select",{staticStyle:{width:"195px"},attrs:{"auto-complete":"true",placeholder:"字段类型"},model:{value:t.type,callback:function(s){e.$set(t,"type",s)},expression:"request.type"}},e._l(e.typeLists,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t}})}),1),e._v(" "),s("el-select",{staticStyle:{width:"195px"},attrs:{placeholder:"是否必须"},model:{value:t.required,callback:function(s){e.$set(t,"required",s)},expression:"request.required"}},[s("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"否",value:"0"}})],1),e._v(" "),s("el-input",{staticStyle:{width:"195px"},attrs:{"auto-complete":"true",placeholder:"参数描述"},model:{value:t.desc,callback:function(s){e.$set(t,"desc",s)},expression:"request.desc"}}),e._v(" "),s("el-input",{staticStyle:{width:"195px"},attrs:{"auto-complete":"true",placeholder:"参数值"},model:{value:t.val,callback:function(s){e.$set(t,"val",s)},expression:"request.val"}}),e._v(" "),s("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"medium"},on:{click:function(s){return e.requestRemove(t,i)}}})],1)})],2),e._v(" "),s("el-form-item",{attrs:{label:"返回参数",prop:"response_string"}},[s("codemirror",{ref:"edit",staticStyle:{"line-height":"20px"},attrs:{value:e.apiModel.response_string,options:e.options},on:{change:e.updateContent}})],1),e._v(" "),s("el-form-item",{attrs:{label:"返回字段",prop:"response"}},[s("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.responseAdd()}}}),e._v(" "),e._l(e.apiModel.response,function(t,i){return s("div",{key:i},[s("el-input",{staticStyle:{width:"195px","margin-bottom":"5px"},attrs:{"auto-complete":"true",placeholder:"参数名"},model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"response.name"}}),e._v(" "),s("el-select",{staticStyle:{width:"195px"},attrs:{"auto-complete":"true",placeholder:"字段类型"},model:{value:t.type,callback:function(s){e.$set(t,"type",s)},expression:"response.type"}},e._l(e.typeLists,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t}})}),1),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"true",placeholder:"参数描述"},model:{value:t.desc,callback:function(s){e.$set(t,"desc",s)},expression:"response.desc"}}),e._v(" "),s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"medium"},on:{click:function(s){return e.responseRemove(t,i)}}})],1)})],2),e._v(" "),s("el-form-item",{attrs:{label:"备注",prop:"remark"}},[s("el-input",{attrs:{placeholder:"备注",type:"textarea"},model:{value:e.apiModel.remark,callback:function(t){e.$set(e.apiModel,"remark",t)},expression:"apiModel.remark"}})],1),e._v(" "),s("Submit",{staticStyle:{"text-align":"center"},attrs:{reFrom:e.reFrom,model:e.apiModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.title,visible:e.syncVisible,modal:e.modal,center:""},on:{"update:visible":function(t){e.syncVisible=t}}},[s("el-form",{ref:e.reFrom,attrs:{"label-width":e.labelWidth,model:e.categoryModel,rules:e.rules}},[s("el-form-item",{attrs:{label:"接口名称",prop:"name"}},[s("el-input",{attrs:{placeholder:"分类名称"},model:{value:e.categoryModel.name,callback:function(t){e.$set(e.categoryModel,"name",t)},expression:"categoryModel.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"接口上级",prop:"pid"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"接口上级"},model:{value:e.categoryModel.pid,callback:function(t){e.$set(e.categoryModel,"pid",t)},expression:"categoryModel.pid"}},e._l(e.apiCategory,function(t,i){return s("el-option",{key:i,attrs:{label:e.setName(t),value:t.id}})}),1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("Submit",{attrs:{reFrom:e.reFrom,model:e.categoryModel,url:e.url,refs:e.refs},on:{success:e.success}})],1)],1)],1)},staticRenderFns:[]};var Me=s("VU/8")(Le,Se,!1,function(e){s("x1VE")},"data-v-13d1f242",null).exports,Ce={name:"lists",data:function(){return{databaseLists:[],labelWidth:"80px",loading:!0,loadingText:"玩命加载中。。。",cgi:{}}},methods:{getDatabaseLists:function(){var e=this;ne.DatabaseLists([]).then(function(t){200===t.data.code&&(e.databaseLists=t.data.item,e.loading=!1)})}},mounted:function(){this.$nextTick(function(){this.getDatabaseLists()})}},Te={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":e.loadingText}},[s("el-table",{attrs:{data:e.databaseLists,border:""}},[s("el-table-column",{attrs:{label:"表名",prop:"name"}}),e._v(" "),s("el-table-column",{attrs:{label:"版本号",prop:"version"}}),e._v(" "),s("el-table-column",{attrs:{label:"引擎",prop:"engine"}}),e._v(" "),s("el-table-column",{attrs:{label:"数据表大小",prop:"data_length"}}),e._v(" "),s("el-table-column",{attrs:{label:"自增量",prop:"auto_increment"}}),e._v(" "),s("el-table-column",{attrs:{label:"字符集编码",prop:"collation"}}),e._v(" "),s("el-table-column",{attrs:{label:"备注",prop:"comment"}}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"create_time"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(s){return e.updateAuth(t.row)}}},[e._v("备 份")])]}}])})],1)],1)},staticRenderFns:[]};var Fe=s("VU/8")(Ce,Te,!1,function(e){s("FDVj")},"data-v-33214134",null).exports;n.default.use(r.a);var $e=new r.a({routes:[{path:"/",name:"/",component:M,meta:{mode:"",title:"登录"}},{path:"/login",name:"Login",component:M,meta:{mode:"",title:"登录"}},{path:"/admin",name:"Index",component:g,meta:{mode:"",title:"首页"}},{path:"/admin",component:g,children:[{path:"index/:access_token?",name:"Welcome",component:w,meta:{mode:"",title:"欢迎页"}},{path:"auth/index",name:"AuthLists",component:re,meta:{mode:"auth_role",title:"权限列表"}},{path:"role/index",name:"RoleLists",component:de,meta:{mode:"role",title:"角色列表"}},{path:"user/index",name:"UserLists",component:pe,meta:{mode:"user",title:"管理员列表"}},{path:"log/index",name:"SystemLog",component:ve,meta:{mode:"log",title:"日志列表"}},{path:"file/index",name:"SystemFile",component:xe,meta:{mode:"file",title:"文件列表"}},{path:"category/index",name:"categoryLists",component:Me,meta:{mode:"api_lists",title:"接口详情"}},{path:"database/index",name:"databaseLists",component:Fe,meta:{mode:"",title:"数据表列表"}}]}]}),Ne=(s("tvR6"),s("NC6I")),Ve=s.n(Ne);n.default.config.productionTip=!1,n.default.use(Y.a),n.default.use(r.a),n.default.prototype.$http=te,n.default.prototype.md5=Ve.a,n.default.prototype.code=G.a,$e.beforeEach(function(e,t,s){if(e.meta.title&&(document.title=e.meta.title),"Login"===e.name||"/"===e.name){if(!X.state.login.token)return void s();ne.CheckToken({token:X.state.login.token}).then(function(t){200===t.data.code&&s({path:"/admin/index",redirect:e.path}),s()})}else ne.CheckToken({token:X.state.login.token}).then(function(t){if(200!==t.data.code)return Y.a.Message.warning(t.data.msg),localStorage.clear(),void s({path:"/login",redirect:e.path});if(localStorage.setItem("urls",t.data.item.auth),-1===(null===X.state.login.auth_url?localStorage.getItem("urls"):X.state.login.auth_url).indexOf(e.path)&&"Welcome"!==e.name&&"admin"!==X.state.login.username){var i={},n="你没有访问权限，请联系管理员【"+G.a.QQ+"】检验数据的正确性";i.username=X.state.login.username,i.token=X.state.login.token,i.info=a()({url:e.path,info:n}),ne.LogSave(i).then(function(t){t.data.code===G.a.SUCCESS&&(Y.a.MessageBox.alert(n).then(function(){location.href="tencent://message/?uin="+G.a.QQ+"&Site=后台权限认证&Menu=yes"}),s({path:"/login",redirect:e.path}))})}else s()})}),new n.default({el:"#app",router:$e,store:X,components:{App:l},template:"<App/>"})},PsxY:function(e,t){},Qago:function(e,t){},"Qt1/":function(e,t){},UM8r:function(e,t){},Yokd:function(e,t){},ixqN:function(e,t){},"k3x/":function(e,t){e.exports={FORBIDDEN:403,METHOD_ERROR:405,SUCCESS:200,ERROR:201,QQ:785973567}},l7VM:function(e,t){},n76T:function(e,t){},t4un:function(e,t){},tvR6:function(e,t){},vRGJ:function(e,t){},x1VE:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9f8db1179894cd5302bb.js.map